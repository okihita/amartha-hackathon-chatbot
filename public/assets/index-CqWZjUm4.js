(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var he,D,ft,te,Ve,yt,mt,xt,je,Me,Fe,bt,le={},vt=[],Jt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ge=Array.isArray;function Y(t,i){for(var n in i)t[n]=i[n];return t}function Le(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function de(t,i,n){var r,s,o,l={};for(o in i)o=="key"?r=i[o]:o=="ref"?s=i[o]:l[o]=i[o];if(arguments.length>2&&(l.children=arguments.length>3?he.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)l[o]===void 0&&(l[o]=t.defaultProps[o]);return se(t,l,r,s,null)}function se(t,i,n,r,s){var o={type:t,props:i,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++ft,__i:-1,__u:0};return s==null&&D.vnode!=null&&D.vnode(o),o}function $(t){return t.children}function oe(t,i){this.props=t,this.context=i}function ne(t,i){if(i==null)return t.__?ne(t.__,t.__i+1):null;for(var n;i<t.__k.length;i++)if((n=t.__k[i])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ne(t):null}function kt(t){var i,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,i=0;i<t.__k.length;i++)if((n=t.__k[i])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return kt(t)}}function Ie(t){(!t.__d&&(t.__d=!0)&&te.push(t)&&!be.__r++||Ve!=D.debounceRendering)&&((Ve=D.debounceRendering)||yt)(be)}function be(){for(var t,i,n,r,s,o,l,h=1;te.length;)te.length>h&&te.sort(mt),t=te.shift(),h=te.length,t.__d&&(n=void 0,r=void 0,s=(r=(i=t).__v).__e,o=[],l=[],i.__P&&((n=Y({},r)).__v=r.__v+1,D.vnode&&D.vnode(n),Pe(i.__P,n,r,i.__n,i.__P.namespaceURI,32&r.__u?[s]:null,o,s??ne(r),!!(32&r.__u),l),n.__v=r.__v,n.__.__k[n.__i]=n,zt(o,n,l),r.__e=r.__=null,n.__e!=s&&kt(n)));be.__r=0}function _t(t,i,n,r,s,o,l,h,y,u,f){var a,d,g,S,C,p,k,w=r&&r.__k||vt,v=i.length;for(y=Qt(n,i,w,y,v),a=0;a<v;a++)(g=n.__k[a])!=null&&(d=g.__i==-1?le:w[g.__i]||le,g.__i=a,p=Pe(t,g,d,s,o,l,h,y,u,f),S=g.__e,g.ref&&d.ref!=g.ref&&(d.ref&&We(d.ref,null,g),f.push(g.ref,g.__c||S,g)),C==null&&S!=null&&(C=S),(k=!!(4&g.__u))||d.__k===g.__k?y=wt(g,y,t,k):typeof g.type=="function"&&p!==void 0?y=p:S&&(y=S.nextSibling),g.__u&=-7);return n.__e=C,y}function Qt(t,i,n,r,s){var o,l,h,y,u,f=n.length,a=f,d=0;for(t.__k=new Array(s),o=0;o<s;o++)(l=i[o])!=null&&typeof l!="boolean"&&typeof l!="function"?(y=o+d,(l=t.__k[o]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?se(null,l,null,null,null):ge(l)?se($,{children:l},null,null,null):l.constructor==null&&l.__b>0?se(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=t,l.__b=t.__b+1,h=null,(u=l.__i=Zt(l,n,y,a))!=-1&&(a--,(h=n[u])&&(h.__u|=2)),h==null||h.__v==null?(u==-1&&(s>f?d--:s<f&&d++),typeof l.type!="function"&&(l.__u|=4)):u!=y&&(u==y-1?d--:u==y+1?d++:(u>y?d--:d++,l.__u|=4))):t.__k[o]=null;if(a)for(o=0;o<f;o++)(h=n[o])!=null&&(2&h.__u)==0&&(h.__e==r&&(r=ne(h)),Ct(h,h));return r}function wt(t,i,n,r){var s,o;if(typeof t.type=="function"){for(s=t.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=t,i=wt(s[o],i,n,r));return i}t.__e!=i&&(r&&(i&&t.type&&!i.parentNode&&(i=ne(t)),n.insertBefore(t.__e,i||null)),i=t.__e);do i=i&&i.nextSibling;while(i!=null&&i.nodeType==8);return i}function ve(t,i){return i=i||[],t==null||typeof t=="boolean"||(ge(t)?t.some(function(n){ve(n,i)}):i.push(t)),i}function Zt(t,i,n,r){var s,o,l,h=t.key,y=t.type,u=i[n],f=u!=null&&(2&u.__u)==0;if(u===null&&t.key==null||f&&h==u.key&&y==u.type)return n;if(r>(f?1:0)){for(s=n-1,o=n+1;s>=0||o<i.length;)if((u=i[l=s>=0?s--:o++])!=null&&(2&u.__u)==0&&h==u.key&&y==u.type)return l}return-1}function Ye(t,i,n){i[0]=="-"?t.setProperty(i,n??""):t[i]=n==null?"":typeof n!="number"||Jt.test(i)?n:n+"px"}function ue(t,i,n,r,s){var o,l;e:if(i=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(i in r)n&&i in n||Ye(t.style,i,"");if(n)for(i in n)r&&n[i]==r[i]||Ye(t.style,i,n[i])}else if(i[0]=="o"&&i[1]=="n")o=i!=(i=i.replace(xt,"$1")),l=i.toLowerCase(),i=l in t||i=="onFocusOut"||i=="onFocusIn"?l.slice(2):i.slice(2),t.l||(t.l={}),t.l[i+o]=n,n?r?n.u=r.u:(n.u=je,t.addEventListener(i,o?Fe:Me,o)):t.removeEventListener(i,o?Fe:Me,o);else{if(s=="http://www.w3.org/2000/svg")i=i.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(i!="width"&&i!="height"&&i!="href"&&i!="list"&&i!="form"&&i!="tabIndex"&&i!="download"&&i!="rowSpan"&&i!="colSpan"&&i!="role"&&i!="popover"&&i in t)try{t[i]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&i[4]!="-"?t.removeAttribute(i):t.setAttribute(i,i=="popover"&&n==1?"":n))}}function Je(t){return function(i){if(this.l){var n=this.l[i.type+t];if(i.t==null)i.t=je++;else if(i.t<n.u)return;return n(D.event?D.event(i):i)}}}function Pe(t,i,n,r,s,o,l,h,y,u){var f,a,d,g,S,C,p,k,w,v,A,z,_,c,m,b,F,E=i.type;if(i.constructor!=null)return null;128&n.__u&&(y=!!(32&n.__u),o=[h=i.__e=n.__e]),(f=D.__b)&&f(i);e:if(typeof E=="function")try{if(k=i.props,w="prototype"in E&&E.prototype.render,v=(f=E.contextType)&&r[f.__c],A=f?v?v.props.value:f.__:r,n.__c?p=(a=i.__c=n.__c).__=a.__E:(w?i.__c=a=new E(k,A):(i.__c=a=new oe(k,A),a.constructor=E,a.render=ei),v&&v.sub(a),a.props=k,a.state||(a.state={}),a.context=A,a.__n=r,d=a.__d=!0,a.__h=[],a._sb=[]),w&&a.__s==null&&(a.__s=a.state),w&&E.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=Y({},a.__s)),Y(a.__s,E.getDerivedStateFromProps(k,a.__s))),g=a.props,S=a.state,a.__v=i,d)w&&E.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),w&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(w&&E.getDerivedStateFromProps==null&&k!==g&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(k,A),!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(k,a.__s,A)===!1||i.__v==n.__v){for(i.__v!=n.__v&&(a.props=k,a.state=a.__s,a.__d=!1),i.__e=n.__e,i.__k=n.__k,i.__k.some(function(j){j&&(j.__=i)}),z=0;z<a._sb.length;z++)a.__h.push(a._sb[z]);a._sb=[],a.__h.length&&l.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(k,a.__s,A),w&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(g,S,C)})}if(a.context=A,a.props=k,a.__P=t,a.__e=!1,_=D.__r,c=0,w){for(a.state=a.__s,a.__d=!1,_&&_(i),f=a.render(a.props,a.state,a.context),m=0;m<a._sb.length;m++)a.__h.push(a._sb[m]);a._sb=[]}else do a.__d=!1,_&&_(i),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++c<25);a.state=a.__s,a.getChildContext!=null&&(r=Y(Y({},r),a.getChildContext())),w&&!d&&a.getSnapshotBeforeUpdate!=null&&(C=a.getSnapshotBeforeUpdate(g,S)),b=f,f!=null&&f.type===$&&f.key==null&&(b=St(f.props.children)),h=_t(t,ge(b)?b:[b],i,n,r,s,o,l,h,y,u),a.base=i.__e,i.__u&=-161,a.__h.length&&l.push(a),p&&(a.__E=a.__=null)}catch(j){if(i.__v=null,y||o!=null)if(j.then){for(i.__u|=y?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;o[o.indexOf(h)]=null,i.__e=h}else{for(F=o.length;F--;)Le(o[F]);Te(i)}else i.__e=n.__e,i.__k=n.__k,j.then||Te(i);D.__e(j,i,n)}else o==null&&i.__v==n.__v?(i.__k=n.__k,i.__e=n.__e):h=i.__e=Xt(n.__e,i,n,r,s,o,l,y,u);return(f=D.diffed)&&f(i),128&i.__u?void 0:h}function Te(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Te)}function zt(t,i,n){for(var r=0;r<n.length;r++)We(n[r],n[++r],n[++r]);D.__c&&D.__c(i,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(o){o.call(s)})}catch(o){D.__e(o,s.__v)}})}function St(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ge(t)?t.map(St):Y({},t)}function Xt(t,i,n,r,s,o,l,h,y){var u,f,a,d,g,S,C,p=n.props,k=i.props,w=i.type;if(w=="svg"?s="http://www.w3.org/2000/svg":w=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((g=o[u])&&"setAttribute"in g==!!w&&(w?g.localName==w:g.nodeType==3)){t=g,o[u]=null;break}}if(t==null){if(w==null)return document.createTextNode(k);t=document.createElementNS(s,w,k.is&&k),h&&(D.__m&&D.__m(i,o),h=!1),o=null}if(w==null)p===k||h&&t.data==k||(t.data=k);else{if(o=o&&he.call(t.childNodes),p=n.props||le,!h&&o!=null)for(p={},u=0;u<t.attributes.length;u++)p[(g=t.attributes[u]).name]=g.value;for(u in p)if(g=p[u],u!="children"){if(u=="dangerouslySetInnerHTML")a=g;else if(!(u in k)){if(u=="value"&&"defaultValue"in k||u=="checked"&&"defaultChecked"in k)continue;ue(t,u,null,g,s)}}for(u in k)g=k[u],u=="children"?d=g:u=="dangerouslySetInnerHTML"?f=g:u=="value"?S=g:u=="checked"?C=g:h&&typeof g!="function"||p[u]===g||ue(t,u,g,p[u],s);if(f)h||a&&(f.__html==a.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),i.__k=[];else if(a&&(t.innerHTML=""),_t(i.type=="template"?t.content:t,ge(d)?d:[d],i,n,r,w=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,l,o?o[0]:n.__k&&ne(n,0),h,y),o!=null)for(u=o.length;u--;)Le(o[u]);h||(u="value",w=="progress"&&S==null?t.removeAttribute("value"):S!=null&&(S!==t[u]||w=="progress"&&!S||w=="option"&&S!=p[u])&&ue(t,u,S,p[u],s),u="checked",C!=null&&C!=t[u]&&ue(t,u,C,p[u],s))}return t}function We(t,i,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&i==null||(t.__u=t(i))}else t.current=i}catch(s){D.__e(s,n)}}function Ct(t,i,n){var r,s;if(D.unmount&&D.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||We(r,null,i)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){D.__e(o,i)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&Ct(r[s],i,n||typeof t.type!="function");n||Le(t.__e),t.__c=t.__=t.__e=void 0}function ei(t,i,n){return this.constructor(t,n)}function ti(t,i,n){var r,s,o,l;i==document&&(i=document.documentElement),D.__&&D.__(t,i),s=(r=!1)?null:i.__k,o=[],l=[],Pe(i,t=i.__k=de($,null,[t]),s||le,le,i.namespaceURI,s?null:i.firstChild?he.call(i.childNodes):null,o,s?s.__e:i.firstChild,r,l),zt(o,t,l)}function ii(t,i,n){var r,s,o,l,h=Y({},t.props);for(o in t.type&&t.type.defaultProps&&(l=t.type.defaultProps),i)o=="key"?r=i[o]:o=="ref"?s=i[o]:h[o]=i[o]===void 0&&l!=null?l[o]:i[o];return arguments.length>2&&(h.children=arguments.length>3?he.call(arguments,2):n),se(t.type,h,r||t.key,s||t.ref,null)}function ni(t){function i(n){var r,s;return this.getChildContext||(r=new Set,(s={})[i.__c]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&r.forEach(function(l){l.__e=!0,Ie(l)})},this.sub=function(o){r.add(o);var l=o.componentWillUnmount;o.componentWillUnmount=function(){r&&r.delete(o),l&&l.call(o)}}),n.children}return i.__c="__cC"+bt++,i.__=t,i.Provider=i.__l=(i.Consumer=function(n,r){return n.children(r)}).contextType=i,i}he=vt.slice,D={__e:function(t,i,n,r){for(var s,o,l;i=i.__;)if((s=i.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(t)),l=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),l=s.__d),l)return s.__E=s}catch(h){t=h}throw t}},ft=0,oe.prototype.setState=function(t,i){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Y({},this.state),typeof t=="function"&&(t=t(Y({},n),this.props)),t&&Y(n,t),t!=null&&this.__v&&(i&&this._sb.push(i),Ie(this))},oe.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ie(this))},oe.prototype.render=$,te=[],yt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,mt=function(t,i){return t.__v.__b-i.__v.__b},be.__r=0,xt=/(PointerCapture)$|Capture$/i,je=0,Me=Je(!1),Fe=Je(!0),bt=0;var ri=0;function e(t,i,n,r,s,o){i||(i={});var l,h,y=i;if("ref"in y)for(h in y={},i)h=="ref"?l=i[h]:y[h]=i[h];var u={type:t,props:y,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ri,__i:-1,__u:0,__source:s,__self:o};if(typeof t=="function"&&(l=t.defaultProps))for(h in l)y[h]===void 0&&(y[h]=l[h]);return D.vnode&&D.vnode(u),u}var ce,P,Ce,Qe,ke=0,Bt=[],W=D,Ze=W.__b,Xe=W.__r,et=W.diffed,tt=W.__c,it=W.unmount,nt=W.__;function $e(t,i){W.__h&&W.__h(P,t,ke||i),ke=0;var n=P.__H||(P.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function M(t){return ke=1,ai(Et,t)}function ai(t,i,n){var r=$e(ce++,2);if(r.t=t,!r.__c&&(r.__=[Et(void 0,i),function(h){var y=r.__N?r.__N[0]:r.__[0],u=r.t(y,h);y!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=P,!P.__f)){var s=function(h,y,u){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(d){return!!d.__c});if(f.every(function(d){return!d.__N}))return!o||o.call(this,h,y,u);var a=r.__c.props!==h;return f.forEach(function(d){if(d.__N){var g=d.__[0];d.__=d.__N,d.__N=void 0,g!==d.__[0]&&(a=!0)}}),o&&o.call(this,h,y,u)||a};P.__f=!0;var o=P.shouldComponentUpdate,l=P.componentWillUpdate;P.componentWillUpdate=function(h,y,u){if(this.__e){var f=o;o=void 0,s(h,y,u),o=f}l&&l.call(this,h,y,u)},P.shouldComponentUpdate=s}return r.__N||r.__}function q(t,i){var n=$e(ce++,3);!W.__s&&At(n.__H,i)&&(n.__=t,n.u=i,P.__H.__h.push(n))}function si(t){return ke=5,oi(function(){return{current:t}},[])}function oi(t,i){var n=$e(ce++,7);return At(n.__H,i)&&(n.__=t(),n.__H=i,n.__h=t),n.__}function li(){for(var t;t=Bt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ye),t.__H.__h.forEach(De),t.__H.__h=[]}catch(i){t.__H.__h=[],W.__e(i,t.__v)}}W.__b=function(t){P=null,Ze&&Ze(t)},W.__=function(t,i){t&&i.__k&&i.__k.__m&&(t.__m=i.__k.__m),nt&&nt(t,i)},W.__r=function(t){Xe&&Xe(t),ce=0;var i=(P=t.__c).__H;i&&(Ce===P?(i.__h=[],P.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(ye),i.__h.forEach(De),i.__h=[],ce=0)),Ce=P},W.diffed=function(t){et&&et(t);var i=t.__c;i&&i.__H&&(i.__H.__h.length&&(Bt.push(i)!==1&&Qe===W.requestAnimationFrame||((Qe=W.requestAnimationFrame)||di)(li)),i.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ce=P=null},W.__c=function(t,i){i.some(function(n){try{n.__h.forEach(ye),n.__h=n.__h.filter(function(r){return!r.__||De(r)})}catch(r){i.some(function(s){s.__h&&(s.__h=[])}),i=[],W.__e(r,n.__v)}}),tt&&tt(t,i)},W.unmount=function(t){it&&it(t);var i,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ye(r)}catch(s){i=s}}),n.__H=void 0,i&&W.__e(i,n.__v))};var rt=typeof requestAnimationFrame=="function";function di(t){var i,n=function(){clearTimeout(r),rt&&cancelAnimationFrame(i),setTimeout(t)},r=setTimeout(n,35);rt&&(i=requestAnimationFrame(n))}function ye(t){var i=P,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),P=i}function De(t){var i=P;t.__c=t.__(),P=i}function At(t,i){return!t||t.length!==i.length||i.some(function(n,r){return n!==t[r]})}function Et(t,i){return typeof i=="function"?i(t):i}var ci={};function fe(t,i){for(var n in i)t[n]=i[n];return t}function pi(t,i,n){var r,s=/(?:\?([^#]*))?(#.*)?$/,o=t.match(s),l={};if(o&&o[1])for(var h=o[1].split("&"),y=0;y<h.length;y++){var u=h[y].split("=");l[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}t=Re(t.replace(s,"")),i=Re(i||"");for(var f=Math.max(t.length,i.length),a=0;a<f;a++)if(i[a]&&i[a].charAt(0)===":"){var d=i[a].replace(/(^:|[+*?]+$)/g,""),g=(i[a].match(/[+*?]+$/)||ci)[0]||"",S=~g.indexOf("+"),C=~g.indexOf("*"),p=t[a]||"";if(!p&&!C&&(g.indexOf("?")<0||S)){r=!1;break}if(l[d]=decodeURIComponent(p),S||C){l[d]=t.slice(a).map(decodeURIComponent).join("/");break}}else if(i[a]!==t[a]){r=!1;break}return(n.default===!0||r!==!1)&&l}function hi(t,i){return t.rank<i.rank?1:t.rank>i.rank?-1:t.index-i.index}function gi(t,i){return t.index=i,t.rank=(function(n){return n.props.default?0:Re(n.props.path).map(ui).join("")})(t),t.props}function Re(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function ui(t){return t.charAt(0)==":"?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}var fi={},ie=[],at=[],G=null,Mt={url:Ne()},yi=ni(Mt);function Ne(){var t;return""+((t=G&&G.location?G.location:G&&G.getCurrentLocation?G.getCurrentLocation():typeof location<"u"?location:fi).pathname||"")+(t.search||"")}function mi(t,i){return i===void 0&&(i=!1),typeof t!="string"&&t.url&&(i=t.replace,t=t.url),(function(n){for(var r=ie.length;r--;)if(ie[r].canRoute(n))return!0;return!1})(t)&&(function(n,r){r===void 0&&(r="push"),G&&G[r]?G[r](n):typeof history<"u"&&history[r+"State"]&&history[r+"State"](null,null,n)})(t,i?"replace":"push"),Ft(t)}function Ft(t){for(var i=!1,n=0;n<ie.length;n++)ie[n].routeTo(t)&&(i=!0);return i}function xi(t){if(t&&t.getAttribute){var i=t.getAttribute("href"),n=t.getAttribute("target");if(i&&i.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return mi(i)}}function bi(t){return t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault(),!1}function vi(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)){var i=t.target;do if(i.localName==="a"&&i.getAttribute("href")){if(i.hasAttribute("data-native")||i.hasAttribute("native"))return;if(xi(i))return bi(t)}while(i=i.parentNode)}}var st=!1;function It(t){t.history&&(G=t.history),this.state={url:t.url||Ne()}}fe(It.prototype=new oe,{shouldComponentUpdate:function(t){return t.static!==!0||t.url!==this.props.url||t.onChange!==this.props.onChange},canRoute:function(t){var i=ve(this.props.children);return this.g(i,t)!==void 0},routeTo:function(t){this.setState({url:t});var i=this.canRoute(t);return this.p||this.forceUpdate(),i},componentWillMount:function(){this.p=!0},componentDidMount:function(){var t=this;st||(st=!0,G||addEventListener("popstate",function(){Ft(Ne())}),addEventListener("click",vi)),ie.push(this),G&&(this.u=G.listen(function(i){var n=i.location||i;t.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),ie.splice(ie.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(t,i){t=t.filter(gi).sort(hi);for(var n=0;n<t.length;n++){var r=t[n],s=pi(i,r.props.path,r.props);if(s)return[r,s]}},render:function(t,i){var n,r,s=t.onChange,o=i.url,l=this.c,h=this.g(ve(t.children),o);if(h&&(r=ii(h[0],fe(fe({url:o,matches:n=h[1]},n),{key:void 0,ref:void 0}))),o!==(l&&l.url)){fe(Mt,l=this.c={url:o,previous:l&&l.url,current:r,path:r?r.props.path:null,matches:n}),l.router=this,l.active=r?[r]:[];for(var y=at.length;y--;)at[y]({});typeof s=="function"&&s(l)}return de(yi.Provider,{value:l},r)}});const ot=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ki=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,n,r)=>r?r.toUpperCase():n.toLowerCase()),lt=t=>{const i=ki(t);return i.charAt(0).toUpperCase()+i.slice(1)},_i=(...t)=>t.filter((i,n,r)=>!!i&&i.trim()!==""&&r.indexOf(i)===n).join(" ").trim();var wi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};const zi=({color:t="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:r,children:s,iconNode:o,class:l="",...h})=>de("svg",{...wi,width:String(i),height:i,stroke:t,"stroke-width":r?Number(n)*24/Number(i):n,class:["lucide",l].join(" "),...h},[...o.map(([y,u])=>de(y,u)),...ve(s)]);const B=(t,i)=>{const n=({class:r="",className:s="",children:o,...l})=>de(zi,{...l,iconNode:i,class:_i(`lucide-${ot(lt(t))}`,`lucide-${ot(t)}`,r,s)},o);return n.displayName=lt(t),n};const Si=B("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Ci=B("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);const Tt=B("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const pe=B("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const Dt=B("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const Rt=B("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const Bi=B("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);const He=B("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Ai=B("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const jt=B("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Ei=B("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]);const Mi=B("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Fi=B("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Ii=B("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Ue=B("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Ti=B("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Di=B("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);const Ri=B("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const ji=B("clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]);const Lt=B("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Pt=B("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);const ae=B("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Wt=B("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const $t=B("dice-5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);const Li=B("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const Nt=B("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Ht=B("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);const Pi=B("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);const Wi=B("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Oe=B("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const $i=B("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);const Ni=B("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);const re=B("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const dt=B("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);const Be=B("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);const Hi=B("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]);const Ui=B("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const Ut=B("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Ke=B("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Oi=B("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Ki=B("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);const qi=B("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const Ot=B("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Gi=B("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);const Vi=B("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const Kt=B("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);const Yi=B("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const ze=B("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const qe=B("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const qt=B("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const Ge=B("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);const Se=B("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Ji=B("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);const Qi=B("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);const Zi=B("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Xi=B("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);const en=B("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);const J=B("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);const tn=B("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Gt({message:t,type:i="success",onClose:n}){q(()=>{const s=setTimeout(n,3e3);return()=>clearTimeout(s)},[n]);const r={success:e(Ue,{size:20}),error:e(Ri,{size:20}),info:e(Wi,{size:20})};return e("div",{class:`toast toast-${i}`,children:[r[i],e("span",{children:t})]})}function Vt({title:t,message:i,onConfirm:n,onCancel:r,confirmText:s="Confirm",cancelText:o="Cancel",type:l="danger"}){return e("div",{class:"modal-overlay",onClick:r,children:e("div",{class:"confirm-dialog",onClick:h=>h.stopPropagation(),children:[e("div",{class:"confirm-icon",children:e(Se,{size:48})}),e("h3",{children:t}),e("p",{children:i}),e("div",{class:"confirm-actions",children:[e("button",{class:"btn btn-secondary",onClick:r,children:o}),e("button",{class:`btn btn-${l}`,onClick:n,children:s})]})]})})}function Yt(){const[t,i]=M(null),[n,r]=M(null);return{toast:t,confirmDialog:n,showToast:(l,h="success")=>{i({message:l,type:h})},showConfirm:l=>new Promise(h=>{r({...l,onConfirm:()=>{r(null),h(!0)},onCancel:()=>{r(null),h(!1)}})}),clearToast:()=>i(null)}}const N="",V=async(t,i={})=>{const n=await fetch(`${N}${t}`,i);if(!n.ok){const r=await n.json().catch(()=>({error:"Request failed"}));throw new Error(r.error||"Request failed")}return n.json()},me={getAll:()=>fetch(`${N}/api/users`).then(t=>t.json()),verify:(t,i)=>V("/api/users/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:t,status:i})}),delete:t=>V(`/api/users/${t}`,{method:"DELETE"})},ee={getAll:()=>fetch(`${N}/api/majelis`).then(t=>t.json()),create:t=>V("/api/majelis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),update:(t,i)=>V(`/api/majelis/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),delete:t=>V(`/api/majelis/${t}`,{method:"DELETE"}),addMember:(t,i)=>V(`/api/majelis/${t}/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:i})}),removeMember:(t,i)=>V(`/api/majelis/${t}/members/${i}`,{method:"DELETE"})},_e={populateMockUsers:()=>V("/api/superadmin/populate-mock",{method:"POST"}),deleteAllMockUsers:()=>V("/api/superadmin/delete-all-mock",{method:"DELETE"}),populateMockMajelis:()=>V("/api/superadmin/populate-mock-majelis",{method:"POST"}),deleteAllMockMajelis:()=>V("/api/superadmin/delete-all-mock-majelis",{method:"DELETE"})};function nn(){const[t,i]=M([]),[n,r]=M([]),[s,o]=M(!0),[l,h]=M(null),[y,u]=M({key:null,direction:"asc"}),{toast:f,confirmDialog:a,showToast:d,showConfirm:g,clearToast:S}=Yt();q(()=>{C();const c=new EventSource(`${N}/api/events/users`);return c.onmessage=m=>{const b=JSON.parse(m.data);b.type==="user_created"&&b.data?(i(F=>[b.data,...F.filter(E=>E.phone!==b.data.phone)]),d(`User registered: ${b.data?.name||"New user"}`,"success")):b.type==="user_updated"&&b.data&&(i(F=>F.map(E=>E.phone===b.data.phone?b.data:E)),d(`User updated: ${b.data?.name||"User"}`,"success"))},()=>c.close()},[]);const C=async()=>{o(!0);try{const[c,m]=await Promise.all([me.getAll(),ee.getAll()]);i(c),r(m)}catch{d("Failed to fetch data","error")}o(!1)},p=c=>{let m="asc";y.key===c&&y.direction==="asc"&&(m="desc"),u({key:c,direction:m})},k=[...t].sort((c,m)=>{if(!y.key)return 0;let b,F;if(y.key==="majelis_name"){const E=c.majelis_id?n.find(U=>U.id===c.majelis_id):null,j=m.majelis_id?n.find(U=>U.id===m.majelis_id):null;b=E?.name||"",F=j?.name||""}else b=c[y.key]||"",F=m[y.key]||"";return b<F?y.direction==="asc"?-1:1:b>F?y.direction==="asc"?1:-1:0}),w=async(c,m)=>{h(c);try{await me.verify(c,m),await C(),d("User verified successfully")}catch(b){d(b.message,"error")}finally{h(null)}},v=async(c,m)=>{if(await g({title:"Delete User",message:`Are you sure you want to delete ${m}?`})){h(c);try{await me.delete(c),await C(),d("User deleted successfully")}catch(F){d(F.message,"error")}finally{h(null)}}},A=async()=>{h("mock");try{await _e.populateMockUsers(),await C(),d("Mock data populated successfully!")}catch(c){d(c.message,"error")}finally{h(null)}},z=async()=>{h("delete-all");try{await _e.deleteAllMockUsers(),await C(),d("All mock users deleted successfully!")}catch(c){d(c.message,"error")}finally{h(null)}},_=c=>y.key!==c?"⇅":y.direction==="asc"?"↑":"↓";return e($,{children:[e("div",{style:"margin-bottom: 24px; padding: 16px 20px; background: #F8FAFC; border: 1px solid #E2E8F0; border-radius: 8px;",children:[e("h1",{style:"margin: 0 0 8px 0; font-size: 20px; color: #1F2937;",children:"User Management"}),e("p",{style:"margin: 0; font-size: 14px; color: #64748B; line-height: 1.6;",children:"View and manage all registered borrowers. Verify pending registrations, assign users to majelis groups, and access individual profiles for detailed credit assessment. Click on a user's name to view their complete profile."})]}),e("div",{class:"stats-grid",style:"margin-bottom: 20px;",children:[e("div",{class:"stat-card",children:[e("div",{class:"stat-value",children:s?"-":t.length}),e("div",{class:"stat-label",children:"Total Users"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #10B981;",children:s?"-":t.filter(c=>c.status==="active").length}),e("div",{class:"stat-label",children:"Verified"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #F59E0B;",children:s?"-":t.filter(c=>c.status!=="active").length}),e("div",{class:"stat-label",children:"Pending"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #63297A;",children:s?"-":t.filter(c=>c.majelis_id).length}),e("div",{class:"stat-label",children:"In Majelis"})]})]}),e("div",{class:"card",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;",children:[e("h2",{style:"margin: 0; display: flex; align-items: center; gap: 8px;",children:[e(J,{size:24})," User Management (",s?"-":t.length,")"]}),e("div",{style:"display: flex; gap: 0.5rem;",children:(()=>{const c=s?0:t.filter(m=>m.is_mock).length;return e($,{children:[e("button",{class:"btn btn-primary",onClick:A,disabled:s||l==="mock"||c>0,title:c>0?"Mock users already exist":"",children:[e($t,{size:16})," Populate Mock"]}),e("button",{class:"btn btn-danger",onClick:z,disabled:s||l==="delete-all"||c===0,children:[e(qt,{size:16})," Delete Mock ",c>0&&`(${c})`]})]})})()})]}),e("table",{style:"table-layout: fixed; width: 100%;",children:[e("thead",{children:e("tr",{children:[e("th",{style:"cursor: pointer; width: 18%;",onClick:()=>p("name"),children:["Name ",_("name")]}),e("th",{style:"cursor: pointer; width: 14%;",onClick:()=>p("phone"),children:["Phone ",_("phone")]}),e("th",{style:"cursor: pointer; width: 14%;",onClick:()=>p("business_type"),children:["Business ",_("business_type")]}),e("th",{style:"cursor: pointer; width: 14%;",onClick:()=>p("location"),children:["Location ",_("location")]}),e("th",{style:"cursor: pointer; width: 14%;",onClick:()=>p("majelis_name"),children:["Majelis ",_("majelis_name")]}),e("th",{style:"cursor: pointer; width: 10%;",onClick:()=>p("status"),children:["Status ",_("status")]}),e("th",{style:"width: 16%;",children:"Actions"})]})}),e("tbody",{children:s?[...Array(5)].map((c,m)=>e("tr",{children:[e("td",{children:e("div",{style:"background: #e5e7eb; height: 16px; width: 120px; border-radius: 4px;"})}),e("td",{children:e("div",{style:"background: #e5e7eb; height: 16px; width: 100px; border-radius: 4px;"})}),e("td",{children:e("div",{style:"background: #e5e7eb; height: 16px; width: 80px; border-radius: 4px;"})}),e("td",{children:e("div",{style:"background: #e5e7eb; height: 16px; width: 80px; border-radius: 4px;"})}),e("td",{children:e("div",{style:"background: #e5e7eb; height: 16px; width: 90px; border-radius: 4px;"})}),e("td",{children:e("div",{style:"background: #e5e7eb; height: 20px; width: 60px; border-radius: 4px;"})}),e("td",{children:e("div",{style:"background: #e5e7eb; height: 28px; width: 70px; border-radius: 4px;"})})]},m)):k.map(c=>{const m=c.majelis_id?n.find(b=>b.id===c.majelis_id):null;return e("tr",{children:[e("td",{children:[e("strong",{children:e("a",{href:`/user-profile/${c.phone}`,class:"user-link",children:c.name})}),c.is_demo&&e("span",{style:"margin-left: 6px; padding: 2px 6px; background: #ff9800; color: white; border-radius: 4px; font-size: 10px; font-weight: bold;",children:"DEMO"}),c.is_mock&&!c.is_demo&&e("span",{style:"margin-left: 6px; padding: 2px 6px; background: #9e9e9e; color: white; border-radius: 4px; font-size: 10px; font-weight: bold;",children:"MOCK"})]}),e("td",{children:c.phone}),e("td",{children:c.business?.category||c.business_type||"-"}),e("td",{children:c.business?.location||c.location||"-"}),e("td",{children:m?e("a",{href:`/majelis/${m.id}`,style:"color: #2196f3; text-decoration: none; display: flex; align-items: center; gap: 4px;",children:[e(J,{size:14}),m.name]}):e("span",{style:"color: #999;",children:"—"})}),e("td",{children:e("span",{class:`status ${c.status==="active"?"verified":"pending"}`,children:c.status==="active"?"Verified":"Pending"})}),e("td",{children:e("div",{class:"actions",children:[e("button",{class:"btn btn-icon btn-success",onClick:()=>w(c.phone,!0),disabled:l===c.phone||c.status==="active",title:"Verify user",children:e(Mi,{size:16})}),e("button",{class:"btn btn-icon btn-secondary",onClick:()=>v(c.phone,c.name),disabled:l===c.phone,title:"Delete user",children:e(qe,{size:16})})]})})]},c.phone)})})]})]}),f&&e(Gt,{message:f.message,type:f.type,onClose:S}),a&&e(Vt,{...a})]})}function rn(){const[t,i]=M([]),[n,r]=M([]),[s,o]=M(!1),[l,h]=M(null),[y,u]=M({name:"",description:"",schedule_day:"",schedule_time:"10:00",location:""}),[f,a]=M(null),[d,g]=M(""),[S,C]=M([]),[p,k]=M(null),{toast:w,confirmDialog:v,showToast:A,showConfirm:z,clearToast:_}=Yt();q(()=>{c()},[]),q(()=>{if(!d.trim()||!f){C([]);return}const x=d.toLowerCase(),H=t.find(Z=>Z.id===f)?.members||[],Q=n.filter(Z=>Z.status==="active"&&!H.includes(Z.phone)&&!Z.majelis_id).filter(Z=>Z.name?.toLowerCase().includes(x)||Z.phone?.includes(x)).slice(0,5);C(Q)},[d,n,f,t]);const c=async()=>{try{const[x,I]=await Promise.all([ee.getAll(),me.getAll()]);i(x),r(I)}catch{A("Failed to fetch data","error")}},m=async x=>{x.preventDefault();try{l?await ee.update(l,y):await ee.create(y),o(!1),h(null),u({name:"",description:"",schedule_day:"",schedule_time:"10:00",location:""}),c(),A(`Majelis ${l?"updated":"created"} successfully`)}catch(I){A(I.message,"error")}},b=async(x,I)=>{if(await z({title:"Delete Majelis",message:`Are you sure you want to delete "${I}"?`}))try{await ee.delete(x),c(),A("Majelis deleted successfully")}catch(T){A(T.message,"error")}},F=async(x,I)=>{try{await ee.addMember(x,I),a(null),g(""),c(),A("Member added successfully")}catch(H){A(H.message,"error")}},E=async(x,I)=>{const H=n.find(Q=>Q.phone===I);if(await z({title:"Remove Member",message:`Remove ${H?.name||I} from this majelis?`,confirmText:"Remove"}))try{await ee.removeMember(x,I),c(),A("Member removed successfully")}catch(Q){A(Q.message,"error")}},j=async()=>{if(await z({title:"Populate Mock Majelis",message:"This will create 3 mock majelis groups. Continue?",confirmText:"Populate",type:"primary"})){k("mock");try{await _e.populateMockMajelis(),c(),A("Mock majelis populated!")}catch(I){A(I.message,"error")}finally{k(null)}}},U=async()=>{k("delete-all");try{await _e.deleteAllMockMajelis(),c(),A("All mock majelis deleted!")}catch(x){A(x.message,"error")}finally{k(null)}};return e($,{children:[e("div",{class:"card",children:[t.length>0&&e("div",{class:"stats-grid",style:"margin-bottom: 20px;",children:[e("div",{class:"stat-card",children:[e("div",{class:"stat-value",children:t.length}),e("div",{class:"stat-label",children:"Total Groups"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #63297A;",children:t.reduce((x,I)=>x+(I.members?.length||0),0)}),e("div",{class:"stat-label",children:"Total Members"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #10B981;",children:(t.reduce((x,I)=>x+(I.members?.length||0),0)/Math.max(t.length,1)).toFixed(1)}),e("div",{class:"stat-label",children:"Avg per Group"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #2563EB;",children:t.filter(x=>(x.members?.length||0)>=5).length}),e("div",{class:"stat-label",children:"Active (5+ members)"})]})]}),e("div",{class:"card-header-actions",children:[e("h2",{style:"display: flex; align-items: center; gap: 8px;",children:[e(J,{size:24})," Majelis Groups"]}),e("div",{style:"display: flex; gap: 8px;",children:[e("button",{class:"btn btn-primary",onClick:()=>o(!0),children:[e(Ut,{size:16})," Create Majelis"]}),e("button",{class:"btn btn-secondary",onClick:j,disabled:p==="mock",children:[e($t,{size:16})," Populate Mock"]}),e("button",{class:"btn btn-danger",onClick:U,disabled:p==="delete-all",children:[e(qt,{size:16})," Delete All Mock"]})]})]}),e("div",{class:"majelis-grid",children:t.length===0?e("div",{class:"empty-state",children:e("p",{children:"No majelis yet. Create one!"})}):t.map(x=>{const I=x.members?.length||0;return e("div",{class:"majelis-card",children:[e("a",{href:`/majelis/${x.id}`,style:"text-decoration: none; color: inherit;",children:[e("h3",{style:"display: flex; align-items: center; gap: 8px;",children:[x.name,x.is_mock&&e("span",{style:"padding: 2px 6px; background: #9e9e9e; color: white; border-radius: 4px; font-size: 10px;",children:"MOCK"})]}),e("div",{class:"info-row",children:[e("span",{children:[e(He,{size:14})," ",x.schedule_day," ",x.schedule_time]}),e("span",{children:[e(re,{size:14})," ",x.location||"No location"]})]}),x.description&&e("p",{class:"majelis-description",children:x.description})]}),e("div",{class:"member-section",children:[e("div",{class:"member-header",children:[e("span",{class:"member-count",children:[e(J,{size:14})," ",I," member",I!==1?"s":""]}),e("button",{class:"btn btn-primary btn-icon",onClick:()=>a(x.id),title:"Add member",children:e(Zi,{size:14})})]}),I===0?e("div",{class:"no-members",children:"No members yet. Click + to add."}):e("div",{class:"member-list",children:x.members.map(H=>{const T=n.find(Q=>Q.phone===H);return e("div",{class:"member-item",children:[e("div",{class:"member-info",children:[e("div",{class:"member-name",children:T?.name||H}),T&&e("div",{class:"member-business",children:T.business_type})]}),e("button",{class:"btn-remove",onClick:()=>E(x.id,H),title:"Remove member",children:e(tn,{size:14})})]},H)})})]}),e("div",{class:"actions",children:[e("button",{class:"btn btn-secondary",onClick:()=>{h(x.id),u(x),o(!0)},children:[e(Ui,{size:14})," ",e("span",{class:"btn-text",children:"Edit"})]}),e("button",{class:"btn btn-danger",onClick:()=>b(x.id,x.name),children:[e(qe,{size:14})," ",e("span",{class:"btn-text",children:"Delete"})]})]})]},x.id)})})]}),s&&e("div",{class:"modal active",children:e("div",{class:"modal-content",children:[e("h2",{children:[l?"Edit":"Create"," Majelis"]}),e("form",{onSubmit:m,children:[e("div",{class:"form-group",children:[e("label",{children:"Name *"}),e("input",{type:"text",value:y.name,onInput:x=>u({...y,name:x.target.value}),required:!0})]}),e("div",{class:"form-group",children:[e("label",{children:"Description"}),e("textarea",{value:y.description,onInput:x=>u({...y,description:x.target.value})})]}),e("div",{class:"form-group",children:[e("label",{children:"Schedule Day *"}),e("select",{value:y.schedule_day,onChange:x=>u({...y,schedule_day:x.target.value}),required:!0,children:[e("option",{value:"",children:"Select day"}),e("option",{value:"Senin",children:"Senin"}),e("option",{value:"Selasa",children:"Selasa"}),e("option",{value:"Rabu",children:"Rabu"}),e("option",{value:"Kamis",children:"Kamis"}),e("option",{value:"Jumat",children:"Jumat"}),e("option",{value:"Sabtu",children:"Sabtu"})]})]}),e("div",{class:"form-group",children:[e("label",{children:"Schedule Time"}),e("input",{type:"time",value:y.schedule_time,onInput:x=>u({...y,schedule_time:x.target.value})})]}),e("div",{class:"form-group",children:[e("label",{children:"Location"}),e("input",{type:"text",value:y.location,onInput:x=>u({...y,location:x.target.value})})]}),e("div",{class:"form-actions",children:[e("button",{type:"button",class:"btn btn-secondary",onClick:()=>{o(!1),h(null),u({name:"",description:"",schedule_day:"",schedule_time:"10:00",location:""})},children:"Cancel"}),e("button",{type:"submit",class:"btn btn-primary",children:"Save"})]})]})]})}),f&&e("div",{class:"modal active",onClick:x=>{x.target.className==="modal active"&&(a(null),g(""))},children:e("div",{class:"modal-content modal-sm",children:[e("h2",{children:"Add Member"}),e("div",{class:"form-group",children:[e("label",{children:"Search by name or phone"}),e("input",{type:"text",value:d,onInput:x=>g(x.target.value),placeholder:"Type to search...",autoFocus:!0}),S.length>0&&e("div",{class:"autocomplete-results",children:S.map(x=>e("div",{class:"autocomplete-item",onClick:()=>F(f,x.phone),children:[e("div",{class:"autocomplete-name",children:x.name}),e("div",{class:"autocomplete-details",children:[x.phone," • ",x.business?.category||x.business_type||"-"]})]},x.phone))}),d&&S.length===0&&e("div",{class:"autocomplete-empty",children:"No verified users found"})]}),!d&&(()=>{const I=t.find(T=>T.id===f)?.members||[],H=n.filter(T=>T.status==="active"&&!I.includes(T.phone)&&!T.majelis_id).slice(0,10);return H.length>0?e("div",{style:"margin-top: 16px;",children:[e("label",{style:"font-size: 12px; color: #666; margin-bottom: 8px; display: block;",children:["Eligible members (",H.length,n.filter(T=>T.status==="active"&&!I.includes(T.phone)&&!T.majelis_id).length>10?"+":"",")"]}),e("div",{class:"autocomplete-results",style:"position: static; max-height: 250px;",children:H.map(T=>e("div",{class:"autocomplete-item",onClick:()=>F(f,T.phone),children:[e("div",{class:"autocomplete-name",children:[T.name,T.is_demo&&e("span",{style:"margin-left: 4px; padding: 1px 4px; background: #ff9800; color: white; border-radius: 3px; font-size: 9px;",children:"DEMO"})]}),e("div",{class:"autocomplete-details",children:[T.phone," • ",T.business?.category||T.business_type||"-"]})]},T.phone))})]}):e("div",{style:"margin-top: 16px; color: #666; font-size: 13px; text-align: center;",children:["No eligible members available.",e("br",{}),e("span",{style:"font-size: 11px;",children:"(Must be verified & not in another majelis)"})]})})(),e("div",{class:"form-actions",children:e("button",{type:"button",class:"btn btn-secondary",onClick:()=>{a(null),g("")},children:"Cancel"})})]})}),w&&e(Gt,{message:w.message,type:w.type,onClose:_}),v&&e(Vt,{...v})]})}const we={lat:-6.235,lng:106.8},ct=(t,i=!0)=>{const n=t.split("").reduce((s,o)=>s+o.charCodeAt(0),0),r=i?.015:.02;return{lat:we.lat+(n%100-50)*r/50,lng:we.lng+(n*7%100-50)*r/50}},an=(t,i,n)=>{const s=(n?.id||"default").split("").reduce((y,u)=>y+u.charCodeAt(0),0),o=i.length>0?i.reduce((y,u)=>y+u.attendees.length/u.total,0)/i.length*100:75,l=t.map(y=>600+(y.phone||"").split("").reduce((f,a)=>f+a.charCodeAt(0),0)%200),h=l.length>0?Math.round(l.reduce((y,u)=>y+u,0)/l.length):680;return{groupScore:Math.round(h*.4+o*3+s%50),avgMemberScore:h,attendanceRate:Math.round(o),paymentRate:85+s%12,fieldAgentScore:70+s%25,riskLevel:h>=700&&o>=80?"Low":h>=600?"Medium":"High",factors:[{name:"Payment Compliance",score:85+s%12,weight:30},{name:"Attendance Rate",score:Math.round(o),weight:25},{name:"Member Credit Avg",score:Math.round((h-300)/5.5),weight:20},{name:"Field Agent Rating",score:70+s%25,weight:15},{name:"Group Tenure",score:60+s%35,weight:10}],fieldAgent:{name:"Budi Santoso",rating:(3.5+s%15/10).toFixed(1),groupsManaged:5+s%8,avgCollection:92+s%6}}};function sn({id:t}){const[i,n]=M(null),[r,s]=M([]),[o,l]=M([]),[h,y]=M(!0),[u,f]=M(!1),[a,d]=M({date:"",attendees:[],notes:""}),[g,S]=M(null),[C,p]=M(null),k=si(null);q(()=>{w()},[t]),q(()=>{if(h||r.length===0||typeof L>"u"||!document.getElementById("majelis-map"))return;const b=i?.meeting_lat||we.lat,F=i?.meeting_lng||we.lng;let E=C;E?E.setView([b,F],14):(E=L.map("majelis-map").setView([b,F],14),L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:"© CartoDB © OSM"}).addTo(E),p(E)),E.eachLayer(x=>{x._url||E.removeLayer(x)});const j=L.divIcon({className:"custom-marker",html:'<div style="width: 36px; height: 36px; background: #7C3AED; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; box-shadow: 0 2px 8px rgba(0,0,0,0.4); border: 3px solid white; font-size: 16px;">👥</div>',iconSize:[36,36],iconAnchor:[18,18]});L.marker([b,F],{icon:j}).addTo(E).bindPopup(`<b>Meeting Point</b><br/>${i?.location||"Lokasi Pertemuan"}`),r.forEach(x=>{if(x.homeCoords?.lat&&x.homeCoords?.lng){const I=L.divIcon({className:"custom-marker",html:'<div style="width: 28px; height: 28px; background: #1D4ED8; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; box-shadow: 0 2px 6px rgba(0,0,0,0.4); border: 3px solid white; font-size: 12px;">🏠</div>',iconSize:[28,28],iconAnchor:[14,14]});L.marker([x.homeCoords.lat,x.homeCoords.lng],{icon:I}).addTo(E).bindPopup(`<b>${x.name||"Member"}</b><br/>🏠 Rumah`)}if(x.bizCoords?.lat&&x.bizCoords?.lng){const I=L.divIcon({className:"custom-marker",html:'<div style="width: 26px; height: 26px; background: #059669; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; box-shadow: 0 2px 6px rgba(0,0,0,0.4); border: 3px solid white; font-size: 11px;">🏪</div>',iconSize:[26,26],iconAnchor:[13,13]});L.marker([x.bizCoords.lat,x.bizCoords.lng],{icon:I}).addTo(E).bindPopup(`<b>${x.name||"Member"}</b><br/>🏪 ${x.business_name||"Usaha"}`)}});const U=[[b,F],...r.flatMap(x=>[x.homeCoords?.lat?[x.homeCoords.lat,x.homeCoords.lng]:null,x.bizCoords?.lat?[x.bizCoords.lat,x.bizCoords.lng]:null].filter(Boolean))];return U.length>1&&E.fitBounds(U,{padding:[30,30]}),()=>{E&&!C&&E.remove()}},[h,r,i]);const w=async()=>{y(!0);try{const b=await(await fetch(`${N}/api/majelis/${t}`)).json();n(b);let F=[];if(b.members?.length>0){const U=await(await fetch(`${N}/api/users`)).json();F=b.members.map(x=>{const I=U.find(Q=>Q.phone===x)||{phone:x,name:x},H=I.home_lat?{lat:I.home_lat,lng:I.home_lng}:I.profile?.home_lat?{lat:I.profile.home_lat,lng:I.profile.home_lng}:ct(x,!0),T=I.business_lat?{lat:I.business_lat,lng:I.business_lng}:I.business?.business_lat?{lat:I.business.business_lat,lng:I.business.business_lng}:ct(x,!1);return{...I,homeCoords:H,bizCoords:T}}),s(F)}const E=b.attendance||v(b.members||[]);l(E),S(an(F,E,b))}catch(m){console.error(m)}y(!1)},v=m=>{const b=[],F=new Date;for(let E=4;E>=0;E--){const j=new Date(F);j.setDate(j.getDate()-E*7);const U=m.filter(()=>Math.random()>.2);b.push({id:`week_${E}`,date:j.toISOString().split("T")[0],attendees:U,total:m.length,notes:E===0?"Pertemuan terakhir berjalan lancar":""})}return b},A=m=>{d(b=>({...b,attendees:b.attendees.includes(m)?b.attendees.filter(F=>F!==m):[...b.attendees,m]}))},z=async()=>{if(!a.date)return alert("Pilih tanggal");const m={id:`week_${Date.now()}`,date:a.date,attendees:a.attendees,total:r.length,notes:a.notes};l(b=>[...b,m]),f(!1),d({date:"",attendees:[],notes:""})};if(h)return e("div",{style:"padding: 20px;",children:"Loading..."});if(!i)return e("div",{style:"padding: 20px;",children:"Majelis not found"});const _=m=>m==="Low"?"#10B981":m==="Medium"?"#F59E0B":"#EF4444",c=m=>{const b=o.filter(F=>F.attendees.includes(m)).length;return{attended:b,total:o.length,rate:o.length>0?Math.round(b/o.length*100):0}};return e("div",{style:"padding: 20px; max-width: 1400px; margin: 0 auto;",children:[e("a",{href:"/majelis",style:"display: inline-flex; align-items: center; gap: 4px; color: #666; text-decoration: none; margin-bottom: 16px;",children:[e(Fi,{size:20})," Kembali ke Daftar Majelis"]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: flex-start;",children:[e("div",{children:[e("h1",{style:"margin: 0 0 8px 0; display: flex; align-items: center; gap: 8px;",children:[e(J,{size:28})," ",i.name]}),e("p",{style:"color: #666; margin: 0;",children:i.description||"Tidak ada deskripsi"})]}),e("div",{style:"display: flex; gap: 8px; align-items: center;",children:[g&&e("span",{style:`padding: 6px 12px; background: ${_(g.riskLevel)}15; color: ${_(g.riskLevel)}; border-radius: 6px; font-size: 13px; font-weight: 600;`,children:[g.riskLevel," Risk"]}),i.is_mock&&e("span",{style:"padding: 4px 8px; background: #9e9e9e; color: white; border-radius: 4px; font-size: 12px;",children:"MOCK"})]})]}),e("div",{style:"display: flex; gap: 24px; margin-top: 16px; flex-wrap: wrap;",children:[e("div",{style:"display: flex; align-items: center; gap: 8px; color: #666;",children:[e(He,{size:18})," ",i.schedule_day||"-"]}),e("div",{style:"display: flex; align-items: center; gap: 8px; color: #666;",children:[e(Lt,{size:18})," ",i.schedule_time||"-"]}),e("div",{style:"display: flex; align-items: center; gap: 8px; color: #666;",children:[e(re,{size:18})," ",i.location||"-"]}),e("div",{style:"display: flex; align-items: center; gap: 8px; color: #666;",children:[e(J,{size:18})," ",r.length," anggota"]})]})]}),g&&e("div",{style:"margin-bottom: 24px;",children:[e("div",{style:"display: flex; align-items: center; gap: 12px; margin-bottom: 16px;",children:[e("div",{style:"width: 4px; height: 32px; background: linear-gradient(180deg, #63297A 0%, #F9CF79 100%); border-radius: 2px;"}),e("h2",{style:"margin: 0; font-size: 20px; color: #1F2937;",children:"Group Risk Assessment"}),e("span",{style:"background: #FEF3C7; color: #92400E; padding: 3px 10px; border-radius: 4px; font-size: 11px; font-weight: 600;",children:"MOCK DATA"})]}),e("div",{style:"display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 20px;",children:[e("div",{class:"card",style:"text-align: center; padding: 20px;",children:[e("div",{style:`font-size: 36px; font-weight: 800; color: ${_(g.riskLevel)};`,children:g.groupScore}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Group Score"})]}),e("div",{class:"card",style:"text-align: center; padding: 20px;",children:[e("div",{style:"font-size: 36px; font-weight: 800; color: #63297A;",children:g.avgMemberScore}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Avg Credit Score"})]}),e("div",{class:"card",style:"text-align: center; padding: 20px;",children:[e("div",{style:"font-size: 36px; font-weight: 800; color: #2563EB;",children:[g.attendanceRate,"%"]}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Attendance Rate"})]}),e("div",{class:"card",style:"text-align: center; padding: 20px;",children:[e("div",{style:"font-size: 36px; font-weight: 800; color: #10B981;",children:[g.paymentRate,"%"]}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Payment Rate"})]})]}),e("div",{class:"so-what-box",style:"margin-bottom: 20px;",children:[e("div",{class:"so-what-title",children:"💡 Group Assessment"}),e("div",{class:"so-what-text",children:g.riskLevel==="Low"?e($,{children:["This majelis demonstrates ",e("strong",{children:"strong group cohesion"})," with high attendance and payment compliance. The peer accountability model is working effectively — members support each other's financial success."]}):g.riskLevel==="Medium"?e($,{children:["Moderate group performance with ",e("strong",{children:"room for improvement"}),". Focus on increasing attendance rates and addressing any members with payment delays. Consider additional field agent engagement."]}):e($,{children:[e("strong",{children:"Attention required."})," This group shows elevated risk indicators. Recommend closer monitoring, individual member assessments, and potential restructuring of meeting schedules."]})})]}),e("div",{style:"display: grid; grid-template-columns: 1fr 1fr; gap: 20px;",children:[e("div",{class:"card",style:"padding: 20px;",children:[e("h3",{style:"margin: 0 0 16px; font-size: 15px; display: flex; align-items: center; gap: 8px;",children:[e(Ot,{size:18})," Risk Factors"]}),e("div",{style:"display: grid; gap: 12px;",children:g.factors.map((m,b)=>{const F=m.score>=80?"#10B981":m.score>=60?"#F59E0B":"#EF4444";return e("div",{children:[e("div",{style:"display: flex; justify-content: space-between; margin-bottom: 4px;",children:[e("span",{style:"font-size: 13px; color: #374151;",children:m.name}),e("span",{style:"font-size: 13px; font-weight: 600;",children:[m.score,"%"]})]}),e("div",{style:"height: 6px; background: #E5E7EB; border-radius: 3px; overflow: hidden;",children:e("div",{style:`height: 100%; width: ${m.score}%; background: ${F}; border-radius: 3px;`})})]},b)})})]}),e("div",{class:"card",style:"padding: 20px;",children:[e("h3",{style:"margin: 0 0 16px; font-size: 15px; display: flex; align-items: center; gap: 8px;",children:[e(Ci,{size:18})," Field Agent"]}),e("div",{style:"display: flex; gap: 16px; align-items: center; margin-bottom: 16px;",children:[e("div",{style:"width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #63297A 0%, #7E3D99 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: 700;",children:g.fieldAgent.name.charAt(0)}),e("div",{children:[e("div",{style:"font-size: 15px; font-weight: 600; color: #1F2937;",children:g.fieldAgent.name}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Field Agent"})]})]}),e("div",{style:"display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;",children:[e("div",{style:"text-align: center; padding: 10px; background: #F9FAFB; border-radius: 6px;",children:[e("div",{style:"font-size: 18px; font-weight: 700; color: #F59E0B;",children:["⭐ ",g.fieldAgent.rating]}),e("div",{style:"font-size: 10px; color: #6B7280;",children:"Rating"})]}),e("div",{style:"text-align: center; padding: 10px; background: #F9FAFB; border-radius: 6px;",children:[e("div",{style:"font-size: 18px; font-weight: 700; color: #63297A;",children:g.fieldAgent.groupsManaged}),e("div",{style:"font-size: 10px; color: #6B7280;",children:"Groups"})]}),e("div",{style:"text-align: center; padding: 10px; background: #F9FAFB; border-radius: 6px;",children:[e("div",{style:"font-size: 18px; font-weight: 700; color: #10B981;",children:[g.fieldAgent.avgCollection,"%"]}),e("div",{style:"font-size: 10px; color: #6B7280;",children:"Collection"})]})]})]})]})]}),e("div",{class:"card",style:"margin-bottom: 24px; padding: 20px;",children:[e("div",{style:"display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;",children:[e("h3",{style:"margin: 0; font-size: 15px; display: flex; align-items: center; gap: 8px;",children:[e(re,{size:18})," Member Locations"]}),e("div",{style:"display: flex; gap: 12px; font-size: 11px;",children:[e("span",{style:"display: flex; align-items: center; gap: 4px;",children:["🏠 ",e("span",{style:"color: #2563EB;",children:"Home"})]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:["🏪 ",e("span",{style:"color: #10B981;",children:"Business"})]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:["👥 ",e("span",{style:"color: #63297A;",children:"Meeting"})]})]})]}),e("div",{id:"majelis-map",ref:k,style:"height: 320px; border-radius: 12px; z-index: 1;"})]}),e("div",{class:"card",style:"margin-bottom: 20px; padding: 20px;",children:[e("div",{style:"display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;",children:[e("h3",{style:"margin: 0; font-size: 15px; display: flex; align-items: center; gap: 8px;",children:[e(J,{size:18})," Members & Attendance"]}),e("button",{onClick:()=>f(!0),style:"padding: 6px 12px; background: #63297A; color: white; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; font-size: 12px;",children:[e(Ut,{size:14})," Add Week"]})]}),r.length===0?e("p",{style:"color: #666;",children:"Belum ada anggota"}):e("div",{style:"overflow-x: auto;",children:e("table",{style:"width: 100%; border-collapse: collapse; font-size: 13px;",children:[e("thead",{children:e("tr",{style:"border-bottom: 2px solid #E5E7EB;",children:[e("th",{style:"text-align: left; padding: 8px 12px; font-weight: 600; color: #374151;",children:"Member"}),e("th",{style:"text-align: center; padding: 8px 6px; font-weight: 600; color: #374151; width: 70px;",children:"Rate"}),o.slice(-5).map((m,b)=>e("th",{style:"text-align: center; padding: 8px 4px; font-weight: 500; color: #6B7280; font-size: 11px; width: 50px;",children:new Date(m.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})},b))]})}),e("tbody",{children:r.map(m=>{const b=c(m.phone),F=b.rate>=80?"#10B981":b.rate>=60?"#F59E0B":"#EF4444";return e("tr",{style:"border-bottom: 1px solid #F3F4F6;",children:[e("td",{style:"padding: 10px 12px;",children:e("div",{style:"display: flex; align-items: center; gap: 10px;",children:[e("div",{style:"width: 32px; height: 32px; background: #63297A; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 12px; flex-shrink: 0;",children:m.name?.[0]||"?"}),e("div",{style:"min-width: 0;",children:[e("div",{style:"font-weight: 500; color: #1F2937; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;",children:m.name||"Unknown"}),e("div",{style:"font-size: 11px; color: #9CA3AF;",children:m.phone})]})]})}),e("td",{style:"text-align: center; padding: 8px 6px;",children:e("span",{style:`padding: 3px 8px; border-radius: 4px; font-size: 12px; font-weight: 600; background: ${F}15; color: ${F};`,children:[b.rate,"%"]})}),o.slice(-5).map((E,j)=>{const U=E.attendees.includes(m.phone);return e("td",{style:"text-align: center; padding: 8px 4px;",children:U?e(Qi,{size:16,style:"color: #10B981;"}):e(Xi,{size:16,style:"color: #EF4444;"})},j)})]},m.phone)})}),e("tfoot",{children:e("tr",{style:"background: #F9FAFB;",children:[e("td",{style:"padding: 10px 12px; font-weight: 600; color: #374151;",children:"Weekly Total"}),e("td",{style:"text-align: center; padding: 8px 6px; font-weight: 600; color: #63297A;",children:[g?.attendanceRate||0,"%"]}),o.slice(-5).map((m,b)=>{const F=m.total>0?Math.round(m.attendees.length/m.total*100):0,E=F>=80?"#10B981":F>=60?"#F59E0B":"#EF4444";return e("td",{style:"text-align: center; padding: 8px 4px;",children:e("span",{style:`font-size: 11px; font-weight: 600; color: ${E};`,children:[F,"%"]})},b)})]})})]})})]}),u&&e("div",{style:"position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;",children:e("div",{style:"background: white; padding: 24px; border-radius: 8px; width: 90%; max-width: 500px; max-height: 80vh; overflow-y: auto;",children:[e("h3",{style:"margin: 0 0 16px 0;",children:"Tambah Kehadiran Minggu Ini"}),e("div",{style:"margin-bottom: 16px;",children:[e("label",{style:"display: block; margin-bottom: 4px; font-weight: 500;",children:"Tanggal"}),e("input",{type:"date",value:a.date,onChange:m=>d(b=>({...b,date:m.target.value})),style:"width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"})]}),e("div",{style:"margin-bottom: 16px;",children:[e("label",{style:"display: block; margin-bottom: 8px; font-weight: 500;",children:["Kehadiran (",a.attendees.length,"/",r.length,")"]}),e("div",{style:"display: flex; flex-direction: column; gap: 8px;",children:r.map(m=>e("label",{style:"display: flex; align-items: center; gap: 8px; padding: 8px; background: newWeek.attendees.includes(m.phone) ? '#e8f5e9' : '#f5f5f5'; border-radius: 4px; cursor: pointer;",children:[e("input",{type:"checkbox",checked:a.attendees.includes(m.phone),onChange:()=>A(m.phone)}),e("span",{children:m.name||m.phone})]},m.phone))})]}),e("div",{style:"margin-bottom: 16px;",children:[e("label",{style:"display: block; margin-bottom: 4px; font-weight: 500;",children:"Catatan"}),e("textarea",{value:a.notes,onChange:m=>d(b=>({...b,notes:m.target.value})),placeholder:"Catatan pertemuan minggu ini...",style:"width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; min-height: 80px;"})]}),e("div",{style:"display: flex; gap: 8px; justify-content: flex-end;",children:[e("button",{onClick:()=>f(!1),style:"padding: 8px 16px; background: #f5f5f5; border: none; border-radius: 4px; cursor: pointer;",children:"Batal"}),e("button",{onClick:z,style:"padding: 8px 16px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 4px;",children:[e(qi,{size:16})," Simpan"]})]})]})})]})}const on={"warung sembako":"🏪",kelontong:"🏪","warung makan":"🍽️",coffee:"☕",jajanan:"🍪",camilan:"🍪",minuman:"🧋",fashion:"👗",hijab:"👗",elektronik:"📱",gadget:"📱","pet shop":"🐾","bahan bangunan":"🧱",mainan:"🎮",hobi:"🎮",laundry:"👕","bengkel motor":"🏍️",kecantikan:"💇",salon:"💇",penjahit:"✂️",permak:"✂️","kos-kosan":"🏠",penginapan:"🏠",logistik:"📦",ekspedisi:"📦","sewa kendaraan":"🚗","cuci steam":"🚿",detailing:"🚿",apotek:"💊",obat:"💊",event:"🎉",wedding:"🎉","bengkel las":"🔧",bubut:"🔧",kontraktor:"🏗️",renovasi:"🏗️",kriya:"🎨",kerajinan:"🎨",petani:"🌱",holtikultura:"🌱",nelayan:"🐟",ikan:"🐟"};function pt(t){const i=t.toLowerCase();for(const[n,r]of Object.entries(on))if(i.includes(n))return r;return"🏢"}function ln(){const[t,i]=M([]),[n,r]=M(null),[s,o]=M(!0),[l,h]=M(!1);q(()=>{y()},[]);const y=async(f=!1)=>{const a="businessTypes";try{if(!f){const p=localStorage.getItem(a);if(p){const{data:k,timestamp:w}=JSON.parse(p);if(Date.now()-w<864e5){i(k),k.length>0&&r(k[0]),o(!1);return}}}const C=(await(await fetch(`${N}/api/knowledge/business-classifications`)).json()).sort((p,k)=>(p.category_number||999)-(k.category_number||999));localStorage.setItem(a,JSON.stringify({data:C,timestamp:Date.now()})),i(C),C.length>0&&r(C[0])}catch(g){console.error("Failed to fetch business types",g)}finally{o(!1),h(!1)}},u=()=>{h(!0),y(!0)};return s?e("div",{class:"loading",children:"Loading business types..."}):e("div",{style:{display:"flex",gap:"16px",height:"calc(100vh - 140px)",minHeight:"500px"},children:[e("div",{style:{width:"280px",background:"#fff",borderRadius:"8px",display:"flex",flexDirection:"column",border:"1px solid #dee2e6",flexShrink:0},children:[e("div",{style:{padding:"12px 16px",borderBottom:"1px solid #dee2e6",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("h3",{style:{margin:0,fontSize:"14px",display:"flex",alignItems:"center",gap:"6px"},children:[e(Rt,{size:16})," 25 Kategori UMKM"]}),e("button",{onClick:u,disabled:l,style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:e(Ke,{size:14,class:l?"spin":""})})]}),e("div",{style:{flex:1,overflowY:"auto"},children:t.map(f=>{const a=n?.category_id===f.category_id;return e("div",{onClick:()=>r(f),style:{padding:"10px 16px",cursor:"pointer",borderLeft:a?"3px solid #0d6efd":"3px solid transparent",background:a?"#e7f1ff":"transparent",display:"flex",alignItems:"center",gap:"10px"},children:[e("span",{style:{fontSize:"20px"},children:pt(f.business_type)}),e("div",{style:{flex:1,minWidth:0},children:[e("div",{style:{fontSize:"10px",color:"#6c757d"},children:["Kategori ",f.category_number]}),e("div",{style:{fontSize:"12px",fontWeight:500,color:a?"#0d6efd":"#212529",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:f.business_type})]}),a&&e(Ii,{size:14,color:"#0d6efd"})]},f.category_id)})})]}),e("div",{style:{flex:1,background:"#fff",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",border:"1px solid #dee2e6"},children:n?e($,{children:[e("div",{style:{padding:"16px",borderBottom:"1px solid #dee2e6",background:"#f8f9fa"},children:e("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("span",{style:{fontSize:"32px"},children:pt(n.business_type)}),e("div",{children:[e("div",{style:{fontSize:"11px",color:"#6c757d"},children:["Kategori ",n.category_number]}),e("h2",{style:{margin:0,fontSize:"18px"},children:n.business_type}),n.business_character&&e("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:n.business_character})]})]})}),e("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:(n.maturity_levels||[]).sort((f,a)=>f.level-a.level).map((f,a)=>e("div",{style:{marginBottom:"20px",border:"1px solid #dee2e6",borderRadius:"8px",overflow:"hidden"},children:[e("div",{style:{padding:"12px 16px",background:"#f8f9fa",borderBottom:"1px solid #dee2e6",display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"#0d6efd",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"14px"},children:f.level}),e("div",{children:[e("div",{style:{fontWeight:600,fontSize:"14px",color:"#212529"},children:["Level ",f.level]}),f.goal&&e("div",{style:{fontSize:"11px",color:"#6c757d"},children:f.goal})]})]}),e("div",{style:{padding:"12px 16px"},children:[f.character?.length>0&&e("div",{style:{marginBottom:"12px"},children:[e("div",{style:{fontSize:"11px",fontWeight:600,color:"#6c757d",marginBottom:"6px",textTransform:"uppercase"},children:"Karakteristik"}),f.character.map((d,g)=>e("div",{style:{fontSize:"12px",color:"#495057",padding:"2px 0"},children:["• ",d]},g))]}),(f.swot?.strengths?.length>0||f.swot?.weaknesses?.length>0)&&e("div",{style:{marginBottom:"12px"},children:[e("div",{style:{fontSize:"11px",fontWeight:600,color:"#6c757d",marginBottom:"6px",textTransform:"uppercase"},children:"SWOT"}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px"},children:[f.swot?.strengths?.length>0&&e("div",{style:{background:"#d1e7dd",padding:"8px",borderRadius:"4px",fontSize:"11px"},children:[e("strong",{style:{color:"#0f5132"},children:"S:"})," ",f.swot.strengths[0]]}),f.swot?.weaknesses?.length>0&&e("div",{style:{background:"#f8d7da",padding:"8px",borderRadius:"4px",fontSize:"11px"},children:[e("strong",{style:{color:"#842029"},children:"W:"})," ",f.swot.weaknesses[0]]}),f.swot?.opportunities?.length>0&&e("div",{style:{background:"#cff4fc",padding:"8px",borderRadius:"4px",fontSize:"11px"},children:[e("strong",{style:{color:"#055160"},children:"O:"})," ",f.swot.opportunities[0]]}),f.swot?.threats?.length>0&&e("div",{style:{background:"#fff3cd",padding:"8px",borderRadius:"4px",fontSize:"11px"},children:[e("strong",{style:{color:"#664d03"},children:"T:"})," ",f.swot.threats[0]]})]})]}),f.roadmap?.kpis?.length>0&&f.level<5&&e("div",{style:{background:"#e7f1ff",borderRadius:"6px",padding:"10px",border:"1px solid #b6d4fe"},children:[e("div",{style:{fontSize:"11px",fontWeight:600,color:"#084298",marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e(Ge,{size:12})," KPI Naik ke Level ",f.level+1]}),f.roadmap.description&&e("div",{style:{fontSize:"11px",color:"#084298",marginBottom:"6px",fontStyle:"italic"},children:["Tujuan: ",f.roadmap.description]}),f.roadmap.kpis.map((d,g)=>e("div",{style:{fontSize:"11px",color:"#0a58ca",padding:"3px 0",display:"flex"},children:[e("span",{style:{minWidth:"18px",fontWeight:600},children:[g+1,"."]}),e("span",{children:d})]},g))]}),f.level===5&&e("div",{style:{background:"#d1e7dd",borderRadius:"6px",padding:"10px",textAlign:"center"},children:[e("span",{style:{fontSize:"16px"},children:"🏆"}),e("span",{style:{fontSize:"12px",fontWeight:600,color:"#0f5132",marginLeft:"6px"},children:"Level Maksimal - Korporasi"})]})]})]},f.level))})]}):e("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#6c757d"},children:"Select a business category"})})]})}function dn(){const[t,i]=M(null),[n,r]=M([]),[s,o]=M(!0);q(()=>{l()},[]);const l=async(a=!1)=>{const d="financialLiteracy";try{if(!a){const k=localStorage.getItem(d);if(k){const{data:w,timestamp:v}=JSON.parse(k);if(Date.now()-v<864e5){r(w),w.length>0&&i(w[0]),o(!1);return}}}const p=(await(await fetch(`${N}/api/knowledge/financial-literacy`)).json()).filter(k=>k.week_number&&k.bank_soal&&k.bank_soal.length>0).sort((k,w)=>k.week_number-w.week_number);localStorage.setItem(d,JSON.stringify({data:p,timestamp:Date.now()})),r(p),p.length>0&&i(p[0])}catch(S){console.error("Failed to fetch course:",S)}finally{o(!1)}},h=async()=>{localStorage.removeItem("financialLiteracy"),o(!0),await l(!0)},y=a=>!a||typeof a!="string"?a:a.replace(/\[Sapaan\]/gi,"Anda"),u=a=>({1:"Fondasi Keuangan",2:"Arus Kas",3:"Perencanaan",4:"Digital & Keamanan"})[a]||`Module ${a}`;if(s)return e("div",{class:"loading",children:"Loading..."});const f=n.reduce((a,d)=>{const g=d.module_number||0;return a[g]||(a[g]=[]),a[g].push(d),a},{});return e("div",{style:{display:"flex",gap:"20px",height:"calc(100vh - 100px)"},children:[e("div",{style:{width:"280px",flexShrink:0,background:"#fff",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",border:"1px solid #dee2e6"},children:[e("div",{style:{padding:"16px",borderBottom:"1px solid #dee2e6",background:"#f8f9fa",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("h2",{style:{margin:0,fontSize:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e(pe,{size:18})," 15 Weeks"]}),e("button",{onClick:h,title:"Refresh from database",style:{padding:"6px 10px",background:"#fff",border:"1px solid #dee2e6",borderRadius:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[e(Ke,{size:14})," Refresh"]})]}),e("div",{style:{flex:1,overflowY:"auto"},children:Object.keys(f).sort((a,d)=>a-d).map(a=>e("div",{children:[e("div",{style:{padding:"8px 16px",background:"#e9ecef",fontSize:"11px",fontWeight:600,color:"#6c757d",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Modul ",a,": ",u(parseInt(a))]}),f[a].map(d=>{const g=t?.week_number===d.week_number,S=(d.module_name||`Week ${d.week_number}`).replace(/^Modul\s+\d+\s*-\s*/i,"").replace(/^Minggu\s+\d+:\s*/i,"");return e("div",{onClick:()=>i(d),style:{padding:"12px 16px",cursor:"pointer",borderLeft:g?"3px solid #0d6efd":"3px solid transparent",background:g?"#e7f1ff":"transparent",transition:"background 0.15s"},children:[e("div",{style:{fontSize:"10px",color:"#6c757d",marginBottom:"2px"},children:["Week ",d.week_number]}),e("div",{style:{fontSize:"13px",fontWeight:500,color:g?"#0d6efd":"#212529"},children:S}),e("div",{style:{fontSize:"11px",color:"#6c757d",marginTop:"2px"},children:[d.bank_soal?.length||0," questions"]})]},d.week_number)})]},a))})]}),e("div",{style:{flex:1,background:"#fff",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",border:"1px solid #dee2e6"},children:t?e($,{children:[e("div",{style:{padding:"16px",borderBottom:"1px solid #dee2e6",background:"#f8f9fa"},children:[e("div",{style:{fontSize:"11px",color:"#6c757d",marginBottom:"4px"},children:["Week ",t.week_number," • Module ",t.module_number]}),e("h2",{style:{margin:0,fontSize:"18px"},children:(t.module_name||"").replace(/^Modul\s+\d+\s*-\s*/i,"").replace(/^Minggu\s+\d+:\s*/i,"")})]}),e("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:[e("h3",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px",color:"#212529"},children:[e(Nt,{size:16})," Bank Soal (",t.bank_soal?.length||0,")"]}),e("div",{style:{border:"1px solid #dee2e6",borderRadius:"6px",overflow:"hidden"},children:(t.bank_soal||[]).map((a,d)=>e("div",{style:{borderBottom:d<t.bank_soal.length-1?"1px solid #e9ecef":"none",background:d%2===0?"#fff":"#f8f9fa"},children:e("div",{style:{padding:"12px 14px"},children:[e("div",{style:{fontWeight:600,fontSize:"13px",color:"#212529",marginBottom:"8px"},children:[e("span",{style:{color:"#6c757d",marginRight:"8px"},children:[d+1,"."]}),y(a.question)]}),e("div",{style:{paddingLeft:"20px"},children:[(a.options||[]).map((g,S)=>{const C=S===a.correct;return e("div",{style:{padding:"6px 10px",marginBottom:"4px",background:C?"#d1e7dd":"#fff",border:`1px solid ${C?"#198754":"#dee2e6"}`,borderRadius:"4px",fontSize:"12px",color:C?"#0f5132":"#495057",display:"flex",alignItems:"center"},children:[e("strong",{style:{minWidth:"20px"},children:[String.fromCharCode(97+S),"."]}),e("span",{style:{flex:1},children:y(g)}),C&&e("span",{style:{color:"#198754"},children:"✓"})]},S)}),a.explanation&&e("div",{style:{marginTop:"8px",padding:"8px 10px",background:"#fff3cd",borderLeft:"3px solid #ffc107",fontSize:"12px",color:"#664d03",display:"flex",gap:"6px"},children:[e(Oe,{size:14,style:{flexShrink:0,marginTop:"1px"}}),e("span",{children:y(a.explanation)})]})]})]})},d))}),t.indikator_kelulusan?.length>0&&e("div",{style:{marginTop:"20px"},children:[e("h3",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px",color:"#212529"},children:[e(Ue,{size:16})," Indikator Kelulusan"]}),e("div",{style:{border:"1px solid #dee2e6",borderRadius:"6px",padding:"12px 14px",background:"#f8f9fa"},children:t.indikator_kelulusan.map((a,d)=>e("div",{style:{padding:"4px 0",fontSize:"13px",color:"#495057",display:"flex"},children:[e("span",{style:{minWidth:"20px",color:"#198754",fontWeight:600},children:[d+1,"."]}),e("span",{children:a})]},d))})]}),t.source_doc_id&&e("div",{style:{marginTop:"20px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #dee2e6"},children:e("a",{href:`https://docs.google.com/document/d/${t.source_doc_id}`,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"6px",color:"#0d6efd",fontSize:"13px",textDecoration:"none"},children:[e(Li,{size:14})," View source document in Google Drive"]})})]})]}):e("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"#6c757d"},children:"Select a week to view questions"})})]})}const ht={lat:-6.235,lng:106.8},gt={A:{label:"Auto-Approve",color:"#10B981",bg:"#D1FAE5",desc:"Excellent creditworthiness"},B:{label:"Approve (Conditions)",color:"#3B82F6",bg:"#DBEAFE",desc:"Good with minor conditions"},C:{label:"Approve (Coaching)",color:"#F59E0B",bg:"#FEF3C7",desc:"Needs coaching support"},D:{label:"Not Ready",color:"#EF4444",bg:"#FEE2E2",desc:"Build creditworthiness first"}},O=t=>t?`Rp ${t.toLocaleString("id-ID")}`:"-",ut=t=>t?new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-",cn=t=>{const i=[],n=t.a_score?.components||{};return t.capacity||i.push({action:"Hitung Kapasitas",impact:"+20 pts",desc:'Ketik "kapasitas" di WhatsApp',priority:1}),(n.literacy||0)<70&&i.push({action:"Selesaikan Quiz",impact:"+15 pts",desc:'Ketik "quiz" untuk belajar keuangan',priority:2}),t.majelis_id||i.push({action:"Gabung Majelis",impact:"+10 pts",desc:"Hubungi petugas lapangan",priority:3}),(t.engagement?.total_interactions||0)<20&&i.push({action:"Aktif di WhatsApp",impact:"+5 pts",desc:"Tanya tips bisnis setiap hari",priority:4}),i.sort((r,s)=>r.priority-s.priority).slice(0,3)};function pn({phone:t}){const[i,n]=M(null),[r,s]=M(!0),[o,l]=M(null),[h,y]=M(null),[u,f]=M("all");if(q(()=>{fetch(`${N}/api/users/${t}/complete`).then(v=>v.ok?v.json():Promise.reject("User not found")).then(n).catch(l).finally(()=>s(!1))},[t]),q(()=>{if(r||!i||typeof L>"u"||!document.getElementById("user-location-map"))return;const A=(t||"").split("").reduce((j,U)=>j+U.charCodeAt(0),0),z=i.profile?.home_lat||i.home_lat||ht.lat+(A%100-50)*.015/50,_=i.profile?.home_lng||i.home_lng||ht.lng+(A*7%100-50)*.015/50,c=i.business?.business_lat||i.business_lat||z+(A%30-15)*.002,m=i.business?.business_lng||i.business_lng||_+(A*3%30-15)*.002;let b=h;b||(b=L.map("user-location-map").setView([z,_],14),L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:"© CartoDB © OSM"}).addTo(b),y(b)),b.eachLayer(j=>{j._url||b.removeLayer(j)});const F=L.divIcon({className:"custom-marker",html:'<div style="width: 32px; height: 32px; background: #1D4ED8; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; box-shadow: 0 2px 8px rgba(0,0,0,0.4); border: 3px solid white; font-size: 14px;">🏠</div>',iconSize:[32,32],iconAnchor:[16,16]});L.marker([z,_],{icon:F}).addTo(b).bindPopup(`<b>${i.name}</b><br/>🏠 Rumah`);const E=L.divIcon({className:"custom-marker",html:'<div style="width: 32px; height: 32px; background: #059669; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; box-shadow: 0 2px 8px rgba(0,0,0,0.4); border: 3px solid white; font-size: 14px;">🏪</div>',iconSize:[32,32],iconAnchor:[16,16]});L.marker([c,m],{icon:E}).addTo(b).bindPopup(`<b>${i.business?.name||"Usaha"}</b><br/>🏪 Lokasi Usaha`),b.fitBounds([[z,_],[c,m]],{padding:[50,50]})},[r,i]),r)return e("div",{class:"card",style:"text-align: center; padding: 60px;",children:"Loading..."});if(o)return e("div",{class:"card",style:"text-align: center; padding: 60px; color: #EF4444;",children:o});if(!i)return null;const a=i.a_score||{score:0,zone:"D",components:{}},d=gt[a.zone]||gt.D,g=i.rpc||{},S=i.engagement||{},C=cn(i),p=i.literacy||{};let k=0;for(let v=1;v<=15;v++){const A=`week_${String(v).padStart(2,"0")}`;if(p[A]?.score>=100)k=v;else break}const w=Math.round(k/15*100);return e("div",{children:[e("button",{onClick:()=>window.history.back(),class:"btn btn-secondary",style:"margin-bottom: 20px;",children:[e(Si,{size:18})," Kembali"]}),e("div",{class:"card",style:"margin-bottom: 24px; padding: 0; overflow: hidden; background: linear-gradient(135deg, #1F2937 0%, #374151 100%);",children:[e("div",{style:"padding: 32px;",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 24px;",children:[e("div",{style:"display: flex; gap: 16px; align-items: center;",children:[e("div",{style:"width: 64px; height: 64px; border-radius: 16px; background: rgba(255,255,255,0.15); display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; font-weight: 700;",children:i.name?.charAt(0)?.toUpperCase()}),e("div",{style:"color: white;",children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.7;",children:"Perjalanan Kelayakan Kredit"}),e("h1",{style:"margin: 4px 0; font-size: 24px; font-weight: 700;",children:i.name}),e("div",{style:"font-size: 13px; opacity: 0.8;",children:[i.business?.name," • ",i.business?.location]})]})]}),e("div",{style:`padding: 8px 16px; border-radius: 8px; background: ${d.bg}; color: ${d.color}; font-weight: 700; font-size: 12px;`,children:i.status==="active"?"TERVERIFIKASI":"MENUNGGU"})]}),e("div",{style:"display: grid; grid-template-columns: 200px 1fr; gap: 32px; align-items: center;",children:[e("div",{style:"text-align: center;",children:[e("div",{style:"position: relative; width: 160px; height: 160px; margin: 0 auto;",children:[e("svg",{viewBox:"0 0 160 160",style:"transform: rotate(-90deg);",children:[e("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"rgba(255,255,255,0.2)","stroke-width":"12"}),e("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:d.color,"stroke-width":"12","stroke-dasharray":`${(a.score||0)*4.4} 440`,"stroke-linecap":"round"})]}),e("div",{style:"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white;",children:[e("div",{style:"font-size: 48px; font-weight: 800; line-height: 1;",children:a.score||"--"}),e("div",{style:"font-size: 12px; opacity: 0.7;",children:"A-Score"})]})]}),e("div",{style:`margin-top: 12px; padding: 8px 20px; border-radius: 8px; display: inline-block; background: ${d.color}; color: white; font-weight: 700; font-size: 13px;`,children:["Zone ",a.zone,": ",d.label]})]}),e("div",{children:[e("div",{style:"font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: rgba(255,255,255,0.6); margin-bottom: 16px;",children:"Komponen Skor (dari interaksi WhatsApp)"}),e("div",{style:"display: grid; gap: 12px;",children:[{key:"character",label:"Karakter (CRBI)",icon:Ot,weight:"25%"},{key:"capacity",label:"Kapasitas Bayar",icon:ae,weight:"30%"},{key:"literacy",label:"Literasi Keuangan",icon:pe,weight:"25%"},{key:"engagement",label:"Engagement WhatsApp",icon:Be,weight:"20%"}].map(({key:v,label:A,icon:z,weight:_})=>{const c=a.components?.[v]||0,m=c>=70?"#10B981":c>=40?"#F59E0B":"#EF4444";return e("div",{style:"display: flex; align-items: center; gap: 12px;",children:[e(z,{size:18,style:"color: rgba(255,255,255,0.6);"}),e("div",{style:"flex: 1;",children:[e("div",{style:"display: flex; justify-content: space-between; margin-bottom: 4px;",children:[e("span",{style:"font-size: 13px; color: white;",children:A}),e("span",{style:"font-size: 13px; font-weight: 700; color: white;",children:[c,"/100"]})]}),e("div",{style:"height: 6px; background: rgba(255,255,255,0.2); border-radius: 3px; overflow: hidden;",children:e("div",{style:`height: 100%; width: ${c}%; background: ${m}; border-radius: 3px; transition: width 0.5s;`})})]}),e("span",{style:"font-size: 11px; color: rgba(255,255,255,0.5); width: 35px;",children:_})]},v)})})]})]})]}),e("div",{style:"padding: 16px 32px; background: rgba(255,255,255,0.05); border-top: 1px solid rgba(255,255,255,0.1);",children:e("div",{style:"display: flex; align-items: center; gap: 12px; color: white;",children:[e(Kt,{size:20,style:"color: #F9CF79;"}),e("span",{style:"font-size: 14px;",children:a.zone==="A"?"Kelayakan kredit sangat baik! Siap untuk pinjaman.":a.zone==="B"?"Kelayakan baik. Tingkatkan literasi untuk limit lebih tinggi.":a.zone==="C"?"Perlu pendampingan. Selesaikan saran di bawah untuk naik level.":"Mulai perjalanan dengan menghitung kapasitas bayar via WhatsApp."})]})})]}),C.length>0&&e("div",{class:"card",style:"margin-bottom: 24px; padding: 0; overflow: hidden; border: 2px solid #F9CF79;",children:[e("div",{style:"padding: 16px 24px; background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%); display: flex; align-items: center; gap: 12px;",children:[e(ze,{size:24,style:"color: #92400E;"}),e("div",{children:[e("div",{style:"font-size: 16px; font-weight: 700; color: #92400E;",children:"Langkah Selanjutnya untuk Naik Level"}),e("div",{style:"font-size: 12px; color: #A16207;",children:"Selesaikan untuk meningkatkan A-Score"})]})]}),e("div",{style:"padding: 20px 24px; display: grid; gap: 12px;",children:C.map((v,A)=>e("div",{style:"display: flex; align-items: center; gap: 16px; padding: 16px; background: #F9FAFB; border-radius: 12px; border: 1px solid #E5E7EB;",children:[e("div",{style:"width: 40px; height: 40px; border-radius: 50%; background: #63297A; color: white; display: flex; align-items: center; justify-content: center; font-weight: 700;",children:A+1}),e("div",{style:"flex: 1;",children:[e("div",{style:"font-size: 15px; font-weight: 600; color: #1F2937;",children:v.action}),e("div",{style:"font-size: 13px; color: #6B7280;",children:v.desc})]}),e("div",{style:"padding: 6px 12px; background: #D1FAE5; color: #065F46; border-radius: 6px; font-size: 13px; font-weight: 700;",children:v.impact})]},A))})]}),e("div",{style:"display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;",children:[e("div",{class:"card",style:"padding: 0; overflow: hidden;",children:[e("div",{style:"padding: 16px 20px; border-bottom: 1px solid #E5E7EB; display: flex; align-items: center; gap: 10px;",children:[e(ae,{size:20,style:"color: #63297A;"}),e("span",{style:"font-size: 15px; font-weight: 600;",children:"Kapasitas Bayar (RPC)"})]}),i.capacity?e("div",{style:"padding: 20px;",children:[e("div",{style:"text-align: center; margin-bottom: 20px;",children:[e("div",{style:"font-size: 12px; color: #6B7280; margin-bottom: 4px;",children:"Kemampuan Cicilan Maksimal"}),e("div",{style:"font-size: 32px; font-weight: 800; color: #10B981;",children:O(g.max_installment)}),e("div",{style:"font-size: 13px; color: #6B7280;",children:"per bulan"})]}),e("div",{style:"display: grid; grid-template-columns: 1fr 1fr; gap: 12px; font-size: 13px;",children:[e("div",{style:"padding: 12px; background: #F0FDF4; border-radius: 8px;",children:[e("div",{style:"color: #6B7280;",children:"Pendapatan"}),e("div",{style:"font-weight: 700; color: #065F46;",children:[O(g.monthly_income),"/bln"]})]}),e("div",{style:"padding: 12px; background: #FEF2F2; border-radius: 8px;",children:[e("div",{style:"color: #6B7280;",children:"Pengeluaran"}),e("div",{style:"font-weight: 700; color: #991B1B;",children:[O(g.monthly_expenses),"/bln"]})]})]}),e("div",{style:"margin-top: 12px; padding: 12px; background: #F3F4F6; border-radius: 8px; text-align: center;",children:[e("div",{style:"font-size: 12px; color: #6B7280;",children:"Sisa Bersih Bulanan"}),e("div",{style:"font-size: 18px; font-weight: 700; color: #1F2937;",children:O(g.sustainable_disposable_cash)})]})]}):e("div",{style:"padding: 40px; text-align: center; color: #6B7280;",children:[e(ae,{size:32,style:"color: #D1D5DB; margin-bottom: 8px;"}),e("div",{children:"Belum ada data kapasitas"}),e("div",{style:"font-size: 12px; color: #9CA3AF; margin-top: 4px;",children:'Ketik "kapasitas" di WhatsApp'})]})]}),e("div",{class:"card",style:"padding: 0; overflow: hidden;",children:[e("div",{style:"padding: 16px 20px; border-bottom: 1px solid #E5E7EB; display: flex; align-items: center; gap: 10px;",children:[e(Be,{size:20,style:"color: #2563EB;"}),e("span",{style:"font-size: 15px; font-weight: 600;",children:"Engagement WhatsApp"})]}),S.total_interactions?e("div",{style:"padding: 20px;",children:[e("div",{style:"display: grid; grid-template-columns: 1fr 1fr; gap: 16px; text-align: center; margin-bottom: 16px;",children:[e("div",{children:[e("div",{style:"font-size: 32px; font-weight: 800; color: #2563EB;",children:S.total_interactions}),e("div",{style:"font-size: 11px; color: #6B7280;",children:"Total Interaksi"})]}),e("div",{children:[e("div",{style:"font-size: 32px; font-weight: 800; color: #F59E0B;",children:["🔥 ",S.streak_days||0]}),e("div",{style:"font-size: 11px; color: #6B7280;",children:"Hari Berturut"})]})]}),S.daily_history?.length>0&&e("div",{style:"border-top: 1px solid #E5E7EB; padding-top: 16px;",children:[e("div",{style:"font-size: 11px; text-transform: uppercase; color: #6B7280; margin-bottom: 10px;",children:"Riwayat 5 Hari Terakhir"}),e("div",{style:"display: flex; flex-direction: column; gap: 10px; max-height: 200px; overflow-y: auto;",children:S.daily_history.map((v,A)=>e("div",{style:"padding: 10px; background: #F9FAFB; border-radius: 8px; border-left: 3px solid #2563EB;",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;",children:[e("span",{style:"font-size: 12px; font-weight: 600; color: #374151;",children:new Date(v.date).toLocaleDateString("id-ID",{weekday:"short",day:"numeric",month:"short"})}),e("span",{style:"font-size: 10px; color: #6B7280; background: #E5E7EB; padding: 2px 6px; border-radius: 4px;",children:[v.total_actions," aksi"]})]}),e("div",{style:"font-size: 11px; color: #4B5563; margin-bottom: 6px; font-style: italic;",children:["💡 ",v.ai_summary]}),e("div",{style:"display: flex; flex-wrap: wrap; gap: 4px;",children:Object.entries(v.activities||{}).map(([z,_])=>e("span",{style:"padding: 2px 6px; background: #DBEAFE; color: #1E40AF; border-radius: 4px; font-size: 9px;",children:[z,": ",_]},z))})]},A))})]})]}):e("div",{style:"padding: 40px; text-align: center; color: #6B7280;",children:[e(Be,{size:32,style:"color: #D1D5DB; margin-bottom: 8px;"}),e("div",{children:"Belum ada interaksi"}),e("div",{style:"font-size: 12px; color: #9CA3AF; margin-top: 4px;",children:"Mulai chat di WhatsApp"})]})]})]}),e("div",{class:"card",style:"margin-bottom: 24px; padding: 0; overflow: hidden;",children:[e("div",{style:"padding: 16px 20px; border-bottom: 1px solid #E5E7EB; display: flex; justify-content: space-between; align-items: center;",children:[e("div",{style:"display: flex; align-items: center; gap: 10px;",children:[e(pe,{size:20,style:"color: #10B981;"}),e("span",{style:"font-size: 15px; font-weight: 600;",children:"Literasi Keuangan"})]}),e("span",{style:`font-size: 14px; font-weight: 700; color: ${w>=70?"#10B981":w>=40?"#F59E0B":"#EF4444"};`,children:[k,"/15 minggu (",w,"%)"]})]}),e("div",{style:"padding: 20px;",children:[e("div",{style:"display: grid; grid-template-columns: repeat(15, 1fr); gap: 6px; margin-bottom: 16px;",children:Array.from({length:15},(v,A)=>{const z=A+1,_=`week_${String(z).padStart(2,"0")}`,c=p[_]?.score||0,m=z<=k,b=z===k+1&&c>0;return e("div",{style:`aspect-ratio: 1; border-radius: 6px; background: ${m?"#10B981":b?"#F59E0B":"#E5E7EB"}; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; color: ${m||b?"white":"#9CA3AF"};`,children:z},A)})}),e("div",{style:"display: flex; gap: 16px; font-size: 11px; color: #6B7280;",children:[e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 12px; height: 12px; border-radius: 3px; background: #10B981;"})," Lulus"]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 12px; height: 12px; border-radius: 3px; background: #F59E0B;"})," Proses"]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 12px; height: 12px; border-radius: 3px; background: #E5E7EB;"})," Belum"]})]})]})]}),e("div",{style:"display: grid; grid-template-columns: 1fr 1fr; gap: 24px;",children:[e("div",{class:"card",style:"padding: 20px;",children:[e("div",{style:"display: flex; align-items: center; gap: 10px; margin-bottom: 16px;",children:[e(ae,{size:18,style:"color: #63297A;"}),e("span",{style:"font-size: 14px; font-weight: 600;",children:"Pinjaman"})]}),i.loan?.limit>0?e("div",{children:[e("div",{style:"display: grid; gap: 8px; font-size: 13px; margin-bottom: 12px;",children:[e("div",{style:"display: flex; justify-content: space-between;",children:[e("span",{style:"color: #6B7280;",children:"Limit"}),e("span",{style:"font-weight: 600;",children:O(i.loan.limit)})]}),e("div",{style:"display: flex; justify-content: space-between;",children:[e("span",{style:"color: #6B7280;",children:"Terpakai"}),e("span",{style:"font-weight: 600; color: #EF4444;",children:O(i.loan.used)})]}),e("div",{style:"display: flex; justify-content: space-between;",children:[e("span",{style:"color: #6B7280;",children:"Sisa"}),e("span",{style:"font-weight: 600; color: #10B981;",children:O(i.loan.remaining)})]})]}),i.loan.history?.length>0&&e("div",{style:"border-top: 1px solid #E5E7EB; padding-top: 12px;",children:[e("div",{style:"font-size: 11px; color: #6B7280; margin-bottom: 8px;",children:"Riwayat Transaksi"}),e("div",{style:"max-height: 120px; overflow-y: auto; display: flex; flex-direction: column; gap: 6px;",children:i.loan.history.slice(-5).reverse().map((v,A)=>e("div",{style:"display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; background: #F9FAFB; border-radius: 4px; font-size: 11px;",children:[e("div",{children:[e("span",{style:`color: ${v.type==="disbursement"?"#2563EB":"#10B981"};`,children:v.type==="disbursement"?"📥 Pencairan":"💰 Bayar"}),e("span",{style:"color: #9CA3AF; margin-left: 6px;",children:ut(v.date)})]}),e("span",{style:`font-weight: 600; color: ${v.type==="disbursement"?"#2563EB":"#10B981"};`,children:[v.type==="disbursement"?"+":"-",O(Math.abs(v.amount))]})]},A))})]})]}):e("div",{style:"color: #9CA3AF; font-size: 13px;",children:"Belum ada pinjaman aktif"})]}),e("div",{class:"card",style:"padding: 20px;",children:[e("div",{style:"display: flex; align-items: center; gap: 10px; margin-bottom: 16px;",children:[e(Bi,{size:18,style:"color: #2563EB;"}),e("span",{style:"font-size: 14px; font-weight: 600;",children:"Usaha"})]}),e("div",{style:"display: grid; gap: 8px; font-size: 13px;",children:[e("div",{style:"display: flex; justify-content: space-between;",children:[e("span",{style:"color: #6B7280;",children:"Nama"}),e("span",{style:"font-weight: 600;",children:i.business?.name||"-"})]}),e("div",{style:"display: flex; justify-content: space-between;",children:[e("span",{style:"color: #6B7280;",children:"Kategori"}),e("span",{style:"font-weight: 600;",children:i.business?.category||"-"})]}),e("div",{style:"display: flex; justify-content: space-between;",children:[e("span",{style:"color: #6B7280;",children:"Level"}),e("span",{style:"font-weight: 600;",children:[i.business?.maturity_level||1,"/5"]})]})]})]})]}),i.business_intelligence?.length>0&&e("div",{class:"card",style:"margin-top: 24px; padding: 0; overflow: hidden;",children:[e("div",{style:"padding: 16px 20px; border-bottom: 1px solid #E5E7EB; display: flex; align-items: center; gap: 10px;",children:[e(Nt,{size:20,style:"color: #F59E0B;"}),e("span",{style:"font-size: 15px; font-weight: 600;",children:"Business Intelligence"}),e("span",{style:"font-size: 11px; color: #6B7280; background: #F3F4F6; padding: 2px 8px; border-radius: 4px;",children:[i.business_intelligence.length," data"]})]}),e("div",{style:"padding: 12px 16px; border-bottom: 1px solid #E5E7EB; display: flex; gap: 8px; flex-wrap: wrap;",children:["all","ledger","building","inventory","transaction"].map(v=>{const A={all:"📋 Semua",ledger:"📒 Buku Kas",building:"🏪 Bangunan",inventory:"📦 Inventaris",transaction:"🧾 Transaksi"},z=v==="all"?i.business_intelligence.length:i.business_intelligence.filter(_=>_.type===v).length;return v!=="all"&&z===0?null:e("button",{onClick:()=>f(v),style:`padding: 6px 12px; border-radius: 6px; font-size: 12px; border: none; cursor: pointer; transition: all 0.2s; ${u===v?"background: #63297A; color: white;":"background: #F3F4F6; color: #374151;"}`,children:[A[v]," (",z,")"]},v)})}),e("div",{style:"padding: 16px; display: grid; gap: 16px; max-height: 600px; overflow-y: auto;",children:i.business_intelligence.filter(v=>u==="all"||v.type===u).map((v,A)=>{const _={ledger:{icon:"📒",label:"Buku Kas",color:"#2563EB",bg:"#EFF6FF"},inventory:{icon:"📦",label:"Inventaris",color:"#10B981",bg:"#ECFDF5"},building:{icon:"🏪",label:"Bangunan",color:"#F59E0B",bg:"#FFFBEB"},transaction:{icon:"🧾",label:"Transaksi",color:"#8B5CF6",bg:"#F5F3FF"}}[v.type]||{icon:"📄",label:v.type,color:"#6B7280",bg:"#F3F4F6"},c=v.data||{};return e("div",{style:`background: ${_.bg}; border-radius: 10px; border: 1px solid ${_.color}20; overflow: hidden;`,children:[e("div",{style:`padding: 10px 14px; background: ${_.color}15; display: flex; justify-content: space-between; align-items: center;`,children:[e("span",{style:"font-weight: 600; font-size: 13px;",children:[_.icon," ",_.label]}),e("span",{style:"font-size: 10px; color: #6B7280;",children:ut(v.analyzed_at)})]}),e("div",{style:"display: grid; grid-template-columns: 1fr 1fr; gap: 0;",children:[e("div",{style:"padding: 12px; border-right: 1px solid #E5E7EB;",children:v.source?.image_url?e("div",{children:[e("img",{src:v.source.image_url,alt:_.label,style:"width: 100%; height: auto; border-radius: 6px; display: block;"}),v.source?.caption&&e("div",{style:"margin-top: 8px; font-size: 11px; color: #6B7280; font-style: italic;",children:['"',v.source.caption,'"']})]}):e("div",{style:"height: 120px; display: flex; align-items: center; justify-content: center; background: #F9FAFB; border-radius: 6px; color: #9CA3AF; font-size: 12px;",children:"No image"})}),e("div",{style:"padding: 12px; font-size: 12px;",children:[v.type==="ledger"&&e("div",{style:"display: grid; gap: 6px;",children:[e("div",{children:["📈 Pendapatan: ",e("strong",{style:"color: #10B981;",children:[O(c.daily_income_estimate),"/hari"]})]}),e("div",{children:["📉 Pengeluaran: ",e("strong",{style:"color: #EF4444;",children:[O(c.daily_expense_estimate),"/hari"]})]}),e("div",{children:["💰 Profit: ",e("strong",{children:[O(c.daily_profit_estimate),"/hari"]})]}),e("div",{style:"margin-top: 4px; padding-top: 6px; border-top: 1px dashed #D1D5DB; font-size: 11px; color: #6B7280;",children:["Kualitas: ",c.record_quality,e("br",{}),"Literasi: ",c.literacy_indicator,"/10"]})]}),v.type==="inventory"&&e("div",{style:"display: grid; gap: 6px;",children:[e("div",{children:["📦 Total: ",e("strong",{children:c.total_items_count})," (",c.stock_level,")"]}),e("div",{children:["💵 Nilai: ",e("strong",{children:O(c.inventory_value_estimate)})]}),e("div",{style:"font-size: 11px; color: #6B7280;",children:["Variasi: ",c.variety_score,"/10 • Perputaran: ",c.turnover_indicator]}),c.items?.length>0&&e("div",{style:"margin-top: 4px; padding-top: 6px; border-top: 1px dashed #D1D5DB;",children:[e("div",{style:"font-size: 10px; color: #6B7280; margin-bottom: 4px;",children:"Items:"}),c.items.slice(0,5).map((m,b)=>e("div",{style:"font-size: 11px;",children:["• ",m.name,": ",m.quantity_estimate," ",m.unit]},b))]})]}),v.type==="building"&&e("div",{style:"display: grid; gap: 6px;",children:[e("div",{children:["🏠 Tipe: ",e("strong",{children:c.building_type})]}),e("div",{children:["📐 Ukuran: ",e("strong",{children:c.size_estimate})]}),e("div",{children:["📍 Lokasi: ",e("strong",{children:c.location_type})]}),e("div",{children:["💰 Nilai: ",e("strong",{children:O(c.estimated_value)})]}),e("div",{style:"margin-top: 4px; padding-top: 6px; border-top: 1px dashed #D1D5DB; font-size: 11px; color: #6B7280;",children:["Kondisi: ",c.condition,e("br",{}),"Visibilitas: ",c.visibility,e("br",{}),"Skor Strategis: ",c.strategic_score,"/10"]})]}),v.type==="transaction"&&e("div",{style:"display: grid; gap: 6px;",children:[e("div",{children:["🧾 Jumlah: ",e("strong",{children:[c.transaction_count," transaksi"]})]}),e("div",{children:["💵 Total: ",e("strong",{children:O(c.total_amount)})]}),c.transactions?.length>0&&e("div",{style:"margin-top: 4px; padding-top: 6px; border-top: 1px dashed #D1D5DB; font-size: 11px;",children:c.transactions.slice(0,3).map((m,b)=>e("div",{style:"color: #6B7280;",children:[m.items?.join(", ")," - ",O(m.total)]},b))})]})]})]})]},A)})})]}),e("div",{class:"card",style:"margin-top: 24px; padding: 0; overflow: hidden;",children:[e("div",{style:"padding: 16px 20px; border-bottom: 1px solid #E5E7EB; display: flex; justify-content: space-between; align-items: center;",children:[e("div",{style:"display: flex; align-items: center; gap: 10px;",children:[e(re,{size:20,style:"color: #63297A;"}),e("span",{style:"font-size: 15px; font-weight: 600;",children:"Lokasi"})]}),e("div",{style:"display: flex; gap: 12px; font-size: 11px;",children:[e("span",{style:"display: flex; align-items: center; gap: 4px;",children:["🏠 ",e("span",{style:"color: #2563EB;",children:"Rumah"})]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:["🏪 ",e("span",{style:"color: #10B981;",children:"Usaha"})]})]})]}),e("div",{id:"user-location-map",style:"height: 280px;"})]})]})}const R=({children:t,type:i="default",style:n={}})=>{const r={default:{bg:"#f8f9fa",border:"#dee2e6"},start:{bg:"#e3f2fd",border:"#2196f3"},action:{bg:"#fff3e0",border:"#ff9800"},decision:{bg:"#fce4ec",border:"#e91e63"},success:{bg:"#e8f5e9",border:"#4caf50"},end:{bg:"#f3e5f5",border:"#9c27b0"},user:{bg:"#e0f7fa",border:"#00bcd4"},bot:{bg:"#fff8e1",border:"#ffc107"}},s=r[i]||r.default;return e("div",{style:{padding:"12px 16px",background:s.bg,border:`2px solid ${s.border}`,borderRadius:"8px",textAlign:"center",fontSize:"13px",lineHeight:"1.4",...n},children:t})},K=({direction:t="down"})=>e("div",{style:{textAlign:"center",padding:"4px 0",color:"#666",fontSize:"20px"},children:t==="down"?"↓":t==="right"?"→":"↓"}),Ae=({children:t})=>e("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"16px 0"},children:t}),Ee=({left:t,right:i})=>e("div",{style:{display:"flex",gap:"24px",justifyContent:"center",alignItems:"flex-start"},children:[e("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:t}),e("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:i})]});function hn(){const t=(i,n)=>({padding:"12px",background:i,borderRadius:"8px",borderLeft:`4px solid ${n}`});return e("div",{style:"padding: 20px;",children:[e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h1",{style:"margin: 0 0 8px 0; display: flex; align-items: center; gap: 8px;",children:[e(Dt,{size:28})," Cara Kerja Chatbot Amartha"]}),e("p",{style:"color: #666; margin: 0;",children:"Panduan lengkap alur percakapan untuk Petugas Lapangan (BP)"})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{style:"display: flex; align-items: center; gap: 8px;",children:[e(dt,{size:18})," Kata Kunci Perintah"]}),e("p",{style:"color: #666; margin-bottom: 16px;",children:"Kata-kata yang bisa diketik/diucapkan anggota (case-insensitive)"}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;",children:[e("div",{style:t("#e3f2fd","#2196f3"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(dt,{size:14})," MENU"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"menu, bantuan, help, halo, hi, hai, hello, test, ping"}),e("p",{style:"margin: 4px 0 0 0; font-size: 11px; color: #666;",children:["User baru: welcome + cara daftar",e("br",{}),"User lama: menu dengan nama"]})]}),e("div",{style:t("#e8f5e9","#4caf50"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(pe,{size:14})," KUIS"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"kuis, quiz, belajar, tes, ujian, soal"}),e("p",{style:"margin: 4px 0 0 0; font-size: 11px; color: #666;",children:"Mulai/lanjut quiz literasi keuangan"})]}),e("div",{style:t("#fff3e0","#ff9800"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(jt,{size:14})," NILAI"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"nilai, hasil, skor, progress"}),e("p",{style:"margin: 4px 0 0 0; font-size: 11px; color: #666;",children:"Lihat progress literasi keuangan"})]}),e("div",{style:t("#f3e5f5","#9c27b0"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(Di,{size:14})," PROFIL"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"cek data, data saya, profil, info saya"}),e("p",{style:"margin: 4px 0 0 0; font-size: 11px; color: #666;",children:"Lihat data profil + pinjaman + literasi"})]}),e("div",{style:t("#e0f7fa","#00bcd4"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(He,{size:14})," JADWAL"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"jadwal, majelis, pertemuan, kumpul"}),e("p",{style:"margin: 4px 0 0 0; font-size: 11px; color: #666;",children:"Info jadwal majelis mingguan"})]}),e("div",{style:t("#fce4ec","#e91e63"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(Ai,{size:14})," FOTO"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"Kirim gambar + caption"}),e("p",{style:"margin: 4px 0 0 0; font-size: 11px; color: #666;",children:"AI analisis: stok, bangunan, nota, dll"})]}),e("div",{style:t("#fff8e1","#ffc107"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(Hi,{size:14})," VOICE NOTE"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"Kirim pesan suara"}),e("p",{style:"margin: 4px 0 0 0; font-size: 11px; color: #666;",children:"AI transkripsi → proses seperti teks"})]}),e("div",{style:t("#ecfdf5","#059669"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(ae,{size:14})," KAPASITAS"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"kapasitas, kemampuan bayar, hitung cicilan"}),e("p",{style:"margin: 4px 0 0 0; font-size: 11px; color: #666;",children:"5 pertanyaan → hitung RPC (kemampuan cicilan)"})]})]})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{children:"1. Pendaftaran Anggota Baru"}),e("p",{style:"color: #666; margin-bottom: 8px;",children:["Ketika nomor baru menghubungi chatbot • ",e("strong",{children:"Bisa teks atau voice note"})]}),e(Ae,{children:[e(R,{type:"user",style:{minWidth:"200px"},children:[e("strong",{children:"Ibu kirim pesan"}),e("br",{}),"🎤 voice / ⌨️ teks"]}),e(K,{}),e(R,{type:"bot",style:{minWidth:"240px"},children:[e("strong",{children:"Bot tanya + 🔊 audio:"}),e("br",{}),'"Siapa nama Ibu, usaha apa, dimana?"']}),e(K,{}),e(R,{type:"user",style:{minWidth:"240px"},children:[e("strong",{children:"Ibu jawab (voice/teks):"}),e("br",{}),'"Saya Bu Siti, warung sembako di Bogor"']}),e(K,{}),e(R,{type:"action",style:{minWidth:"200px"},children:[e("strong",{children:"AI ekstrak data:"}),e("br",{}),"name, business, location"]}),e(K,{}),e(R,{type:"success",style:{minWidth:"200px"},children:[e("strong",{children:"✓ Terdaftar"}),e("br",{}),"Status: ",e("span",{style:"color: #ff9800; fontWeight: 'bold'",children:"PENDING"})]}),e(K,{}),e(R,{type:"end",style:{minWidth:"220px"},children:[e("strong",{children:"👨‍💼 BP verifikasi di Dashboard"}),e("br",{}),"Status → ",e("span",{style:"color: #4caf50; fontWeight: 'bold'",children:"ACTIVE"})]})]})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{children:"2. Kuis Literasi Keuangan"}),e("p",{style:"color: #666; margin-bottom: 8px;",children:["15 minggu pembelajaran • Lulus: ",e("strong",{children:"100% (4/4 benar)"})]}),e(Ae,{children:[e(R,{type:"user",style:{minWidth:"180px"},children:[e("strong",{children:"Ibu ketik:"}),e("br",{}),'"kuis" / "belajar"']}),e(K,{}),e(R,{type:"action",style:{minWidth:"220px"},children:[e("strong",{children:"Proses: Sistem cek:"}),e("br",{}),"Minggu mana yang belum lulus?"]}),e(K,{}),e(R,{type:"bot",style:{minWidth:"240px"},children:[e("strong",{children:"Bot: Kirim intro:"}),e("br",{}),'"Quiz Minggu X dimulai! Topik: ..."']}),e(K,{}),e(R,{type:"bot",style:{minWidth:"260px"},children:[e("strong",{children:"Bot: Kirim soal 1/4"}),e("br",{}),"(WhatsApp List Message)",e("br",{}),e("span",{style:"font-size: 11px",children:"A. ... | B. ... | C. ... | D. ..."})]}),e(K,{}),e(R,{type:"decision",style:{minWidth:"180px"},children:e("strong",{children:"Jawaban benar?"})}),e(Ee,{left:e($,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✓ Ya"}),e(R,{type:"success",style:{minWidth:"100px"},children:"+25%"})]}),right:e($,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✗ Tidak"}),e(R,{type:"default",style:{minWidth:"120px"},children:["+0%",e("br",{}),e("span",{style:"fontSize: '11px'",children:"+ penjelasan"})]})]})}),e(K,{}),e(R,{type:"action",style:{minWidth:"180px"},children:[e("strong",{children:"Ulangi 4x"}),e("br",{}),"(4 soal acak)"]}),e(K,{}),e(R,{type:"decision",style:{minWidth:"180px"},children:e("strong",{children:"Nilai = 100%?"})}),e(Ee,{left:e($,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✓ Ya"}),e(R,{type:"success",style:{minWidth:"100px"},children:[e("strong",{children:"LULUS"}),e("br",{}),"Minggu ini"]})]}),right:e($,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✗ Tidak"}),e(R,{type:"default",style:{minWidth:"100px"},children:[e("strong",{children:"ULANG"}),e("br",{}),"Minggu ini"]})]})})]})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{children:"3. Analisis Foto Bisnis"}),e("p",{style:"color: #666; margin-bottom: 8px;",children:["AI menganalisis foto • ",e("strong",{children:"Caption bisa via voice note"})]}),e(Ae,{children:[e(R,{type:"user",style:{minWidth:"180px"},children:[e("strong",{children:"Ibu kirim foto"}),e("br",{}),"📷 + caption (opsional)"]}),e(K,{}),e(R,{type:"decision",style:{minWidth:"180px"},children:e("strong",{children:"Ada caption?"})}),e(Ee,{left:e($,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✓ Ya"}),e(R,{type:"success",style:{minWidth:"100px"},children:"Lanjut ↓"})]}),right:e($,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✗ Tidak"}),e(R,{type:"bot",style:{minWidth:"140px"},children:'"Jelaskan foto ini"'}),e(K,{}),e(R,{type:"user",style:{minWidth:"140px"},children:["🎤 voice / ⌨️ teks",e("br",{}),"(5 menit)"]})]})}),e(K,{}),e(R,{type:"action",style:{minWidth:"220px"},children:[e("strong",{children:"Gemini Vision analisis"}),e("br",{}),"Klasifikasi + ekstrak data"]}),e(K,{}),e("div",{style:{display:"flex",gap:"16px"},children:[e(R,{type:"success",style:{minWidth:"140px"},children:[e("strong",{children:"Mobile:"}),e("br",{}),"teks + 🔊 audio"]}),e(R,{type:"end",style:{minWidth:"140px"},children:[e("strong",{children:"Web: Dashboard"}),e("br",{}),"update real-time"]})]})]}),e("div",{style:"margin-top: 16px; display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 8px;",children:[e("div",{style:{padding:"8px",background:"#e3f2fd",borderRadius:"6px",textAlign:"center"},children:[e("strong",{children:"Ledger: Ledger"}),e("br",{}),e("span",{style:"fontSize: '11px'",children:"Buku kas, nota"})]}),e("div",{style:{padding:"8px",background:"#e8f5e9",borderRadius:"6px",textAlign:"center"},children:[e("strong",{children:"Inventory: Inventory"}),e("br",{}),e("span",{style:"fontSize: '11px'",children:"Stok barang"})]}),e("div",{style:{padding:"8px",background:"#fff3e0",borderRadius:"6px",textAlign:"center"},children:[e("strong",{children:"Building: Building"}),e("br",{}),e("span",{style:"fontSize: '11px'",children:"Tempat usaha"})]}),e("div",{style:{padding:"8px",background:"#f3e5f5",borderRadius:"6px",textAlign:"center"},children:[e("strong",{children:"Transaction: Transaction"}),e("br",{}),e("span",{style:"fontSize: '11px'",children:"Bukti transaksi"})]})]})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{children:"4. Perintah Lainnya"}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-top: 16px;",children:[e("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[e("strong",{children:"Menu Utama"}),e("p",{style:"color: #666; fontSize: '12px'; margin: '4px 0'",children:"Ketik: halo, menu, bantuan"}),e("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px",fontSize:"13px",marginTop:"8px",border:"1px solid #e0e0e0"},children:[e("strong",{children:"Menu Utama"}),e("br",{}),e("br",{}),"1. KUIS - Mulai kuis",e("br",{}),"2. NILAI - Hasil belajar",e("br",{}),"3. DATA SAYA - Profil",e("br",{}),"4. FOTO - Kirim foto",e("br",{}),"5. JADWAL - Majelis"]})]}),e("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[e("strong",{children:"Cek Data Profil"}),e("p",{style:"color: #666; fontSize: '12px'; margin: '4px 0'",children:"Ketik: cek data, profil, data saya"}),e("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px",fontSize:"13px",marginTop:"8px",border:"1px solid #e0e0e0"},children:["✓ ",e("strong",{children:"PROFIL ANDA"}),e("br",{}),e("br",{}),"Nama: Bu Siti",e("br",{}),"Building: Usaha: Warung",e("br",{}),"Lokasi: Bogor",e("br",{}),"Limit: Rp 5.000.000",e("br",{}),"Progress: 5/15"]})]}),e("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[e("strong",{children:"Jadwal Majelis"}),e("p",{style:"color: #666; fontSize: '12px'; margin: '4px 0'",children:"Ketik: jadwal, majelis, pertemuan"}),e("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px",fontSize:"13px",marginTop:"8px",border:"1px solid #e0e0e0"},children:[e("strong",{children:"Jadwal Majelis"}),e("br",{}),e("br",{}),"Majelis: Sejahtera",e("br",{}),"📆 Hari: Senin",e("br",{}),"Jam: 09:00",e("br",{}),"Lokasi: Balai Desa"]})]}),e("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[e("strong",{children:"📊 Lihat Progress"}),e("p",{style:"color: #666; fontSize: '12px'; margin: '4px 0'",children:"Ketik: nilai, progress, hasil"}),e("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px",fontSize:"13px",marginTop:"8px",border:"1px solid #e0e0e0"},children:["📊 ",e("strong",{children:"Progress Literasi"}),e("br",{}),e("br",{}),"✓ Selesai: 5/15 (33%)",e("br",{}),e("br",{}),"🎯 Minggu 1: 100%",e("br",{}),"🎯 Minggu 2: 100%",e("br",{}),"🎯 Minggu 3: 100%"]})]})]})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{children:"Status User"}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-top: 16px;",children:[e("div",{style:{padding:"12px",background:"#fff3cd",borderRadius:"8px",textAlign:"center"},children:[e("strong",{style:"fontSize: '18px'",children:"🟡"}),e("br",{}),e("strong",{children:"PENDING"}),e("p",{style:"margin: 4px 0 0 0; fontSize: '12px'",children:"Menunggu verifikasi BP"})]}),e("div",{style:{padding:"12px",background:"#d4edda",borderRadius:"8px",textAlign:"center"},children:[e("strong",{style:"fontSize: '18px'",children:"🟢"}),e("br",{}),e("strong",{children:"ACTIVE"}),e("p",{style:"margin: 4px 0 0 0; fontSize: '12px'",children:"Akses penuh"})]}),e("div",{style:{padding:"12px",background:"#f8d7da",borderRadius:"8px",textAlign:"center"},children:[e("strong",{style:"fontSize: '18px'",children:"🔴"}),e("br",{}),e("strong",{children:"SUSPENDED"}),e("p",{style:"margin: 4px 0 0 0; fontSize: '12px'",children:"Dinonaktifkan"})]}),e("div",{style:{padding:"12px",background:"#e2e3e5",borderRadius:"8px",textAlign:"center"},children:[e("strong",{style:"fontSize: '18px'",children:"⚫"}),e("br",{}),e("strong",{children:"INACTIVE"}),e("p",{style:"margin: 4px 0 0 0; fontSize: '12px'",children:"Keluar program"})]})]})]}),e("div",{class:"card",children:[e("h2",{children:"🔧 Tech Stack & Architecture"}),e("div",{style:"display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin: 16px 0;",children:[e("div",{children:[e("div",{style:"font-size: 11px; color: #6B7280; margin-bottom: 8px; font-weight: 600;",children:"🎨 FRONTEND"}),e("div",{style:"display: flex; flex-wrap: wrap; gap: 6px;",children:["Preact","Vite","Leaflet Maps"].map(i=>e("span",{style:"padding: 4px 10px; background: #DBEAFE; color: #1E40AF; border-radius: 12px; font-size: 11px; font-weight: 600;",children:i},i))})]}),e("div",{children:[e("div",{style:"font-size: 11px; color: #6B7280; margin-bottom: 8px; font-weight: 600;",children:"🧠 BACKEND & AI"}),e("div",{style:"display: flex; flex-wrap: wrap; gap: 6px;",children:["Node.js","Express","Gemini 2.5 Flash","Gemini Vision"].map(i=>e("span",{style:"padding: 4px 10px; background: #D1FAE5; color: #065F46; border-radius: 12px; font-size: 11px; font-weight: 600;",children:i},i))})]}),e("div",{children:[e("div",{style:"font-size: 11px; color: #6B7280; margin-bottom: 8px; font-weight: 600;",children:"☁️ INFRASTRUCTURE"}),e("div",{style:"display: flex; flex-wrap: wrap; gap: 6px;",children:["Cloud Run","Firestore","WhatsApp API"].map(i=>e("span",{style:"padding: 4px 10px; background: #FEF3C7; color: #92400E; border-radius: 12px; font-size: 11px; font-weight: 600;",children:i},i))})]})]}),e("div",{style:"margin-top: 24px;",children:[e("h3",{style:"font-size: 14px; margin-bottom: 12px;",children:"📐 System Architecture"}),e("pre",{style:"background: #F8FAFC; color: #334155; padding: 16px; border-radius: 8px; font-size: 10px; line-height: 1.4; overflow-x: auto; font-family: 'Consolas', monospace; border: 1px solid #E2E8F0;",children:`
┌───────────────────────────────────────────────────────────────────┐
│                       AMARTHA AI CHATBOT                          │
└───────────────────────────────────────────────────────────────────┘

┌────────────┐   ┌────────────┐   ┌─────────────────────────────────┐
│  WhatsApp  │   │   Admin    │   │         Google Cloud            │
│ Business   │   │ Dashboard  │   │                                 │
│   API      │   │  (Preact)  │   │  ┌───────────────────────────┐  │
└─────┬──────┘   └─────┬──────┘   │  │     Cloud Firestore       │  │
      │                │          │  │  ┌─────┐ ┌──────┐ ┌────┐  │  │
      │ Webhook        │ REST     │  │  │users│ │majelis│ │BI  │  │  │
      ▼                ▼          │  │  └─────┘ └──────┘ └────┘  │  │
┌─────────────────────────────┐   │  └───────────────────────────┘  │
│      Express Server         │   │                                 │
│  ┌───────────────────────┐  │   │  ┌───────────────────────────┐  │
│  │     Routes Layer      │  │   │  │     Gemini AI APIs        │  │
│  │ /webhook /api/users   │  │   │  │ ┌────────┐ ┌────────┐     │  │
│  └──────────┬────────────┘  │   │  │ │Text 2.5│ │ Vision │     │  │
│             ▼               │   │  │ │ Flash  │ │Analysis│     │  │
│  ┌───────────────────────┐  │   │  │ └────────┘ └────────┘     │  │
│  │  Controllers Layer    │  │   │  └───────────────────────────┘  │
│  └──────────┬────────────┘  │   └─────────────────────────────────┘
│             ▼               │
│  ┌───────────────────────┐  │   Business Logic:
│  │   Services Layer      │◄─┼── • Credit Scoring (A-Score)
│  │ User, Majelis, Quiz   │  │   • Capacity Collection
│  └──────────┬────────────┘  │   • Engagement Tracking
│             ▼               │
│  ┌───────────────────────┐  │
│  │  Repositories Layer   │◄─┼── Data Access (Firestore)
│  └───────────────────────┘  │
└─────────────────────────────┘
             │
             ▼
      ┌────────────┐
      │ Cloud Run  │
      │  (Docker)  │
      └────────────┘
`})]}),e("div",{style:"margin-top: 24px;",children:[e("h3",{style:"font-size: 14px; margin-bottom: 12px;",children:"💬 WhatsApp Message Flow"}),e("pre",{style:"background: #F8FAFC; color: #334155; padding: 16px; border-radius: 8px; font-size: 10px; line-height: 1.4; overflow-x: auto; font-family: 'Consolas', monospace; border: 1px solid #E2E8F0;",children:`
User sends message (text/voice/image)
              │
              ▼
┌──────────────────────┐
│  WhatsApp Cloud API  │
└──────────┬───────────┘
           │ POST /webhook
           ▼
┌──────────────────────┐   ┌─────────────────────────────────┐
│  WebhookController   │──▶│         Message Types           │
└──────────┬───────────┘   │ • text  → processTextMessage()  │
           │               │ • image → processImageMessage() │
           ▼               │ • audio → transcribe + process  │
┌──────────────────────┐   │ • interactive → handleQuiz()    │
│   Input Validation   │   └─────────────────────────────────┘
│ • Spam detection     │
│ • Length check       │
└──────────┬───────────┘
           │
           ▼
┌──────────────────────┐   ┌─────────────────────────────────┐
│  Session Check       │──▶│    Active Sessions              │
│ (CapacityCollection) │   │ • Capacity flow → next question │
└──────────┬───────────┘   │ • Quiz flow → check answer      │
           │ No session    └─────────────────────────────────┘
           ▼
┌──────────────────────┐   ┌─────────────────────────────────┐
│  Command Detection   │──▶│       Keyword Triggers          │
│    (aiEngine.js)     │   │ menu/halo    → showMenu()       │
└──────────┬───────────┘   │ kuis/quiz    → startQuiz()      │
           │ No match      │ kapasitas    → startCapacity()  │
           ▼               │ cek data     → showProfile()    │
┌──────────────────────┐   │ jadwal       → showMajelis()    │
│  RAG Knowledge Base  │   │ nilai/skor   → showProgress()   │
│ • Amartha products   │   └─────────────────────────────────┘
│ • Financial literacy │
└──────────┬───────────┘
           │
           ▼
┌──────────────────────┐   ┌─────────────────────────────────┐
│   Gemini 2.5 Flash   │   │       AI Tool Calling           │
│ • User context       │──▶│ • registerUser() - new users    │
│ • Business KPIs      │   │ • startQuiz() - literacy quiz   │
│ • RAG context        │   │ • showProgress() - scores       │
└──────────┬───────────┘   └─────────────────────────────────┘
           │
           ▼
┌──────────────────────┐
│  WhatsApp Response   │
│ • Text message       │
│ • List (quiz)        │
│ • Audio (TTS)        │
└──────────────────────┘
`})]}),e("div",{style:"margin-top: 24px;",children:[e("h3",{style:"font-size: 14px; margin-bottom: 12px;",children:"📊 A-Score Credit Scoring Model"}),e("pre",{style:"background: #F8FAFC; color: #334155; padding: 16px; border-radius: 8px; font-size: 10px; line-height: 1.4; overflow-x: auto; font-family: 'Consolas', monospace; border: 1px solid #E2E8F0;",children:`
┌─────────────────────────────────────────────────────────┐
│              A-SCORE CALCULATION (0-100)                │
└─────────────────────────────────────────────────────────┘
                           │
       ┌───────────────────┼───────────────────┐
       │                   │                   │
       ▼                   ▼                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  CHARACTER  │    │  CAPACITY   │    │  LITERACY   │
│    (25%)    │    │    (30%)    │    │    (25%)    │
├─────────────┤    ├─────────────┤    ├─────────────┤
│• CRBI Score │    │• Monthly    │    │• Quiz Score │
│• Payment    │    │  Income     │    │• Weeks Done │
│  History    │    │• Expenses   │    │• Progress   │
│• Attendance │    │• Surplus    │    │  Rate       │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       └───────────────────┼───────────────────┘
                           │
                           ▼
                  ┌─────────────┐
                  │ ENGAGEMENT  │
                  │    (20%)    │
                  ├─────────────┤
                  │• Interactions│
                  │• Streak Days│
                  │• Frequency  │
                  └─────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────┐
│                  ZONE CLASSIFICATION                    │
├─────────────┬─────────────┬─────────────┬──────────────┤
│   Zone A    │   Zone B    │   Zone C    │   Zone D     │
│  (80-100)   │  (60-79)    │  (40-59)    │   (0-39)     │
│ Auto-Approve│ Conditional │ w/Coaching  │  Not Ready   │
└─────────────┴─────────────┴─────────────┴──────────────┘
`})]}),e("div",{style:"margin-top: 24px;",children:[e("h3",{style:"font-size: 14px; margin-bottom: 12px;",children:"🗄️ Firestore Data Model"}),e("pre",{style:"background: #F8FAFC; color: #334155; padding: 16px; border-radius: 8px; font-size: 10px; line-height: 1.4; overflow-x: auto; font-family: 'Consolas', monospace; border: 1px solid #E2E8F0;",children:`
Firestore Database
│
├── users (collection)
│   └── {phone} (document)
│       ├── name, status, majelis_id, is_mock
│       └── (subcollections)
│           ├── profile/data   → dob, gender, home_lat, home_lng
│           ├── business/data  → name, category, business_lat/lng
│           ├── loan/data      → limit, used, remaining, history[]
│           ├── literacy/data  → week_01..week_15 {score}
│           ├── engagement     → interactions, streak, daily_history[]
│           ├── capacity/data  → income, expenses, surplus
│           └── bi/images/*    → Business Intelligence data
│
├── majelis (collection)
│   └── {id} → name, schedule, location, members[], attendance/
│
├── business_types → categories with maturity_levels[]
│
└── financial_literacy → week content + quiz questions
`})]})]})]})}const gn="6281991262988",un=`https://wa.me/${gn}`,fn=[{key:"warung",name:"Warung Sembako",icon:"🏪",desc:"Maturity 3, 40% quiz"},{key:"toko",name:"Toko Kelontong",icon:"🛒",desc:"Maturity 2, 20% quiz"},{key:"makanan",name:"Usaha Makanan",icon:"🍜",desc:"Maturity 4, 60% quiz"},{key:"jahit",name:"Jasa Jahit",icon:"🧵",desc:"Maturity 2, 13% quiz"},{key:"pertanian",name:"Pertanian",icon:"🌾",desc:"Maturity 3, 53% quiz"},{key:"salon",name:"Salon Kecantikan",icon:"💇",desc:"Maturity 3, 33% quiz"},{key:"laundry",name:"Jasa Laundry",icon:"🧺",desc:"Maturity 2, 27% quiz"},{key:"random",name:"Random",icon:"🎲",desc:"Random persona"}],yn=[{key:"sukses",name:"Sukses",icon:"🌟",desc:"Rp 10jt, 80% quiz"},{key:"baru",name:"Baru",icon:"🆕",desc:"No loan, 0% quiz"},{key:"krisis",name:"Krisis",icon:"📉",desc:"Missed payments"},{key:"lulus",name:"Lulus",icon:"🎓",desc:"100% quiz, paid"},{key:"fraud",name:"Fraud",icon:"⚠️",desc:"Suspicious flags"}],mn=[{title:"New User Registration",steps:["Send /demo:reset to clear data",'Send "Halo" → Bot asks for info','Reply: "Saya Dewi, jualan kue di Bandung"','Dashboard → User appears "Pending"','Click Verify → Status "Active"']},{title:"Quiz Flow (Full)",steps:["Send /demo:warung (40% progress)",'Send "kuis" → Get next incomplete week',"Answer 4 questions via list","Score 100% to pass week",'Send "nilai" → See progress']},{title:"Quiz Flow (Single Week)",steps:["Send /demo:baru (0% progress)",'Send "kuis" → Start Week 1',"Answer all 4 correctly → Pass",'Send "kuis" again → Week 2 starts',"Repeat until Week 15 = Graduate"]},{title:"Image Analysis (BI)",steps:["Send /demo:makanan","Send photo with caption","Bot extracts data (type, value)","Dashboard → User Profile → BI",'New card with "NEW" badge']},{title:"Profile & Loan Info",steps:["Send /demo:sukses",'Send "cek data" → Full profile',"See loan limit, balance, payments",'Send "jadwal" → Majelis schedule',"Dashboard shows same data"]},{title:"Majelis & Attendance",steps:["Send /demo:sukses (has majelis)","Dashboard → Majelis page","Click majelis card → Detail","See member list + attendance","Add attendance record"]}];function xn(){const[t,i]=M([]),[n,r]=M(!0),[s,o]=M(null),[l,h]=M(new Set),y=async()=>{try{const g=await(await fetch(`${N}/api/users`)).json();i(g.filter(S=>S.is_demo===!0))}catch(d){console.error(d)}r(!1)};q(()=>{y();const d=new EventSource(`${N}/api/events/demo`);return d.onmessage=g=>{const S=JSON.parse(g.data);S.type==="user_created"&&S.data?.is_demo&&(h(C=>new Set([...C,S.data.phone])),y(),setTimeout(()=>{h(C=>{const p=new Set(C);return p.delete(S.data.phone),p})},5e3))},()=>d.close()},[]);const u=d=>{navigator.clipboard.writeText(d),o(d),setTimeout(()=>o(null),2e3)},f=async d=>{confirm(`Delete demo user ${d}?`)&&(await fetch(`${N}/api/users/${d}`,{method:"DELETE"}),y())},a=({item:d,prefix:g})=>{const S=`${g}${d.key}`,C=s===S;return e("div",{onClick:()=>u(S),style:{padding:"14px",background:C?"#e3f2fd":"#fff",border:`1px solid ${C?"#2196f3":"#e0e0e0"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.15s"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[e("span",{style:{fontSize:"28px"},children:d.icon}),e("div",{children:[e("div",{style:{fontWeight:600,fontSize:"14px"},children:d.name}),e("div",{style:{fontSize:"11px",color:"#666"},children:d.desc})]})]}),e("div",{style:{fontSize:"12px",color:"#2196f3",fontFamily:"monospace",background:"#f5f5f5",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:[S," ",C&&"✓"]})]})};return e("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[e("div",{style:{marginBottom:"24px",borderBottom:"2px solid #e0e0e0",paddingBottom:"16px"},children:[e("h1",{style:{margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:"10px",fontSize:"24px"},children:[e(Ht,{size:28})," Demo Mode"]}),e("a",{href:un,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"#25D366",color:"#fff",borderRadius:"8px",textDecoration:"none",fontWeight:600,fontSize:"14px",marginBottom:"12px"},children:[e(Dt,{size:18})," Chatbot: +62 819-9126-2988"]}),e("p",{style:{color:"#666",margin:0,fontSize:"14px"},children:"Copy commands below and send to the chatbot via WhatsApp."})]}),e("div",{style:{background:"#fff3e0",padding:"16px 20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #ffcc80"},children:[e("h3",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px",fontSize:"15px"},children:[e(Vi,{size:18})," Quick Start"]}),e("div",{style:{display:"flex",gap:"24px",flexWrap:"wrap",fontSize:"13px",color:"#5d4037"},children:[e("span",{children:"1. Copy command below"}),e("span",{children:"2. Send to WhatsApp bot"}),e("span",{children:'3. Try features: "menu", "kuis", "cek data"'}),e("span",{children:["4. Reset: ",e("code",{style:{background:"#fff",padding:"2px 6px",borderRadius:"3px"},children:"/demo:reset"})]})]})]}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[e("div",{style:{background:"#fff",padding:"20px",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e("h3",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",fontSize:"15px",color:"#333"},children:[e(J,{size:18})," Personas"]}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:fn.map(d=>e(a,{item:d,prefix:"/demo:"},d.key))})]}),e("div",{style:{background:"#fff",padding:"20px",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e("h3",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",fontSize:"15px",color:"#333"},children:[e(ji,{size:18})," Scenarios"]}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:yn.map(d=>e(a,{item:d,prefix:"/demo:"},d.key))}),e("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e0e0e0"},children:[e("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e(Gi,{size:14})," Kombinasi (persona+scenario)"]}),e("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:["/demo:warung+krisis","/demo:random+lulus","/demo:makanan+fraud"].map(d=>e("button",{onClick:()=>u(d),style:{padding:"6px 12px",background:s===d?"#4caf50":"#f5f5f5",color:s===d?"#fff":"#333",border:"none",borderRadius:"4px",cursor:"pointer",fontFamily:"monospace",fontSize:"11px"},children:[d," ",s===d&&"✓"]},d))})]})]})]}),e("div",{style:{background:"#e8f5e9",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #a5d6a7"},children:[e("h3",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",fontSize:"15px",color:"#2e7d32"},children:[e(Ki,{size:18})," Test Journeys"]}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"12px"},children:mn.map((d,g)=>e("div",{style:{background:"#fff",padding:"14px",borderRadius:"6px",border:"1px solid #c8e6c9"},children:[e("div",{style:{fontWeight:600,fontSize:"13px",color:"#2e7d32",marginBottom:"10px"},children:[g+1,". ",d.title]}),e("div",{style:{fontSize:"12px",color:"#555",lineHeight:"1.7"},children:d.steps.map((S,C)=>e("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:[e("span",{style:{color:"#81c784",fontWeight:600,minWidth:"16px"},children:[C+1,"."]}),e("span",{children:S})]},C))})]},g))})]}),e("div",{style:{display:"grid",gridTemplateColumns:"200px 1fr",gap:"20px"},children:[e("div",{style:{background:"#ffebee",padding:"16px",borderRadius:"8px",border:"1px solid #ef9a9a",textAlign:"center"},children:[e(Oi,{size:24,style:{color:"#c62828",marginBottom:"8px"}}),e("div",{style:{fontSize:"13px",color:"#666",marginBottom:"12px"},children:"Clear demo data"}),e("button",{onClick:()=>u("/demo:reset"),style:{padding:"10px 16px",background:s==="/demo:reset"?"#4caf50":"#f44336",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontFamily:"monospace",fontSize:"13px",width:"100%"},children:["/demo:reset ",s==="/demo:reset"&&"✓"]})]}),e("div",{style:{background:"#fff",padding:"16px",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e($i,{size:16})," Demo Users (",t.length,")"]}),e("button",{onClick:y,style:{padding:"4px 10px",cursor:"pointer",border:"1px solid #ddd",borderRadius:"4px",background:"#fff",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[e(Ke,{size:12})," Refresh"]})]}),n?e("div",{style:{color:"#666",fontSize:"13px"},children:"Loading..."}):t.length===0?e("div",{style:{color:"#999",fontSize:"13px",fontStyle:"italic"},children:"No demo users yet. Send a command via WhatsApp."}):e("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:t.map(d=>{const g=l.has(d.phone),S=d.phone.replace(/^62/,"+62 ").replace(/(\d{3})(\d{4})(\d+)/,"$1-$2-$3");return e("div",{style:{padding:"8px 12px",background:g?"#e8f5e9":"#f5f5f5",borderRadius:"6px",fontSize:"12px",display:"flex",alignItems:"center",gap:"8px",border:g?"2px solid #4caf50":"1px solid #e0e0e0",animation:g?"blink 0.5s ease-in-out 3":"none"},children:[g&&e("span",{style:{background:"#4caf50",color:"#fff",padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:600},children:"NEW"}),e("span",{style:{fontWeight:500},children:d.name}),e("span",{style:{color:"#666",fontFamily:"monospace",fontSize:"11px"},children:S}),e(qe,{size:14,style:{color:"#999",cursor:"pointer",marginLeft:"4px"},onClick:()=>f(d.phone)})]},d.phone)})})]})]})]})}const bn=[{name:"Andi Taufan Garuda Putra",role:"Founder & CEO @ Amartha",tip:"Focus on IMPACT - how many lives can this change? He built Amartha to fight poverty."},{name:"William Notowidagdo",role:"SVP of Engineering @ Amartha",tip:"Technical depth matters. Show clean architecture, scalability, security considerations."},{name:"Riza Fahmi",role:"Co-Founder @ HACKTIV8, GDE Web",tip:"Code quality & developer experience. He teaches coding - show you know best practices."}],vn=[{name:"Alexander Li",role:"Head of Engineering @ Amartha",focus:"Architecture, scalability"},{name:"Muhammad Rofi Hidayat",role:"Sr. Lead Data Scientist @ Amartha",focus:"AI/ML implementation"},{name:"Ruben Elkana",role:"Sr. Product Manager @ Amartha",focus:"Product-market fit, user stories"},{name:"Angga Agia Wardhana",role:"GDE Workspace, GDG Cloud",focus:"Google Cloud services"}],kn=[{q:"How does this scale to Amartha's 1M+ users?",a:"Firestore auto-scales horizontally. Cloud Run scales 0-1000 instances. Quiz sessions can move to Redis for high concurrency. WhatsApp API handles rate limiting natively.",judge:"William"},{q:"What's the business impact / ROI?",a:"Higher engagement → better financial literacy → lower default rates → reduced NPL. Also enables upselling: users who complete 15 weeks are prime candidates for larger loans.",judge:"Taufan"},{q:"How do you ensure AI doesn't give bad financial advice?",a:"RAG retrieval grounds responses in Amartha's approved curriculum. System prompt restricts topics. No investment recommendations - purely educational.",judge:"Riza"},{q:"What about offline/low connectivity in rural areas?",a:"WhatsApp handles message queuing natively. No app download needed. Works on basic phones. Users get responses when back online.",judge:"Taufan"},{q:"How do you measure success?",a:"Quiz completion rates, loan repayment correlation, user engagement frequency, BI submission rates, majelis attendance tracking.",judge:"William"},{q:"What's unique vs other chatbots?",a:"Integrated with loan system, image analysis for BI, gamified 15-week curriculum, majelis group management, real-time dashboard sync via SSE.",judge:"Riza"},{q:"Cost per user?",a:"Gemini ~$0.001/msg, Cloud Run ~$0.00001/req, Firestore ~$0.0001/read. Total <$0.01/user/month. At 1M users = ~$10K/month.",judge:"William"},{q:"Data privacy / compliance?",a:"Data in GCP Indonesia region. Users consent via WhatsApp. No PII in logs. Can implement GDPR deletion on request.",judge:"William"},{q:"Why WhatsApp vs custom app?",a:"95% smartphone penetration in Indonesia uses WhatsApp. Zero friction - no download, no learning curve. Meets users where they already are.",judge:"Taufan"},{q:"How do you prevent gaming/fraud?",a:"Demo has fraud flags. Production would track: rapid quiz completion, suspicious BI patterns, location mismatches, anomaly detection.",judge:"William"}],_n=[{time:"10:00",event:"Registration & Lunch",action:"Arrive EARLY. Set up workspace. Test WiFi."},{time:"13:15",event:"Opening",action:"Listen for any rule changes or hints from CEO/CTO speech."},{time:"13:30",event:"Hackathon Start",action:"Already have code ready. Focus on polish & demo prep."},{time:"18:00",event:"Dinner + Mentoring 1",action:"⭐ CRITICAL: Get feedback from Alexander Li or Rofi on AI implementation."},{time:"22:00",event:"Late Night Hack",action:"Fix bugs, prepare demo script, practice pitch."},{time:"08:00",event:"Day 2 Breakfast",action:"Rest well. Fresh mind for final push."},{time:"10:00",event:"Mentoring 2",action:"⭐ LAST CHANCE: Get final feedback, fix critical issues."},{time:"13:00",event:"Hackathon End",action:"STOP CODING. Focus 100% on presentation."},{time:"13:30",event:"Demo & Judging",action:"10 mins per team. Be READY when called."},{time:"16:30",event:"Winner Announcement",action:"🏆 VICTORY!"}],wn=[{icon:"🎯",title:"Lead with Taufan's Mission",tip:"Open with: 'We help Amartha's 1M+ micro-entrepreneurs escape poverty through AI-powered financial literacy.' This is HIS life's work."},{icon:"📊",title:"Show Real Numbers",tip:"15-week curriculum, 25 business categories, 5 maturity levels, 225 quiz questions, real-time BI analysis. Concrete > Abstract."},{icon:"🔥",title:"Live Demo is KING",tip:"Registration → Quiz → Image Analysis → Dashboard SSE update. Show the MAGIC of real-time sync!"},{icon:"💡",title:"Technical Depth for William",tip:"Mention: Gemini 2.5 Flash tool calling, RAG retrieval, SSE real-time, SOLID architecture, rate limiting, input validation."},{icon:"🎭",title:"Emotional Story Arc",tip:"Start with /demo:baru (struggling new user) → Show journey → End with /demo:lulus (graduated success). Make judges FEEL the impact."},{icon:"⚡",title:"Speed = Confidence",tip:"Pre-load everything. Demo commands ready to paste. Every second of smooth demo = trust in your competence."},{icon:"🏆",title:"Close with Vision",tip:"End: 'This isn't just a chatbot - it's a pathway out of poverty. With Amartha's reach, we can transform millions of lives.'"}],zn=[{step:1,action:"Open Dashboard + WhatsApp side by side",speak:'"Let me show you Akademi-AI in action."'},{step:2,action:"Send /demo:baru",speak:'"Meet Siti, a new micro-entrepreneur with zero financial literacy."'},{step:3,action:"Show dashboard - user appears",speak:'"Real-time sync - field agents see new registrations instantly."'},{step:4,action:'Send "kuis"',speak:'"Siti starts her financial literacy journey with interactive quizzes."'},{step:5,action:"Answer 2 questions",speak:'"Gamified learning - she needs 100% to pass each week."'},{step:6,action:"Send photo with caption",speak:'"She can also send business photos for AI analysis."'},{step:7,action:"Show BI card with NEW badge",speak:'"Dashboard updates in real-time with extracted business intelligence."'},{step:8,action:'Send "cek data"',speak:'"Siti can check her profile, loan status, and progress anytime."'},{step:9,action:"Show /demo:lulus user",speak:'"After 15 weeks, she graduates - financially literate and loan-ready."'},{step:10,action:"Close",speak:'"This is how we transform 1 million Sitis into empowered entrepreneurs."'}],Sn=[{question:"How did you choose which data to analyze from the dataset?",context:"Judges want to see your data discovery and prioritization process.",best:"I started by profiling all 5 CSV files to understand their structure. I identified that loan_snapshots.csv has DPD (Days Past Due) which is the key delinquency indicator. bills.csv with 599K records gives payment behavior history. I prioritized these because payment history is the #1 predictor of default in credit risk literature. The GPS data in tasks.csv was a bonus for operational insights.",okay:"I looked at the files and picked the ones with the most useful columns like DPD and payment dates.",bad:"I just loaded all the data and ran some calculations on it."},{question:"Why did you choose these specific metrics for risk prediction?",context:"Tests your understanding of credit risk fundamentals.",best:"I selected 4 factors based on credit scoring best practices: (1) Payment ratio - historical discipline, (2) Late ratio - behavioral pattern, (3) DPD - current status, (4) Business type - income stability proxy. These map to the 5 C's of credit: Character (payment history), Capacity (business type), and Conditions (current DPD). I weighted them based on predictive power - payment history gets 30 points because it's the strongest predictor.",okay:"I picked metrics that seemed related to whether someone would pay back their loan.",bad:"I just used all the numbers available in the dataset."},{question:"How accurate is your risk prediction model?",context:"Tests your understanding of model validation.",best:"This is a rule-based scoring model, not ML, so accuracy isn't measured traditionally. However, I validated it by checking that high-risk customers (score 80+) have avg DPD of 90+ days and payment ratio under 30%, while low-risk (score <30) have 0 DPD and 90%+ payment ratio. The model correctly separates these populations. For production, I'd train a logistic regression on historical defaults and measure AUC-ROC.",okay:"I checked that customers with high scores have bad payment history.",bad:"I didn't test it, but the formula makes sense."},{question:"What insights did you find that surprised you?",context:"Shows depth of analysis and curiosity.",best:"Three surprises: (1) 18% late payment rate is higher than I expected for microfinance - indicates cash flow timing issues. (2) Farming businesses have 15% higher risk scores than retail, likely due to seasonal income. (3) Some branches have 5+ hour delays between scheduled and actual visits - huge operational inefficiency. These insights directly inform interventions: flexible payment dates for farmers, route optimization for field agents.",okay:"I found that some customers pay late more often than others.",bad:"Nothing really surprised me, the data was pretty straightforward."},{question:"How would you improve this analysis with more time?",context:"Shows you understand limitations and have vision.",best:"Three improvements: (1) Train actual ML model (XGBoost/LightGBM) on historical defaults for better accuracy. (2) Add time-series analysis - predict WHEN a customer will default, not just IF. (3) Incorporate the 200 images - use Gemini Vision to extract business health indicators and correlate with default rates. (4) Build a recommendation engine that suggests specific interventions per customer segment.",okay:"I would add more features and maybe use machine learning.",bad:"I think it's pretty complete already."},{question:"How does your segmentation help field agents?",context:"Tests practical business application.",best:"Each segment has specific, actionable recommendations. Star Performers (8,900 customers) - don't waste time visiting, offer loan increases remotely. High Risk (1,400) - prioritize for immediate visits, bring restructuring options. Needs Attention (300) - send payment reminders 3 days before due date. This lets field agents focus their limited time on customers who need intervention most, potentially increasing collection efficiency by 30%.",okay:"Field agents can see which customers are risky and visit them first.",bad:"It shows different groups of customers."},{question:"What's the business value of your route analysis?",context:"Tests ROI thinking.",best:"Branches with 'Poor' efficiency have 5+ hour delays and high geographic spread. If a field agent does 10 visits/day and wastes 2 hours on travel, that's 20% productivity loss. With 160K tasks/year, optimizing routes could save 32K hours annually. At Rp 50K/hour, that's Rp 1.6B in savings. Plus faster collections improve cash flow and reduce defaults.",okay:"Field agents can plan better routes and save time.",bad:"It shows where the visits are on a map."},{question:"How did you handle data quality issues?",context:"Shows attention to detail and engineering rigor.",best:"I found several issues: (1) Some GPS coordinates were 0,0 or invalid - filtered these out before analysis. (2) Some bills had no paid_date but had paid_amount - treated as unpaid. (3) Customer IDs are hashed - joined tables using loan_id as intermediate key. (4) Business purpose field had inconsistent naming - used keyword matching (contains 'warung' OR 'dagang' → retail) for categorization.",okay:"I filtered out rows with missing data.",bad:"The data was clean, I didn't have any issues."},{question:"Why didn't you use machine learning for predictions?",context:"Tests pragmatism vs over-engineering.",best:"For a hackathon with limited time, a rule-based model was the right choice. It's interpretable - I can explain exactly why a customer is high risk. It's fast to implement and doesn't need training data split. For production, I'd use ML, but the rule-based model actually performs well for this use case because the features (payment ratio, DPD) have clear, monotonic relationships with default risk.",okay:"I didn't have enough time to train a machine learning model.",bad:"Machine learning is overkill for this problem."},{question:"How would this scale to Amartha's full dataset?",context:"Tests production thinking.",best:"Current implementation loads CSVs into memory - works for 12K customers but not 1M+. For production: (1) Move to BigQuery for analytics queries. (2) Pre-compute risk scores nightly and store in Firestore. (3) Use Cloud Functions for on-demand recalculation. (4) Add caching layer (Redis) for dashboard. The scoring logic itself is O(1) per customer, so computation scales linearly.",okay:"I would use a database instead of loading files into memory.",bad:"It should work fine, Node.js can handle a lot of data."},{question:"What ethical considerations did you think about?",context:"Shows maturity and responsibility.",best:"Three considerations: (1) Bias - business type scoring could disadvantage farmers unfairly; I'd validate this doesn't create discriminatory outcomes. (2) Transparency - borrowers should understand why they're flagged high-risk. (3) Privacy - customer IDs are hashed, but combined data could still identify individuals; need proper access controls. I'd recommend an ethics review before production deployment.",okay:"I made sure not to use any personal information directly.",bad:"I didn't think about ethics, it's just data analysis."},{question:"How do you validate that your insights are actionable?",context:"Tests practical impact thinking.",best:"I designed each insight with a specific action in mind. Risk prediction → field agent visit prioritization. Payment trends → seasonal payment flexibility. Segmentation → targeted literacy content. Route analysis → visit scheduling optimization. The test is: can a field agent or credit analyst DO something different tomorrow based on this insight? If yes, it's actionable.",okay:"The insights show useful information that people can use.",bad:"The data speaks for itself."}],Cn=["✅ Dashboard open: /demo page","✅ WhatsApp open on phone","✅ /demo:reset sent (clean slate)","✅ Demo commands copied","✅ Backup screenshots ready","✅ Phone charged > 80%","✅ Internet tested & stable","✅ Pitch script memorized","✅ Timer set for 9 minutes","✅ Water bottle ready"];function Bn(){return e("div",{style:{padding:"20px",maxWidth:"1100px",margin:"0 auto"},children:[e("div",{style:{textAlign:"center",marginBottom:"32px",padding:"24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",color:"#fff"},children:[e(Ji,{size:48,style:{marginBottom:"12px"}}),e("h1",{style:{margin:"0 0 8px 0",fontSize:"28px"},children:"🏆 War Room: Amartha x GDG Hackathon 🏆"}),e("p",{style:{margin:0,opacity:.9},children:"Nov 28-29, 2025 • Amartha Village • TOP 15 FINALIST"})]}),e("div",{style:{background:"linear-gradient(135deg, #ff9a56 0%, #ff6b6b 100%)",padding:"24px",borderRadius:"12px",marginBottom:"24px",color:"#fff"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e(Pi,{size:28}),e("h2",{style:{margin:0},children:"You're Already in the TOP 15! 🔥"})]}),e("p",{style:{margin:0,lineHeight:1.8,fontSize:"15px"},children:["Out of ALL the teams that applied, YOU made it to the finals. Your idea is validated. Your code works. Now it's about ",e("strong",{children:"execution and presentation"}),". The judges want to be impressed - give them a reason to pick YOU.",e("br",{}),e("br",{}),"Remember: ",e("strong",{children:"Andi Taufan built Amartha to fight poverty"}),". Show him how YOUR solution amplifies that mission. Make him see the faces of the millions of Ibus whose lives will change. That's how you win. 💪"]})]}),e("div",{style:{background:"#fff",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #e0e0e0"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#1565c0"},children:[e(Yi,{size:22})," Know Your Judges"]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:bn.map((t,i)=>e("div",{style:{background:"#e3f2fd",padding:"14px",borderRadius:"8px",borderLeft:"4px solid #1976d2"},children:[e("div",{style:{fontWeight:700,color:"#1565c0",marginBottom:"4px"},children:t.name}),e("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:t.role}),e("div",{style:{fontSize:"13px",color:"#333",lineHeight:1.5},children:["💡 ",t.tip]})]},i))})]}),e("div",{style:{background:"#f3e5f5",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #ce93d8"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#7b1fa2"},children:[e(Lt,{size:22})," Critical Timeline"]}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"8px"},children:_n.map((t,i)=>e("div",{style:{background:"#fff",padding:"10px 14px",borderRadius:"6px",display:"flex",gap:"12px",alignItems:"flex-start"},children:[e("div",{style:{fontWeight:700,color:"#7b1fa2",minWidth:"50px",fontSize:"13px"},children:t.time}),e("div",{children:[e("div",{style:{fontWeight:600,fontSize:"13px",color:"#333"},children:t.event}),e("div",{style:{fontSize:"12px",color:"#666"},children:t.action})]})]},i))})]}),e("div",{style:{background:"#fff",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #e0e0e0"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#c62828"},children:[e(Se,{size:22})," Hard Questions & Killer Answers"]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:kn.map((t,i)=>e("div",{style:{background:"#fafafa",padding:"12px 14px",borderRadius:"6px",borderLeft:"4px solid #f44336"},children:[e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"6px"},children:[e("div",{style:{fontWeight:600,color:"#c62828",fontSize:"13px",flex:1},children:["Q: ",t.q]}),e("span",{style:{background:"#e3f2fd",color:"#1565c0",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:600},children:t.judge})]}),e("div",{style:{color:"#333",fontSize:"12px",lineHeight:1.6},children:["A: ",t.a]})]},i))})]}),e("div",{style:{background:"#e8f5e9",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #a5d6a7"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#2e7d32"},children:[e(ze,{size:22})," Winning Strategies"]}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"12px"},children:wn.map((t,i)=>e("div",{style:{background:"#fff",padding:"14px",borderRadius:"6px",border:"1px solid #c8e6c9"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e("span",{style:{fontSize:"22px"},children:t.icon}),e("strong",{style:{color:"#2e7d32",fontSize:"14px"},children:t.title})]}),e("div",{style:{color:"#555",fontSize:"13px",lineHeight:1.6},children:t.tip})]},i))})]}),e("div",{style:{background:"linear-gradient(135deg, #1a237e 0%, #283593 100%)",padding:"24px",borderRadius:"12px",marginBottom:"24px",color:"#fff"},children:[e("h2",{style:{margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[e(Ei,{size:24})," 📊 Data Analytics Deep Dive Q&A"]}),e("p",{style:{margin:0,opacity:.9,fontSize:"14px"},children:"Judges will probe your data analysis methodology. Here are 12 likely questions with Best / Okay / Bad answer examples."})]}),Sn.map((t,i)=>e("div",{style:{background:"#fff",padding:"20px",borderRadius:"8px",marginBottom:"16px",border:"1px solid #e0e0e0"},children:[e("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e("div",{style:{background:"#1a237e",color:"#fff",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:700,flexShrink:0},children:i+1}),e("div",{children:[e("div",{style:{fontWeight:700,fontSize:"15px",color:"#1a237e",marginBottom:"4px"},children:['"',t.question,'"']}),e("div",{style:{fontSize:"12px",color:"#666",fontStyle:"italic"},children:t.context})]})]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginLeft:"40px"},children:[e("div",{style:{background:"#e8f5e9",padding:"12px 14px",borderRadius:"6px",borderLeft:"4px solid #4caf50"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:e("span",{style:{background:"#4caf50",color:"#fff",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:700},children:"✅ BEST ANSWER"})}),e("div",{style:{fontSize:"13px",color:"#2e7d32",lineHeight:1.7},children:t.best})]}),e("div",{style:{background:"#fff3e0",padding:"12px 14px",borderRadius:"6px",borderLeft:"4px solid #ff9800"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:e("span",{style:{background:"#ff9800",color:"#fff",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:700},children:"😐 OKAY ANSWER"})}),e("div",{style:{fontSize:"13px",color:"#e65100",lineHeight:1.7},children:t.okay})]}),e("div",{style:{background:"#ffebee",padding:"12px 14px",borderRadius:"6px",borderLeft:"4px solid #f44336"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:e("span",{style:{background:"#f44336",color:"#fff",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:700},children:"❌ BAD ANSWER"})}),e("div",{style:{fontSize:"13px",color:"#c62828",lineHeight:1.7},children:t.bad})]})]})]},i)),e("div",{style:{background:"#fff3e0",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #ffcc80"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#e65100"},children:[e(Kt,{size:22})," 10-Minute Demo Script"]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:zn.map((t,i)=>e("div",{style:{background:"#fff",padding:"12px 14px",borderRadius:"6px",display:"flex",gap:"12px",alignItems:"flex-start"},children:[e("div",{style:{background:"#ff9800",color:"#fff",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:700,flexShrink:0},children:t.step}),e("div",{style:{flex:1},children:[e("div",{style:{fontWeight:600,fontSize:"13px",color:"#333",marginBottom:"4px"},children:t.action}),e("div",{style:{fontSize:"12px",color:"#e65100",fontStyle:"italic"},children:t.speak})]})]},i))})]}),e("div",{style:{background:"#e0f7fa",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #80deea"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#00838f"},children:[e(J,{size:22})," Key Mentors to Approach"]}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"10px"},children:vn.map((t,i)=>e("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px"},children:[e("div",{style:{fontWeight:600,fontSize:"14px",color:"#00838f"},children:t.name}),e("div",{style:{fontSize:"11px",color:"#666",marginBottom:"6px"},children:t.role}),e("div",{style:{fontSize:"12px",color:"#333"},children:["Ask about: ",e("strong",{children:t.focus})]})]},i))})]}),e("div",{style:{background:"#fce4ec",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #f48fb1"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#c2185b"},children:[e(Ue,{size:22})," Pre-Demo Checklist"]}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"13px"},children:Cn.map((t,i)=>e("div",{style:{padding:"8px 12px",background:"#fff",borderRadius:"4px"},children:t},i))})]}),e("div",{style:{textAlign:"center",padding:"32px",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",borderRadius:"12px",color:"#fff"},children:[e("h2",{style:{margin:"0 0 16px 0",fontSize:"24px"},children:"🌟 You've Got This! 🌟"}),e("p",{style:{margin:0,fontSize:"16px",lineHeight:1.8,maxWidth:"600px",marginLeft:"auto",marginRight:"auto"},children:["You built something ",e("strong",{children:"real"})," that can change ",e("strong",{children:"millions of lives"}),".",e("br",{}),e("br",{}),"Walk in there with confidence. You're not just presenting code - you're presenting a ",e("strong",{children:"solution to poverty"}),".",e("br",{}),e("br",{}),e("strong",{children:"Now go WIN this thing! 🏆"})]})]})]})}const xe=[{id:"data",num:"1",label:"Data",icon:Wt},{id:"questions",num:"2",label:"Questions",icon:Oe},{id:"engineering",num:"3",label:"ETL",icon:Pt},{id:"risk",num:"4",label:"Risk Model",icon:Se},{id:"segments",num:"5",label:"Segments",icon:ze},{id:"payments",num:"6",label:"Behavior",icon:Ge},{id:"collections",num:"7",label:"Operations",icon:Tt},{id:"routes",num:"8",label:"Geospatial",icon:re}],An=({activeSection:t})=>e("nav",{class:"floating-nav",style:"position: fixed; right: 24px; top: 50%; transform: translateY(-50%); z-index: 100; display: flex; flex-direction: column; gap: 6px;",children:xe.map(({id:i,num:n,label:r})=>{const s=t===i;return e("a",{href:`#${i}`,style:`display: flex; align-items: center; gap: 8px; padding: 6px 12px; border-radius: 20px; text-decoration: none; font-size: 11px; font-weight: 600; background: ${s?"#7B3F9E":"white"}; color: ${s?"white":"#6B7280"}; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border: 1px solid ${s?"#7B3F9E":"#E5E7EB"};`,children:[e("span",{style:`width: 18px; height: 18px; border-radius: 50%; background: ${s?"rgba(255,255,255,0.2)":"#F3F4F6"}; display: flex; align-items: center; justify-content: center; font-size: 10px; flex-shrink: 0;`,children:n}),e("span",{children:r})]},i)})}),En=({data:t,height:i=180,barColor:n="#7B3F9E"})=>{if(!t?.length)return null;const r=Math.max(...t.map(s=>s.value));return e("div",{style:`display: flex; align-items: flex-end; gap: 4px; height: ${i}px; padding: 10px 0;`,children:t.map((s,o)=>e("div",{style:"flex: 1; display: flex; flex-direction: column; align-items: center;",children:[e("div",{style:`width: 100%; background: ${n}; border-radius: 4px 4px 0 0; height: ${s.value/r*(i-40)}px; min-height: 4px;`}),e("div",{style:"font-size: 10px; color: #6B7280; margin-top: 4px;",children:s.label})]},o))})},X=({id:t,number:i,title:n,subtitle:r,icon:s})=>e("div",{id:t,style:"margin: 48px 0 24px 0; padding-bottom: 16px; border-bottom: 2px solid #E5E7EB; scroll-margin-top: 80px;",children:e("div",{style:"display: flex; align-items: center; gap: 12px;",children:[e("div",{style:"width: 40px; height: 40px; background: #7B3F9E; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 18px;",children:i}),e("div",{children:[e("div",{style:"font-size: 22px; font-weight: 700; color: #1F2937; display: flex; align-items: center; gap: 8px;",children:[s&&e(s,{size:24})," ",n]}),r&&e("div",{style:"font-size: 14px; color: #6B7280; margin-top: 2px;",children:r})]})]})});function Mn(){const[t,i]=M(!0),[n,r]=M({}),[s,o]=M("data"),[l,h]=M("markers"),[y,u]=M(null);if(q(()=>{(async()=>{try{const[p,k,w,v,A,z]=await Promise.all([fetch(`${N}/api/analytics/summary`).then(_=>_.json()),fetch(`${N}/api/analytics/payments`).then(_=>_.json()),fetch(`${N}/api/analytics/segments`).then(_=>_.json()),fetch(`${N}/api/analytics/routes`).then(_=>_.json()),fetch(`${N}/api/analytics/risk/all?limit=30`).then(_=>_.json()),fetch(`${N}/api/analytics/collections`).then(_=>_.json()).catch(()=>null)]);r({summary:p,payments:k,segments:w,routes:v,risks:A,collections:z})}catch(p){console.error(p)}i(!1)})()},[]),q(()=>{if(t||!n.routes?.length||typeof L>"u"||!document.getElementById("routes-map"))return;const k=z=>z.locations?.find(c=>c.lat&&c.lng&&Math.abs(c.lat)>1&&Math.abs(c.lat)<12&&c.lng>90&&c.lng<145)||null;let w=y;w||(w=L.map("routes-map").setView([-6,110],5),L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:"© CartoDB © OSM"}).addTo(w),u(w)),w.eachLayer(z=>{z._url||w.removeLayer(z)});const v=n.routes,A=z=>z==="Good"?"#059669":z==="Moderate"?"#D97706":"#DC2626";l==="markers"?v.forEach(z=>{const _=k(z);_&&L.circleMarker([_.lat,_.lng],{radius:Math.min(14,5+z.taskCount/500),fillColor:A(z.efficiency),color:"#fff",weight:3,fillOpacity:.9}).addTo(w).bindPopup(`<b>${z.branchId}</b><br/>Tasks: ${z.taskCount?.toLocaleString()}<br/>Spread: ${z.avgSpreadKm}km<br/>Efficiency: <b>${z.efficiency}</b>`)}):l==="tasks"?v.forEach(z=>{z.locations?.slice(0,15).forEach(_=>{!_.lat||!_.lng||Math.abs(_.lat)<1||Math.abs(_.lat)>12||_.lng<90||_.lng>145||L.circleMarker([_.lat,_.lng],{radius:5,fillColor:A(z.efficiency),color:"#fff",weight:2,fillOpacity:.85}).addTo(w)})}):l==="routes"?v.slice(0,10).forEach(z=>{const _=z.locations?.filter(c=>c.lat&&c.lng&&Math.abs(c.lat)>1&&Math.abs(c.lat)<12&&c.lng>90&&c.lng<145).slice(0,20);_?.length>1&&(L.polyline(_.map(c=>[c.lat,c.lng]),{color:A(z.efficiency),weight:3,opacity:.8}).addTo(w),L.circleMarker([_[0].lat,_[0].lng],{radius:8,fillColor:"#1D4ED8",color:"#fff",weight:3,fillOpacity:1}).addTo(w).bindPopup(`Start: ${z.branchId}`))}):l==="coverage"&&v.forEach(z=>{const _=k(z);!_||z.avgSpreadKm>5e3||(L.circle([_.lat,_.lng],{radius:Math.min(z.avgSpreadKm*200,1e5),fillColor:A(z.efficiency),color:A(z.efficiency),weight:2,fillOpacity:.25}).addTo(w),L.circleMarker([_.lat,_.lng],{radius:5,fillColor:A(z.efficiency),color:"#fff",weight:2,fillOpacity:1}).addTo(w).bindPopup(`${z.branchId}<br/>Spread: ${z.avgSpreadKm}km`))})},[t,n.routes,l]),q(()=>{const p=()=>{const k=window.scrollY+150;for(let w=xe.length-1;w>=0;w--){const v=document.getElementById(xe[w].id);if(v&&v.offsetTop<=k){o(xe[w].id);break}}};return window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)},[]),t)return e("div",{class:"card",style:"text-align: center; padding: 80px;",children:[e(Ni,{size:48,class:"spin",style:"color: #7B3F9E;"}),e("div",{style:"font-size: 18px; color: #374151; margin-top: 16px;",children:"Loading Analytics..."})]});const{summary:f,payments:a,segments:d,routes:g,risks:S,collections:C}=n;return e("div",{style:"max-width: 1000px; margin: 0 auto;",children:[e(An,{activeSection:s}),e("div",{style:"text-align: center; padding: 40px 20px; background: linear-gradient(135deg, #E1261B 0%, #B81D15 100%); border-radius: 12px; color: white; margin-bottom: 24px;",children:[e("div",{style:"font-size: 12px; text-transform: uppercase; letter-spacing: 2px; opacity: 0.7;",children:"UMKM Intelligence Platform"}),e("div",{style:"font-size: 32px; font-weight: 800; margin: 8px 0;",children:"Credit Risk Intelligence Platform"}),e("div",{style:"font-size: 15px; opacity: 0.9; max-width: 600px; margin: 0 auto;",children:["From raw data to actionable insights: predicting defaults, optimizing collections, and improving field agent efficiency using ",e("strong",{children:"AI-powered analytics"})]})]}),e("div",{class:"card",style:"background: linear-gradient(135deg, #FEFCE8 0%, #FEF9C3 100%); border: 1px solid #FDE047; margin-bottom: 32px;",children:[e("div",{style:"display: flex; align-items: center; gap: 8px; margin-bottom: 16px;",children:[e("span",{style:"font-size: 20px;",children:"🎯"}),e("h3",{style:"margin: 0; color: #854D0E;",children:"Executive Summary — Key Findings"})]}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;",children:[e("div",{style:"padding: 12px; background: white; border-radius: 8px; border-left: 4px solid #EF4444;",children:[e("div",{style:"font-size: 11px; color: #6B7280; text-transform: uppercase; letter-spacing: 0.5px;",children:"Risk Identification"}),e("div",{style:"font-size: 20px; font-weight: 700; color: #EF4444;",children:f?.riskDistribution?.High?.toLocaleString()||"~1,400"}),e("div",{style:"font-size: 12px; color: #374151;",children:"high-risk customers flagged for intervention"})]}),e("div",{style:"padding: 12px; background: white; border-radius: 8px; border-left: 4px solid #10B981;",children:[e("div",{style:"font-size: 11px; color: #6B7280; text-transform: uppercase; letter-spacing: 0.5px;",children:"Collection Performance"}),e("div",{style:"font-size: 20px; font-weight: 700; color: #10B981;",children:["Rp ",C?.totalCollectedB||43,"B"]}),e("div",{style:"font-size: 12px; color: #374151;",children:["collected across ",C?.topBranches?.length||87," branches"]})]}),e("div",{style:"padding: 12px; background: white; border-radius: 8px; border-left: 4px solid #F59E0B;",children:[e("div",{style:"font-size: 11px; color: #6B7280; text-transform: uppercase; letter-spacing: 0.5px;",children:"Operational Insight"}),e("div",{style:"font-size: 20px; font-weight: 700; color: #F59E0B;",children:[g?.filter(p=>p.efficiency==="Poor").length||"~30","%"]}),e("div",{style:"font-size: 12px; color: #374151;",children:"branches with route optimization opportunity"})]})]}),e("div",{style:"margin-top: 16px; padding-top: 12px; border-top: 1px dashed #FDE047; font-size: 12px; color: #713F12;",children:[e("strong",{children:"TL;DR:"})," We built an end-to-end analytics pipeline that identifies at-risk borrowers, benchmarks branch performance, and reveals field operations inefficiencies — enabling data-driven decisions across credit, collections, and operations teams."]})]}),(()=>{const p=["data","questions","engineering"].includes(s)?1:["risk","segments"].includes(s)?2:3;return e("div",{style:"display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 32px; padding: 12px; background: #F9FAFB; border-radius: 8px; font-size: 11px; color: #6B7280;",children:[e("span",{style:`padding: 4px 10px; border-radius: 12px; ${p===1?"background: #7B3F9E; color: white;":"background: #E5E7EB;"}`,children:"1-3 Discovery"}),e("span",{children:"→"}),e("span",{style:`padding: 4px 10px; border-radius: 12px; ${p===2?"background: #7B3F9E; color: white;":"background: #E5E7EB;"}`,children:"4-5 Insights"}),e("span",{children:"→"}),e("span",{style:`padding: 4px 10px; border-radius: 12px; ${p===3?"background: #7B3F9E; color: white;":"background: #E5E7EB;"}`,children:"6-8 Operations"}),e("span",{style:"margin-left: 8px; font-style: italic;",children:[p===1&&"📖 Understanding the data...",p===2&&"🔍 Extracting insights...",p===3&&"⚙️ Operational recommendations..."]})]})})(),e(X,{id:"data",number:"1",title:"Data Profiling & Discovery",subtitle:"Exploratory Data Analysis (EDA) of the hackathon dataset",icon:Wt}),e("div",{class:"card",children:[e("p",{style:"color: #4B5563; margin-bottom: 16px;",children:["We received ",e("strong",{children:"5 denormalized CSV files"})," representing Amartha's microfinance operations. Our first step: ",e("strong",{children:"data profiling"})," — understanding schema, cardinality, and identifying the target variable for our predictive model."]}),e("table",{class:"data-table",children:[e("thead",{children:e("tr",{children:[e("th",{children:"Dataset"}),e("th",{children:"Records"}),e("th",{children:"Key Attributes"}),e("th",{children:"Role in Analysis"})]})}),e("tbody",{children:[e("tr",{children:[e("td",{children:e("code",{children:"customers"})}),e("td",{children:"12,021"}),e("td",{children:"customer_number, purpose"}),e("td",{style:"font-size: 11px; color: #6B7280;",children:"Dimension table (customer profile)"})]}),e("tr",{children:[e("td",{children:e("code",{children:"loan_snapshots"})}),e("td",{children:"12,021"}),e("td",{children:["loan_id, principal, ",e("strong",{style:"color: #EF4444;",children:"dpd"})]}),e("td",{style:"font-size: 11px; color: #EF4444;",children:"⭐ Target variable (DPD = Days Past Due)"})]}),e("tr",{children:[e("td",{children:e("code",{children:"bills"})}),e("td",{children:"599,184"}),e("td",{children:"scheduled_date, paid_date"}),e("td",{style:"font-size: 11px; color: #6B7280;",children:"Fact table (payment transactions)"})]}),e("tr",{children:[e("td",{children:e("code",{children:"tasks"})}),e("td",{children:"160,334"}),e("td",{children:"lat, lng, timestamps"}),e("td",{style:"font-size: 11px; color: #6B7280;",children:"Geospatial data (field visits)"})]}),e("tr",{children:[e("td",{children:e("code",{children:"task_participants"})}),e("td",{children:"1,330,909"}),e("td",{children:"payment_amount"}),e("td",{style:"font-size: 11px; color: #10B981;",children:"✓ Processed (collection amounts)"})]})]})]}),e("div",{style:"margin-top: 12px; padding: 10px; background: #F0FDF4; border-radius: 6px; font-size: 12px; color: #065F46;",children:[e("strong",{children:"Technical note:"})," DPD (Days Past Due) is the industry-standard metric for credit delinquency. DPD ",">"," 30 typically indicates default risk. This becomes our ",e("strong",{children:"supervised learning target"}),"."]})]}),e("div",{class:"so-what-box",style:"margin-top: 16px;",children:[e("div",{class:"so-what-title",children:"💡 Data Insight"}),e("div",{class:"so-what-text",children:["Each customer averages ~50 bill records (599K ÷ 12K). This ",e("strong",{children:"longitudinal payment history"})," enables us to engineer behavioral features like payment consistency and late payment ratio — far more predictive than static demographics. In credit scoring literature, this is called ",e("strong",{children:"trended data"})," and typically improves model lift by 15-25%."]})]}),e(X,{id:"questions",number:"2",title:"Problem Framing",subtitle:"Defining business questions before building models",icon:Oe}),e("div",{class:"card",style:"margin-bottom: 16px;",children:e("p",{style:"color: #4B5563; margin: 0;",children:["Following the ",e("strong",{children:"CRISP-DM methodology"}),", we started with business understanding: ",e("em",{children:'"What decisions will this analysis inform?"'})," This prevents building technically impressive but business-irrelevant models."]})}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 12px;",children:[{q:"Can we predict defaults?",a:"Yes → DPD + payment history",ok:!0},{q:"Collection performance?",a:"Yes → bills scheduled vs paid",ok:!0},{q:"Which businesses are riskier?",a:"Yes → purpose field analysis",ok:!0},{q:"Field agent efficiency?",a:"Yes → GPS + timestamps",ok:!0}].map((p,k)=>e("div",{style:`padding: 14px; background: ${p.ok?"#ECFDF5":"#FFFBEB"}; border-left: 4px solid ${p.ok?"#059669":"#D97706"}; border-radius: 0 8px 8px 0;`,children:[e("div",{style:`font-weight: 600; font-size: 14px; color: ${p.ok?"#065F46":"#92400E"};`,children:[p.ok?"✅":"⏳"," ",p.q]}),e("div",{style:`font-size: 12px; color: ${p.ok?"#047857":"#B45309"}; margin-top: 4px;`,children:p.a})]},k))}),e(X,{id:"engineering",number:"3",title:"ETL & Feature Engineering",subtitle:"Data pipeline: Extract, Transform, Load + feature creation",icon:Pt}),e("div",{class:"card",style:"margin-bottom: 16px;",children:[e("p",{style:"color: #4B5563; margin: 0 0 16px 0;",children:[e("strong",{children:"Challenge:"})," The bills table (600K rows) has no direct customer foreign key — only loan_id. We built an ",e("strong",{children:"ETL pipeline"})," to denormalize and aggregate at the customer grain."]}),e("div",{style:"background: #1F2937; color: #E5E7EB; padding: 16px; border-radius: 8px; font-family: monospace; font-size: 13px; line-height: 1.8;",children:[e("span",{style:"color: #6B7280;",children:"-- Star schema join strategy"}),e("br",{}),e("span",{style:"color: #93C5FD;",children:"customers"})," (12K) ",e("span",{style:"color: #6B7280;",children:"-- dimension"}),e("br",{}),"  └─→ ",e("span",{style:"color: #93C5FD;",children:"loan_snapshots"})," ",e("span",{style:"color: #6B7280;",children:"ON customer_number"}),e("br",{}),"       └─→ ",e("span",{style:"color: #93C5FD;",children:"bills"})," ",e("span",{style:"color: #6B7280;",children:"ON loan_id (1:N, ~50 per customer)"}),e("br",{}),e("br",{}),e("span",{style:"color: #FCD34D;",children:"-- Aggregated feature vector per customer"}),e("br",{}),e("span",{style:"color: #A5F3FC;",children:"GROUP BY"})," customer → paymentRatio, lateRatio, dpd, businessType"]})]}),e("div",{class:"card",children:[e("h4",{style:"margin: 0 0 12px 0; font-size: 14px; color: #374151;",children:"🔧 Feature Engineering — Derived Predictors"}),e("p",{style:"color: #6B7280; font-size: 12px; margin: 0 0 12px 0;",children:["Raw data rarely predicts well. We engineered ",e("strong",{children:"behavioral features"})," from transaction history:"]}),e("div",{style:"display: flex; flex-wrap: wrap; gap: 8px;",children:[e("span",{style:"padding: 6px 12px; background: #E0E7FF; color: #3730A3; border-radius: 4px; font-size: 12px;",children:[e("strong",{children:"paymentRatio"})," = COUNT(paid) / COUNT(*)"]}),e("span",{style:"padding: 6px 12px; background: #E0E7FF; color: #3730A3; border-radius: 4px; font-size: 12px;",children:[e("strong",{children:"lateRatio"})," = COUNT(late) / COUNT(paid)"]}),e("span",{style:"padding: 6px 12px; background: #FEE2E2; color: #991B1B; border-radius: 4px; font-size: 12px;",children:[e("strong",{children:"dpd"})," = current days past due"]}),e("span",{style:"padding: 6px 12px; background: #FEF3C7; color: #92400E; border-radius: 4px; font-size: 12px;",children:[e("strong",{children:"businessRisk"})," = sector risk adjustment"]})]}),e("div",{style:"margin-top: 12px; padding: 10px; background: #F0FDF4; border-radius: 6px; font-size: 12px; color: #065F46;",children:[e("strong",{children:"Why this matters:"})," These features capture ",e("em",{children:"payment behavior over time"})," — more predictive than point-in-time snapshots. This is the core of ",e("strong",{children:"behavioral credit scoring"}),"."]})]}),e(X,{id:"risk",number:"4",title:"Credit Risk Model",subtitle:"Rule-based scoring inspired by the 5 C's of Credit",icon:Se}),e("div",{class:"stats-grid",style:"margin-bottom: 20px;",children:[e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #10B981;",children:f?.riskDistribution?.Low?.toLocaleString()}),e("div",{class:"stat-label",children:"Low Risk"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #F59E0B;",children:f?.riskDistribution?.Medium?.toLocaleString()}),e("div",{class:"stat-label",children:"Medium Risk"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #EF4444;",children:f?.riskDistribution?.High?.toLocaleString()}),e("div",{class:"stat-label",children:"High Risk"})]})]}),e("div",{class:"card",style:"margin-bottom: 16px; background: linear-gradient(135deg, #FDF4FF 0%, #FAF5FF 100%); border: 1px solid #E9D5FF;",children:[e("h4",{style:"margin: 0 0 12px 0; color: #7C3AED; display: flex; align-items: center; gap: 8px;",children:"📚 Methodology: The 5 C's of Credit"}),e("p",{style:"color: #6B21A8; font-size: 13px; margin: 0 0 12px 0;",children:["Our scoring model is inspired by the traditional ",e("strong",{children:"5 C's of Credit"})," framework used globally by banks:"]}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 8px; font-size: 12px;",children:[e("div",{style:"padding: 8px; background: white; border-radius: 6px; border-left: 3px solid #10B981;",children:[e("strong",{style:"color: #059669;",children:"✓ Character"}),e("div",{style:"color: #6B7280;",children:"→ Payment history (lateRatio)"})]}),e("div",{style:"padding: 8px; background: white; border-radius: 6px; border-left: 3px solid #10B981;",children:[e("strong",{style:"color: #059669;",children:"✓ Capacity"}),e("div",{style:"color: #6B7280;",children:"→ Payment ratio"})]}),e("div",{style:"padding: 8px; background: white; border-radius: 6px; border-left: 3px solid #9CA3AF;",children:[e("strong",{style:"color: #6B7280;",children:"○ Capital"}),e("div",{style:"color: #9CA3AF;",children:"Not in dataset"})]}),e("div",{style:"padding: 8px; background: white; border-radius: 6px; border-left: 3px solid #10B981;",children:[e("strong",{style:"color: #059669;",children:"✓ Conditions"}),e("div",{style:"color: #6B7280;",children:"→ Business type risk"})]}),e("div",{style:"padding: 8px; background: white; border-radius: 6px; border-left: 3px solid #9CA3AF;",children:[e("strong",{style:"color: #6B7280;",children:"○ Collateral"}),e("div",{style:"color: #9CA3AF;",children:"Not in dataset"})]})]})]}),e("div",{class:"card",children:[e("h3",{style:"margin: 0 0 8px 0;",children:"Risk Scoring Formula"}),e("p",{style:"color: #6B7280; font-size: 13px; margin: 0 0 12px 0;",children:"Weighted combination of available 5 C's factors. Score 0-100, higher = riskier."}),e("div",{style:"background: #1F2937; color: #E5E7EB; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 12px;",children:[e("span",{style:"color: #FCD34D;",children:"score"})," = 50",e("br",{}),"  - paymentRatio × 30 ",e("span",{style:"color: #6B7280;",children:"// Capacity: good payers reduce risk"}),e("br",{}),"  + lateRatio × 25 ",e("span",{style:"color: #6B7280;",children:"// Character: late payments increase risk"}),e("br",{}),"  + min(dpd/2, 30) ",e("span",{style:"color: #6B7280;",children:"// Current delinquency status"}),e("br",{}),"  + businessAdj ",e("span",{style:"color: #6B7280;",children:"// Conditions: risky business types +5"})]}),e("h3",{style:"margin: 20px 0 12px 0;",children:"Top High-Risk Customers"}),e("table",{class:"data-table",children:[e("thead",{children:e("tr",{children:[e("th",{children:"Customer"}),e("th",{children:"Score"}),e("th",{children:"Payment%"}),e("th",{children:"Late%"}),e("th",{children:"DPD"})]})}),e("tbody",{children:S?.slice(0,8).map((p,k)=>e("tr",{children:[e("td",{style:"font-family: monospace; font-size: 11px;",children:[p.customerNumber?.slice(0,8),"..."]}),e("td",{children:e("strong",{style:"color: #EF4444;",children:p.riskScore})}),e("td",{children:[p.factors?.paymentRatio,"%"]}),e("td",{children:[p.factors?.lateRatio,"%"]}),e("td",{children:p.factors?.dpd})]},k))})]})]}),e("div",{class:"so-what-box",children:[e("div",{class:"so-what-title",children:"💡 So What?"}),e("div",{class:"so-what-text",children:[e("strong",{children:[f?.riskDistribution?.High?.toLocaleString()," customers (~12%)"]})," are flagged high risk. Field agents should prioritize these for immediate contact before they default. Industry research shows ",e("strong",{children:"early intervention"})," (within 7 days of first missed payment) can recover 40-60% of at-risk loans. This is the ROI of predictive analytics."]})]}),e(X,{id:"segments",number:"5",title:"Customer Segmentation",subtitle:"RFM-inspired clustering for targeted interventions",icon:ze}),e("div",{class:"card",style:"margin-bottom: 16px;",children:e("p",{style:"color: #4B5563; margin: 0;",children:["Using our risk scores, we applied ",e("strong",{children:"rule-based segmentation"})," (inspired by RFM analysis) to group customers into actionable cohorts. Each segment gets a tailored intervention strategy — this is ",e("strong",{children:"prescriptive analytics"})," in action."]})}),e("div",{style:"display: grid; gap: 16px;",children:d&&Object.entries(d).map(([p,k])=>e("div",{class:"card",style:"padding: 0; overflow: hidden;",children:[e("div",{style:`padding: 12px 16px; background: ${p==="star_performers"?"#D1FAE5":p==="high_risk"?"#FEE2E2":"#F3F4F6"};`,children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center;",children:[e("div",{style:"font-weight: 700; text-transform: capitalize;",children:p.replace(/_/g," ")}),e("div",{style:"font-size: 24px; font-weight: 800; color: #7B3F9E;",children:k.count})]}),e("div",{style:"font-size: 12px; color: #6B7280;",children:k.criteria})]}),e("div",{style:"padding: 12px 16px;",children:[e("div",{style:"font-size: 11px; font-weight: 600; color: #6B7280; margin-bottom: 6px;",children:"RECOMMENDED ACTIONS"}),e("ul",{style:"margin: 0; padding-left: 18px; font-size: 13px;",children:k.recommendations?.slice(0,2).map((w,v)=>e("li",{children:w},v))})]})]},p))}),e("div",{class:"so-what-box",style:"margin-top: 16px;",children:[e("div",{class:"so-what-title",children:"💡 Business Impact"}),e("div",{class:"so-what-text",children:["Segmentation enables ",e("strong",{children:"resource optimization"}),". Star performers need minimal attention (automate reminders), while high-risk customers need proactive outreach (prioritize field visits). This ",e("strong",{children:"triage approach"})," can improve field agent productivity by 25% — focusing human effort where it matters most. In operations research, this is the ",e("strong",{children:"Pareto principle"})," applied to collections."]})]}),e(X,{id:"payments",number:"6",title:"Payment Behavior Analysis",subtitle:"Historical cohort analysis of 599K bill transactions",icon:Ge}),e("div",{class:"card",style:"margin-bottom: 16px;",children:e("p",{style:"color: #4B5563; margin: 0;",children:[e("strong",{children:"Collection rate"})," is the lifeblood of microfinance. We performed ",e("strong",{children:"cohort analysis"})," on historical bill records to identify payment patterns, seasonal trends, and segment-level performance. This is ",e("em",{children:"descriptive analytics"})," — understanding what happened."]})}),e("div",{style:"display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 20px;",children:[e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #7B3F9E;",children:["Rp ",a?.summary?.totalScheduledM,"M"]}),e("div",{class:"stat-label",children:"Scheduled (AR)"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #10B981;",children:["Rp ",a?.summary?.totalPaidM,"M"]}),e("div",{class:"stat-label",children:"Collected"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",children:[a?.summary?.overallCollectionRate,"%"]}),e("div",{class:"stat-label",children:"Collection Rate"})]})]}),e("div",{class:"card",children:[e("h3",{style:"margin: 0 0 8px 0;",children:"📈 Monthly Collection Trend"}),e("p",{style:"color: #6B7280; font-size: 12px; margin: 0 0 12px 0;",children:"Time-series view reveals seasonality and operational improvements over the loan lifecycle."}),e(En,{data:a?.monthlyTrend?.slice(-12).map(p=>({label:p.month?.slice(-5),value:p.collectionRate}))})]}),e("div",{class:"card",style:"margin-top: 16px;",children:[e("h3",{style:"margin: 0 0 12px 0;",children:"📊 Risk by Business Sector"}),e("p",{style:"color: #6B7280; font-size: 12px; margin: 0 0 12px 0;",children:"Sector analysis reveals which business types have higher default propensity:"}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px;",children:a?.businessTypeStats?.map((p,k)=>e("div",{style:"padding: 12px; background: #F9FAFB; border-radius: 8px; text-align: center;",children:[e("div",{style:"font-weight: 600; text-transform: capitalize;",children:p.type}),e("div",{style:"font-size: 24px; font-weight: 700; color: #7B3F9E;",children:p.count}),e("div",{style:"font-size: 12px; color: #6B7280;",children:["Avg Risk: ",p.avgRiskScore]})]},k))})]}),e("div",{class:"so-what-box",style:"margin-top: 16px;",children:[e("div",{class:"so-what-title",children:"💡 Business Impact"}),e("div",{class:"so-what-text",children:[e("strong",{children:"Pertanian (farming)"})," shows higher risk due to seasonal cash flow volatility. Recommendation: implement ",e("strong",{children:"flexible repayment schedules"})," aligned with harvest cycles, or offer ",e("strong",{children:"grace periods"})," during planting seasons. This is ",e("em",{children:"product-market fit"})," for agricultural microfinance — matching loan terms to borrower cash flow patterns."]})]}),C&&e($,{children:[e(X,{id:"collections",number:"7",title:"Field Operations Analytics",subtitle:"Real-time branch performance from 1.3M task participant records",icon:Tt}),e("div",{class:"card",style:"margin-bottom: 16px;",children:e("p",{style:"color: #4B5563; margin: 0;",children:["Moving from historical analysis to ",e("strong",{children:"operational intelligence"}),": we processed the ",e("strong",{children:"task_participants.csv"})," (1.3M records) to benchmark field collection effectiveness. This reveals which branches excel at converting visits into payments — critical for ",e("strong",{children:"performance management"})," and ",e("strong",{children:"best practice identification"}),"."]})}),e("div",{style:"display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 20px;",children:[e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #7B3F9E;",children:"1.3M"}),e("div",{class:"stat-label",children:"Records Analyzed"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #10B981;",children:["Rp ",C.totalCollectedB,"B"]}),e("div",{class:"stat-label",children:"Total Collected"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",children:C.paymentsRecorded?.toLocaleString()}),e("div",{class:"stat-label",children:"Transactions"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",children:["Rp ",Math.round(C.avgPaymentRp/1e3),"K"]}),e("div",{class:"stat-label",children:"Avg Ticket Size"})]})]}),e("div",{class:"card",children:[e("h3",{style:"margin: 0 0 12px 0;",children:"🏆 Branch Leaderboard — Top Collectors"}),e("table",{class:"data-table",children:[e("thead",{children:e("tr",{children:[e("th",{children:"Rank"}),e("th",{children:"Branch ID"}),e("th",{children:"Transactions"}),e("th",{children:"Total Collected"}),e("th",{children:"Avg Ticket"})]})}),e("tbody",{children:C.topBranches?.slice(0,10).map((p,k)=>e("tr",{children:[e("td",{style:"font-weight: 700; color: #7B3F9E;",children:["#",k+1]}),e("td",{style:"font-family: monospace; font-size: 11px;",children:p.branchId}),e("td",{children:p.collections?.toLocaleString()}),e("td",{style:"font-weight: 600;",children:["Rp ",Math.round(p.totalRp/1e6),"M"]}),e("td",{children:["Rp ",Math.round(p.avgRp/1e3),"K"]})]},k))})]})]}),e("div",{class:"so-what-box",style:"margin-top: 16px;",children:[e("div",{class:"so-what-title",children:"💡 Business Impact"}),e("div",{class:"so-what-text",children:["Top branch collected ",e("strong",{children:["Rp ",Math.round((C.topBranches?.[0]?.totalRp||0)/1e6),"M"]})," —",Math.round((C.topBranches?.[0]?.totalRp||0)/(C.topBranches?.[9]?.totalRp||1)),"x the 10th branch. This ",e("strong",{children:"variance analysis"})," reveals significant performance gaps. ",e("strong",{children:"Best practice sharing"})," from top performers (scripts, timing, approach) could lift overall collection by 15-20%. In operations management, this is called ",e("strong",{children:"positive deviance"})," — learning from outliers who succeed despite similar constraints."]})]})]}),e(X,{id:"routes",number:"8",title:"Geospatial Intelligence",subtitle:"GPS data mining for route optimization (160K coordinates)",icon:re}),e("div",{class:"card",style:"margin-bottom: 16px;",children:[e("p",{style:"color: #4B5563; margin: 0 0 16px 0;",children:["We analyzed ",e("strong",{children:"160K GPS task records"})," to understand field agent movement patterns. Key metrics: geographic spread (how far agents travel) and delay (time between scheduled and actual visits)."]}),e("div",{style:"background: #F8FAFC; border: 1px solid #E2E8F0; border-radius: 8px; padding: 16px;",children:[e("h4",{style:"margin: 0 0 12px 0; color: #334155; display: flex; align-items: center; gap: 8px;",children:"🔧 Data Cleaning Methodology"}),e("div",{style:"display: grid; gap: 12px; font-size: 13px;",children:[e("div",{style:"display: flex; gap: 12px;",children:[e("div",{style:"min-width: 100px; font-weight: 600; color: #64748B;",children:"Problem:"}),e("div",{style:"color: #475569;",children:["Raw GPS data contained ",e("strong",{children:"outliers"})," and ",e("strong",{children:"null island"})," coordinates (0°, 0°) from failed GPS locks or device errors."]})]}),e("div",{style:"display: flex; gap: 12px;",children:[e("div",{style:"min-width: 100px; font-weight: 600; color: #64748B;",children:"Solution:"}),e("div",{style:"color: #475569;",children:["Applied ",e("strong",{children:"geofencing filter"})," — only coordinates within Indonesia's bounding box: Lat [-12°, 6°], Lng [90°, 145°]."]})]}),e("div",{style:"background: #1E293B; color: #E2E8F0; padding: 10px 12px; border-radius: 6px; font-family: monospace; font-size: 11px;",children:[e("span",{style:"color: #94A3B8;",children:"// Filter: valid Indonesian coordinates only"}),e("br",{}),"isValid = |lat| ",">"," 1 && |lat| ","<"," 12 && lng ",">"," 90 && lng ","<"," 145"]}),e("div",{style:"display: flex; gap: 12px;",children:[e("div",{style:"min-width: 100px; font-weight: 600; color: #64748B;",children:"Layman:"}),e("div",{style:"color: #475569; font-style: italic;",children:'"We threw out GPS points that landed in the ocean or Africa — clearly phone GPS errors, not real visits."'})]})]})]})]}),e("div",{class:"card",style:"margin-bottom: 16px;",children:[e("h4",{style:"margin: 0 0 16px 0; color: #334155;",children:"📊 Visualization Guide — What Each View Shows"}),e("div",{style:"display: grid; gap: 16px;",children:[e("div",{style:"padding: 14px; background: #F0FDF4; border-left: 4px solid #10B981; border-radius: 0 8px 8px 0;",children:[e("div",{style:"font-weight: 700; color: #065F46; margin-bottom: 6px;",children:"🎯 Branches View"}),e("div",{style:"font-size: 12px; color: #047857; margin-bottom: 8px;",children:[e("strong",{children:"Technical:"})," Each branch plotted at its first valid GPS coordinate. Marker radius ∝ task count. Color = efficiency (based on avg delay: 🟢","<","2h, 🟡 2-5h, 🔴",">","5h)."]}),e("div",{style:"font-size: 12px; color: #065F46;",children:[e("strong",{children:"Intuition:"}),' "Where are our branches? Bigger = busier. Red = agents arriving late (',">",'5h delay on average)."']})]}),e("div",{style:"padding: 14px; background: #EFF6FF; border-left: 4px solid #3B82F6; border-radius: 0 8px 8px 0;",children:[e("div",{style:"font-weight: 700; color: #1E40AF; margin-bottom: 6px;",children:"📍 Task Points View"}),e("div",{style:"font-size: 12px; color: #1D4ED8; margin-bottom: 8px;",children:[e("strong",{children:"Technical:"})," Scatter plot of sampled GPS coordinates (15 per branch to avoid overplotting). Shows actual visit locations."]}),e("div",{style:"font-size: 12px; color: #1E40AF;",children:[e("strong",{children:"Intuition:"}),' "Each dot is a real customer visit. Clusters = dense areas. Scattered = agents traveling far."']})]}),e("div",{style:"padding: 14px; background: #FEF3C7; border-left: 4px solid #F59E0B; border-radius: 0 8px 8px 0;",children:[e("div",{style:"font-weight: 700; color: #92400E; margin-bottom: 6px;",children:"🛤️ Routes View"}),e("div",{style:"font-size: 12px; color: #B45309; margin-bottom: 8px;",children:[e("strong",{children:"Technical:"})," Polylines connecting sequential task locations (chronological order). Blue dot = route start. Shows travel path topology."]}),e("div",{style:"font-size: 12px; color: #92400E;",children:[e("strong",{children:"Intuition:"}),' "How do agents move? Zig-zag lines = inefficient backtracking. Straight paths = optimized routes."']})]}),e("div",{style:"padding: 14px; background: #F5F3FF; border-left: 4px solid #8B5CF6; border-radius: 0 8px 8px 0;",children:[e("div",{style:"font-weight: 700; color: #5B21B6; margin-bottom: 6px;",children:"⭕ Coverage View"}),e("div",{style:"font-size: 12px; color: #6D28D9; margin-bottom: 8px;",children:[e("strong",{children:"Technical:"})," Circle radius = avgSpreadKm × 200m (scaled for visibility). Shows geographic dispersion per branch."]}),e("div",{style:"font-size: 12px; color: #5B21B6;",children:[e("strong",{children:"Intuition:"}),' "How spread out are customers? Big circles = agents driving too far. Small circles = efficient territory."']})]})]})]}),e("div",{class:"card",style:"margin-bottom: 16px;",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap; gap: 8px;",children:[e("h3",{style:"margin: 0;",children:"📍 Interactive GPS Map"}),e("div",{style:"display: flex; gap: 6px; flex-wrap: wrap;",children:["markers","tasks","routes","coverage"].map(p=>e("button",{onClick:()=>h(p),style:`padding: 6px 12px; border-radius: 6px; font-size: 11px; font-weight: 600; cursor: pointer; border: 1px solid ${l===p?"#7B3F9E":"#E5E7EB"}; background: ${l===p?"#7B3F9E":"white"}; color: ${l===p?"white":"#6B7280"};`,children:[p==="markers"&&"🎯 Branches",p==="tasks"&&"📍 Task Points",p==="routes"&&"🛤️ Routes",p==="coverage"&&"⭕ Coverage"]},p))})]}),e("div",{id:"routes-map",style:"height: 600px; border-radius: 8px; z-index: 1;"}),e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-top: 10px; font-size: 11px; color: #6B7280;",children:[e("span",{children:[l==="markers"&&"🎯 Branch locations colored by efficiency",l==="tasks"&&"📍 Sample of actual field visit GPS coordinates",l==="routes"&&"🛤️ Agent travel paths showing route patterns",l==="coverage"&&"⭕ Geographic spread per branch"]}),e("span",{style:"display: flex; gap: 12px;",children:[e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 8px; height: 8px; background: #10B981; border-radius: 50%;"})," Good"]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 8px; height: 8px; background: #F59E0B; border-radius: 50%;"})," Moderate"]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 8px; height: 8px; background: #EF4444; border-radius: 50%;"})," Poor"]})]})]})]}),e("div",{class:"card",children:[e("h3",{style:"margin: 0 0 12px 0;",children:"Branch Efficiency Analysis"}),e("table",{class:"data-table",children:[e("thead",{children:e("tr",{children:[e("th",{children:"Branch"}),e("th",{children:"Tasks"}),e("th",{children:"Avg Spread"}),e("th",{children:"Avg Delay"}),e("th",{children:"Efficiency"})]})}),e("tbody",{children:g?.slice(0,8).map((p,k)=>e("tr",{children:[e("td",{style:"font-family: monospace; font-size: 11px;",children:p.branchId}),e("td",{children:p.taskCount?.toLocaleString()}),e("td",{children:[p.avgSpreadKm," km"]}),e("td",{children:[p.avgDelayHours,"h"]}),e("td",{children:e("span",{style:`padding: 2px 8px; border-radius: 4px; font-size: 11px; background: ${p.efficiency==="Good"?"#D1FAE5":p.efficiency==="Moderate"?"#FEF3C7":"#FEE2E2"}; color: ${p.efficiency==="Good"?"#065F46":p.efficiency==="Moderate"?"#92400E":"#991B1B"};`,children:p.efficiency})})]},k))})]})]}),e("div",{class:"so-what-box",style:"margin-top: 16px;",children:[e("div",{class:"so-what-title",children:"💡 So What?"}),e("div",{class:"so-what-text",children:[e("strong",{children:[g?.filter(p=>p.efficiency==="Poor").length," of ",g?.length," branches"]}),' have "Poor" efficiency due to high geographic spread. Implementing ',e("strong",{children:"geographic clustering"})," (k-means on lat/lng) for task assignment could reduce travel time by 30% and enable 2+ more visits per day per agent. This is the ",e("strong",{children:"Vehicle Routing Problem (VRP)"})," — a classic operations research optimization with proven ROI in field service industries."]})]}),e("div",{style:"margin-top: 48px; padding: 32px; background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%); border-radius: 12px; border: 1px solid #E2E8F0;",children:[e("div",{style:"text-align: center; margin-bottom: 20px;",children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 2px; color: #64748B;",children:"Technical Summary"}),e("div",{style:"font-size: 18px; font-weight: 700; color: #334155;",children:"How We Built This"})]}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin-bottom: 20px;",children:[e("div",{style:"text-align: center; padding: 12px;",children:[e("div",{style:"font-size: 24px; margin-bottom: 4px;",children:"📊"}),e("div",{style:"font-weight: 600; color: #334155;",children:"2M+ Records"}),e("div",{style:"font-size: 11px; color: #64748B;",children:"Processed in ETL pipeline"})]}),e("div",{style:"text-align: center; padding: 12px;",children:[e("div",{style:"font-size: 24px; margin-bottom: 4px;",children:"⚡"}),e("div",{style:"font-weight: 600; color: #334155;",children:"Node.js + Preact"}),e("div",{style:"font-size: 11px; color: #64748B;",children:"Lightweight, fast rendering"})]}),e("div",{style:"text-align: center; padding: 12px;",children:[e("div",{style:"font-size: 24px; margin-bottom: 4px;",children:"🗺️"}),e("div",{style:"font-weight: 600; color: #334155;",children:"Leaflet.js"}),e("div",{style:"font-size: 11px; color: #64748B;",children:"Interactive geospatial viz"})]}),e("div",{style:"text-align: center; padding: 12px;",children:[e("div",{style:"font-size: 24px; margin-bottom: 4px;",children:"🧠"}),e("div",{style:"font-weight: 600; color: #334155;",children:"CRISP-DM"}),e("div",{style:"font-size: 11px; color: #64748B;",children:"Industry-standard methodology"})]})]}),e("div",{style:"text-align: center; padding-top: 16px; border-top: 1px solid #E2E8F0; color: #64748B; font-size: 12px;",children:[e("div",{style:"font-weight: 600; margin-bottom: 4px;",children:"UMKM Credit Intelligence Platform"}),e("div",{children:"Feature Engineering • Behavioral Credit Scoring • Cohort Analysis • Geospatial Clustering"})]})]})]})}function Fn(){const[t,i]=M("");q(()=>{const r=()=>{i(window.location.pathname)};r(),window.addEventListener("popstate",r);const s=new MutationObserver(r);return s.observe(document.body,{childList:!0,subtree:!0}),()=>{window.removeEventListener("popstate",r),s.disconnect()}},[]);const n=(r,s)=>{r.preventDefault(),window.history.pushState({},"",s),window.dispatchEvent(new PopStateEvent("popstate")),i(s)};return e("div",{class:"header",children:e("div",{class:"header-content",children:[e("div",{children:[e("h1",{style:"display: flex; align-items: center; gap: 12px;",children:[e("img",{src:"/assets/logo.png",alt:"Amartha",style:"height: 36px; width: auto;"}),"Admin Dashboard"]}),e("div",{class:"nav",children:[e("a",{href:"/",class:t==="/"?"active":"",onClick:r=>n(r,"/"),children:[e(J,{size:16})," Users"]}),e("a",{href:"/majelis",class:t==="/majelis"?"active":"",onClick:r=>n(r,"/majelis"),children:[e(en,{size:16})," Majelis"]}),e("a",{href:"/analytics",class:t==="/analytics"?"active":"",onClick:r=>n(r,"/analytics"),style:"background: linear-gradient(135deg, rgba(249, 207, 121, 0.2) 0%, rgba(249, 207, 121, 0.1) 100%); border: 1px solid rgba(249, 207, 121, 0.3);",children:[e(jt,{size:16})," Analytics ✨"]}),e("a",{href:"/business-types",class:t==="/business-types"?"active":"",onClick:r=>n(r,"/business-types"),children:[e(Rt,{size:16})," Business Types"]}),e("a",{href:"/financial-literacy",class:t==="/financial-literacy"?"active":"",onClick:r=>n(r,"/financial-literacy"),children:[e(pe,{size:16})," Financial Literacy"]}),e("a",{href:"/how-it-works",class:t==="/how-it-works"?"active":"",onClick:r=>n(r,"/how-it-works"),children:[e(Ti,{size:16})," Cara Kerja"]}),e("a",{href:"/demo",class:t==="/demo"?"active":"",onClick:r=>n(r,"/demo"),children:[e(Ht,{size:16})," Demo"]})]})]}),e("div",{class:"admin-badge",children:[e("span",{children:"👤"})," Admin: ",e("strong",{children:"Petugas Lapangan"})]})]})})}function In(){return e("div",{class:"container",children:[e(Fn,{}),e(It,{children:[e(nn,{path:"/"}),e(rn,{path:"/majelis"}),e(sn,{path:"/majelis/:id"}),e(ln,{path:"/business-types"}),e(dn,{path:"/financial-literacy"}),e(hn,{path:"/how-it-works"}),e(xn,{path:"/demo"}),e(Bn,{path:"/secret"}),e(pn,{path:"/user-profile/:phone"}),e(Mn,{path:"/analytics"})]})]})}ti(e(In,{}),document.getElementById("app"));
