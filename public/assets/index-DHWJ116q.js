(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var ue,P,ft,ee,Ye,xt,bt,vt,Ne,Fe,Ie,kt,pe={},_t=[],qt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ye=Array.isArray;function Q(t,i){for(var n in i)t[n]=i[n];return t}function Oe(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function he(t,i,n){var r,o,a,d={};for(a in i)a=="key"?r=i[a]:a=="ref"?o=i[a]:d[a]=i[a];if(arguments.length>2&&(d.children=arguments.length>3?ue.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)d[a]===void 0&&(d[a]=t.defaultProps[a]);return le(t,d,r,o,null)}function le(t,i,n,r,o){var a={type:t,props:i,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++ft,__i:-1,__u:0};return o==null&&P.vnode!=null&&P.vnode(a),a}function L(t){return t.children}function de(t,i){this.props=t,this.context=i}function ne(t,i){if(i==null)return t.__?ne(t.__,t.__i+1):null;for(var n;i<t.__k.length;i++)if((n=t.__k[i])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ne(t):null}function wt(t){var i,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,i=0;i<t.__k.length;i++)if((n=t.__k[i])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return wt(t)}}function je(t){(!t.__d&&(t.__d=!0)&&ee.push(t)&&!ke.__r++||Ye!=P.debounceRendering)&&((Ye=P.debounceRendering)||xt)(ke)}function ke(){for(var t,i,n,r,o,a,d,c=1;ee.length;)ee.length>c&&ee.sort(bt),t=ee.shift(),c=ee.length,t.__d&&(n=void 0,r=void 0,o=(r=(i=t).__v).__e,a=[],d=[],i.__P&&((n=Q({},r)).__v=r.__v+1,P.vnode&&P.vnode(n),Ue(i.__P,n,r,i.__n,i.__P.namespaceURI,32&r.__u?[o]:null,a,o??ne(r),!!(32&r.__u),d),n.__v=r.__v,n.__.__k[n.__i]=n,At(a,n,d),r.__e=r.__=null,n.__e!=o&&wt(n)));ke.__r=0}function zt(t,i,n,r,o,a,d,c,g,h,u){var s,p,l,k,S,_,b,v=r&&r.__k||_t,C=i.length;for(g=Vt(n,i,v,g,C),s=0;s<C;s++)(l=n.__k[s])!=null&&(p=l.__i==-1?pe:v[l.__i]||pe,l.__i=s,_=Ue(t,l,p,o,a,d,c,g,h,u),k=l.__e,l.ref&&p.ref!=l.ref&&(p.ref&&Ke(p.ref,null,l),u.push(l.ref,l.__c||k,l)),S==null&&k!=null&&(S=k),(b=!!(4&l.__u))||p.__k===l.__k?g=St(l,g,t,b):typeof l.type=="function"&&_!==void 0?g=_:k&&(g=k.nextSibling),l.__u&=-7);return n.__e=S,g}function Vt(t,i,n,r,o){var a,d,c,g,h,u=n.length,s=u,p=0;for(t.__k=new Array(o),a=0;a<o;a++)(d=i[a])!=null&&typeof d!="boolean"&&typeof d!="function"?(g=a+p,(d=t.__k[a]=typeof d=="string"||typeof d=="number"||typeof d=="bigint"||d.constructor==String?le(null,d,null,null,null):ye(d)?le(L,{children:d},null,null,null):d.constructor==null&&d.__b>0?le(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d).__=t,d.__b=t.__b+1,c=null,(h=d.__i=Gt(d,n,g,s))!=-1&&(s--,(c=n[h])&&(c.__u|=2)),c==null||c.__v==null?(h==-1&&(o>u?p--:o<u&&p++),typeof d.type!="function"&&(d.__u|=4)):h!=g&&(h==g-1?p--:h==g+1?p++:(h>g?p--:p++,d.__u|=4))):t.__k[a]=null;if(s)for(a=0;a<u;a++)(c=n[a])!=null&&(2&c.__u)==0&&(c.__e==r&&(r=ne(c)),Mt(c,c));return r}function St(t,i,n,r){var o,a;if(typeof t.type=="function"){for(o=t.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=t,i=St(o[a],i,n,r));return i}t.__e!=i&&(r&&(i&&t.type&&!i.parentNode&&(i=ne(t)),n.insertBefore(t.__e,i||null)),i=t.__e);do i=i&&i.nextSibling;while(i!=null&&i.nodeType==8);return i}function _e(t,i){return i=i||[],t==null||typeof t=="boolean"||(ye(t)?t.some(function(n){_e(n,i)}):i.push(t)),i}function Gt(t,i,n,r){var o,a,d,c=t.key,g=t.type,h=i[n],u=h!=null&&(2&h.__u)==0;if(h===null&&t.key==null||u&&c==h.key&&g==h.type)return n;if(r>(u?1:0)){for(o=n-1,a=n+1;o>=0||a<i.length;)if((h=i[d=o>=0?o--:a++])!=null&&(2&h.__u)==0&&c==h.key&&g==h.type)return d}return-1}function Qe(t,i,n){i[0]=="-"?t.setProperty(i,n??""):t[i]=n==null?"":typeof n!="number"||qt.test(i)?n:n+"px"}function fe(t,i,n,r,o){var a,d;e:if(i=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(i in r)n&&i in n||Qe(t.style,i,"");if(n)for(i in n)r&&n[i]==r[i]||Qe(t.style,i,n[i])}else if(i[0]=="o"&&i[1]=="n")a=i!=(i=i.replace(vt,"$1")),d=i.toLowerCase(),i=d in t||i=="onFocusOut"||i=="onFocusIn"?d.slice(2):i.slice(2),t.l||(t.l={}),t.l[i+a]=n,n?r?n.u=r.u:(n.u=Ne,t.addEventListener(i,a?Ie:Fe,a)):t.removeEventListener(i,a?Ie:Fe,a);else{if(o=="http://www.w3.org/2000/svg")i=i.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(i!="width"&&i!="height"&&i!="href"&&i!="list"&&i!="form"&&i!="tabIndex"&&i!="download"&&i!="rowSpan"&&i!="colSpan"&&i!="role"&&i!="popover"&&i in t)try{t[i]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&i[4]!="-"?t.removeAttribute(i):t.setAttribute(i,i=="popover"&&n==1?"":n))}}function Xe(t){return function(i){if(this.l){var n=this.l[i.type+t];if(i.t==null)i.t=Ne++;else if(i.t<n.u)return;return n(P.event?P.event(i):i)}}}function Ue(t,i,n,r,o,a,d,c,g,h){var u,s,p,l,k,S,_,b,v,C,R,f,w,M,D,j,m,A=i.type;if(i.constructor!=null)return null;128&n.__u&&(g=!!(32&n.__u),a=[c=i.__e=n.__e]),(u=P.__b)&&u(i);e:if(typeof A=="function")try{if(b=i.props,v="prototype"in A&&A.prototype.render,C=(u=A.contextType)&&r[u.__c],R=u?C?C.props.value:u.__:r,n.__c?_=(s=i.__c=n.__c).__=s.__E:(v?i.__c=s=new A(b,R):(i.__c=s=new de(b,R),s.constructor=A,s.render=Yt),C&&C.sub(s),s.props=b,s.state||(s.state={}),s.context=R,s.__n=r,p=s.__d=!0,s.__h=[],s._sb=[]),v&&s.__s==null&&(s.__s=s.state),v&&A.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=Q({},s.__s)),Q(s.__s,A.getDerivedStateFromProps(b,s.__s))),l=s.props,k=s.state,s.__v=i,p)v&&A.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),v&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(v&&A.getDerivedStateFromProps==null&&b!==l&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(b,R),!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(b,s.__s,R)===!1||i.__v==n.__v){for(i.__v!=n.__v&&(s.props=b,s.state=s.__s,s.__d=!1),i.__e=n.__e,i.__k=n.__k,i.__k.some(function(y){y&&(y.__=i)}),f=0;f<s._sb.length;f++)s.__h.push(s._sb[f]);s._sb=[],s.__h.length&&d.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(b,s.__s,R),v&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(l,k,S)})}if(s.context=R,s.props=b,s.__P=t,s.__e=!1,w=P.__r,M=0,v){for(s.state=s.__s,s.__d=!1,w&&w(i),u=s.render(s.props,s.state,s.context),D=0;D<s._sb.length;D++)s.__h.push(s._sb[D]);s._sb=[]}else do s.__d=!1,w&&w(i),u=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++M<25);s.state=s.__s,s.getChildContext!=null&&(r=Q(Q({},r),s.getChildContext())),v&&!p&&s.getSnapshotBeforeUpdate!=null&&(S=s.getSnapshotBeforeUpdate(l,k)),j=u,u!=null&&u.type===L&&u.key==null&&(j=Ct(u.props.children)),c=zt(t,ye(j)?j:[j],i,n,r,o,a,d,c,g,h),s.base=i.__e,i.__u&=-161,s.__h.length&&d.push(s),_&&(s.__E=s.__=null)}catch(y){if(i.__v=null,g||a!=null)if(y.then){for(i.__u|=g?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,i.__e=c}else{for(m=a.length;m--;)Oe(a[m]);Te(i)}else i.__e=n.__e,i.__k=n.__k,y.then||Te(i);P.__e(y,i,n)}else a==null&&i.__v==n.__v?(i.__k=n.__k,i.__e=n.__e):c=i.__e=Jt(n.__e,i,n,r,o,a,d,g,h);return(u=P.diffed)&&u(i),128&i.__u?void 0:c}function Te(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Te)}function At(t,i,n){for(var r=0;r<n.length;r++)Ke(n[r],n[++r],n[++r]);P.__c&&P.__c(i,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(a){a.call(o)})}catch(a){P.__e(a,o.__v)}})}function Ct(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ye(t)?t.map(Ct):Q({},t)}function Jt(t,i,n,r,o,a,d,c,g){var h,u,s,p,l,k,S,_=n.props,b=i.props,v=i.type;if(v=="svg"?o="http://www.w3.org/2000/svg":v=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(h=0;h<a.length;h++)if((l=a[h])&&"setAttribute"in l==!!v&&(v?l.localName==v:l.nodeType==3)){t=l,a[h]=null;break}}if(t==null){if(v==null)return document.createTextNode(b);t=document.createElementNS(o,v,b.is&&b),c&&(P.__m&&P.__m(i,a),c=!1),a=null}if(v==null)_===b||c&&t.data==b||(t.data=b);else{if(a=a&&ue.call(t.childNodes),_=n.props||pe,!c&&a!=null)for(_={},h=0;h<t.attributes.length;h++)_[(l=t.attributes[h]).name]=l.value;for(h in _)if(l=_[h],h!="children"){if(h=="dangerouslySetInnerHTML")s=l;else if(!(h in b)){if(h=="value"&&"defaultValue"in b||h=="checked"&&"defaultChecked"in b)continue;fe(t,h,null,l,o)}}for(h in b)l=b[h],h=="children"?p=l:h=="dangerouslySetInnerHTML"?u=l:h=="value"?k=l:h=="checked"?S=l:c&&typeof l!="function"||_[h]===l||fe(t,h,l,_[h],o);if(u)c||s&&(u.__html==s.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),i.__k=[];else if(s&&(t.innerHTML=""),zt(i.type=="template"?t.content:t,ye(p)?p:[p],i,n,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,d,a?a[0]:n.__k&&ne(n,0),c,g),a!=null)for(h=a.length;h--;)Oe(a[h]);c||(h="value",v=="progress"&&k==null?t.removeAttribute("value"):k!=null&&(k!==t[h]||v=="progress"&&!k||v=="option"&&k!=_[h])&&fe(t,h,k,_[h],o),h="checked",S!=null&&S!=t[h]&&fe(t,h,S,_[h],o))}return t}function Ke(t,i,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&i==null||(t.__u=t(i))}else t.current=i}catch(o){P.__e(o,n)}}function Mt(t,i,n){var r,o;if(P.unmount&&P.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||Ke(r,null,i)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){P.__e(a,i)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&Mt(r[o],i,n||typeof t.type!="function");n||Oe(t.__e),t.__c=t.__=t.__e=void 0}function Yt(t,i,n){return this.constructor(t,n)}function Qt(t,i,n){var r,o,a,d;i==document&&(i=document.documentElement),P.__&&P.__(t,i),o=(r=!1)?null:i.__k,a=[],d=[],Ue(i,t=i.__k=he(L,null,[t]),o||pe,pe,i.namespaceURI,o?null:i.firstChild?ue.call(i.childNodes):null,a,o?o.__e:i.firstChild,r,d),At(a,t,d)}function Xt(t,i,n){var r,o,a,d,c=Q({},t.props);for(a in t.type&&t.type.defaultProps&&(d=t.type.defaultProps),i)a=="key"?r=i[a]:a=="ref"?o=i[a]:c[a]=i[a]===void 0&&d!=null?d[a]:i[a];return arguments.length>2&&(c.children=arguments.length>3?ue.call(arguments,2):n),le(t.type,c,r||t.key,o||t.ref,null)}function Zt(t){function i(n){var r,o;return this.getChildContext||(r=new Set,(o={})[i.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&r.forEach(function(d){d.__e=!0,je(d)})},this.sub=function(a){r.add(a);var d=a.componentWillUnmount;a.componentWillUnmount=function(){r&&r.delete(a),d&&d.call(a)}}),n.children}return i.__c="__cC"+kt++,i.__=t,i.Provider=i.__l=(i.Consumer=function(n,r){return n.children(r)}).contextType=i,i}ue=_t.slice,P={__e:function(t,i,n,r){for(var o,a,d;i=i.__;)if((o=i.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(t)),d=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,r||{}),d=o.__d),d)return o.__E=o}catch(c){t=c}throw t}},ft=0,de.prototype.setState=function(t,i){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Q({},this.state),typeof t=="function"&&(t=t(Q({},n),this.props)),t&&Q(n,t),t!=null&&this.__v&&(i&&this._sb.push(i),je(this))},de.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),je(this))},de.prototype.render=L,ee=[],xt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,bt=function(t,i){return t.__v.__b-i.__v.__b},ke.__r=0,vt=/(PointerCapture)$|Capture$/i,Ne=0,Fe=Xe(!1),Ie=Xe(!0),kt=0;var ei=0;function e(t,i,n,r,o,a){i||(i={});var d,c,g=i;if("ref"in g)for(c in g={},i)c=="ref"?d=i[c]:g[c]=i[c];var h={type:t,props:g,key:n,ref:d,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ei,__i:-1,__u:0,__source:o,__self:a};if(typeof t=="function"&&(d=t.defaultProps))for(c in d)g[c]===void 0&&(g[c]=d[c]);return P.vnode&&P.vnode(h),h}var we,$,Ee,Ze,Le=0,Bt=[],H=P,et=H.__b,tt=H.__r,it=H.diffed,nt=H.__c,rt=H.unmount,at=H.__;function Et(t,i){H.__h&&H.__h($,t,Le||i),Le=0;var n=$.__H||($.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function E(t){return Le=1,ti(Rt,t)}function ti(t,i,n){var r=Et(we++,2);if(r.t=t,!r.__c&&(r.__=[Rt(void 0,i),function(c){var g=r.__N?r.__N[0]:r.__[0],h=r.t(g,c);g!==h&&(r.__N=[h,r.__[1]],r.__c.setState({}))}],r.__c=$,!$.__f)){var o=function(c,g,h){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!a||a.call(this,c,g,h);var s=r.__c.props!==c;return u.forEach(function(p){if(p.__N){var l=p.__[0];p.__=p.__N,p.__N=void 0,l!==p.__[0]&&(s=!0)}}),a&&a.call(this,c,g,h)||s};$.__f=!0;var a=$.shouldComponentUpdate,d=$.componentWillUpdate;$.componentWillUpdate=function(c,g,h){if(this.__e){var u=a;a=void 0,o(c,g,h),a=u}d&&d.call(this,c,g,h)},$.shouldComponentUpdate=o}return r.__N||r.__}function J(t,i){var n=Et(we++,3);!H.__s&&ri(n.__H,i)&&(n.__=t,n.u=i,$.__H.__h.push(n))}function ii(){for(var t;t=Bt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(be),t.__H.__h.forEach(Pe),t.__H.__h=[]}catch(i){t.__H.__h=[],H.__e(i,t.__v)}}H.__b=function(t){$=null,et&&et(t)},H.__=function(t,i){t&&i.__k&&i.__k.__m&&(t.__m=i.__k.__m),at&&at(t,i)},H.__r=function(t){tt&&tt(t),we=0;var i=($=t.__c).__H;i&&(Ee===$?(i.__h=[],$.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(be),i.__h.forEach(Pe),i.__h=[],we=0)),Ee=$},H.diffed=function(t){it&&it(t);var i=t.__c;i&&i.__H&&(i.__H.__h.length&&(Bt.push(i)!==1&&Ze===H.requestAnimationFrame||((Ze=H.requestAnimationFrame)||ni)(ii)),i.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ee=$=null},H.__c=function(t,i){i.some(function(n){try{n.__h.forEach(be),n.__h=n.__h.filter(function(r){return!r.__||Pe(r)})}catch(r){i.some(function(o){o.__h&&(o.__h=[])}),i=[],H.__e(r,n.__v)}}),nt&&nt(t,i)},H.unmount=function(t){rt&&rt(t);var i,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{be(r)}catch(o){i=o}}),n.__H=void 0,i&&H.__e(i,n.__v))};var st=typeof requestAnimationFrame=="function";function ni(t){var i,n=function(){clearTimeout(r),st&&cancelAnimationFrame(i),setTimeout(t)},r=setTimeout(n,35);st&&(i=requestAnimationFrame(n))}function be(t){var i=$,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),$=i}function Pe(t){var i=$;t.__c=t.__(),$=i}function ri(t,i){return!t||t.length!==i.length||i.some(function(n,r){return n!==t[r]})}function Rt(t,i){return typeof i=="function"?i(t):i}var ai={};function xe(t,i){for(var n in i)t[n]=i[n];return t}function si(t,i,n){var r,o=/(?:\?([^#]*))?(#.*)?$/,a=t.match(o),d={};if(a&&a[1])for(var c=a[1].split("&"),g=0;g<c.length;g++){var h=c[g].split("=");d[decodeURIComponent(h[0])]=decodeURIComponent(h.slice(1).join("="))}t=We(t.replace(o,"")),i=We(i||"");for(var u=Math.max(t.length,i.length),s=0;s<u;s++)if(i[s]&&i[s].charAt(0)===":"){var p=i[s].replace(/(^:|[+*?]+$)/g,""),l=(i[s].match(/[+*?]+$/)||ai)[0]||"",k=~l.indexOf("+"),S=~l.indexOf("*"),_=t[s]||"";if(!_&&!S&&(l.indexOf("?")<0||k)){r=!1;break}if(d[p]=decodeURIComponent(_),k||S){d[p]=t.slice(s).map(decodeURIComponent).join("/");break}}else if(i[s]!==t[s]){r=!1;break}return(n.default===!0||r!==!1)&&d}function oi(t,i){return t.rank<i.rank?1:t.rank>i.rank?-1:t.index-i.index}function li(t,i){return t.index=i,t.rank=(function(n){return n.props.default?0:We(n.props.path).map(di).join("")})(t),t.props}function We(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function di(t){return t.charAt(0)==":"?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}var ci={},te=[],ot=[],q=null,Dt={url:qe()},pi=Zt(Dt);function qe(){var t;return""+((t=q&&q.location?q.location:q&&q.getCurrentLocation?q.getCurrentLocation():typeof location<"u"?location:ci).pathname||"")+(t.search||"")}function hi(t,i){return i===void 0&&(i=!1),typeof t!="string"&&t.url&&(i=t.replace,t=t.url),(function(n){for(var r=te.length;r--;)if(te[r].canRoute(n))return!0;return!1})(t)&&(function(n,r){r===void 0&&(r="push"),q&&q[r]?q[r](n):typeof history<"u"&&history[r+"State"]&&history[r+"State"](null,null,n)})(t,i?"replace":"push"),Ft(t)}function Ft(t){for(var i=!1,n=0;n<te.length;n++)te[n].routeTo(t)&&(i=!0);return i}function gi(t){if(t&&t.getAttribute){var i=t.getAttribute("href"),n=t.getAttribute("target");if(i&&i.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return hi(i)}}function ui(t){return t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault(),!1}function yi(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)){var i=t.target;do if(i.localName==="a"&&i.getAttribute("href")){if(i.hasAttribute("data-native")||i.hasAttribute("native"))return;if(gi(i))return ui(t)}while(i=i.parentNode)}}var lt=!1;function It(t){t.history&&(q=t.history),this.state={url:t.url||qe()}}xe(It.prototype=new de,{shouldComponentUpdate:function(t){return t.static!==!0||t.url!==this.props.url||t.onChange!==this.props.onChange},canRoute:function(t){var i=_e(this.props.children);return this.g(i,t)!==void 0},routeTo:function(t){this.setState({url:t});var i=this.canRoute(t);return this.p||this.forceUpdate(),i},componentWillMount:function(){this.p=!0},componentDidMount:function(){var t=this;lt||(lt=!0,q||addEventListener("popstate",function(){Ft(qe())}),addEventListener("click",yi)),te.push(this),q&&(this.u=q.listen(function(i){var n=i.location||i;t.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),te.splice(te.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(t,i){t=t.filter(li).sort(oi);for(var n=0;n<t.length;n++){var r=t[n],o=si(i,r.props.path,r.props);if(o)return[r,o]}},render:function(t,i){var n,r,o=t.onChange,a=i.url,d=this.c,c=this.g(_e(t.children),a);if(c&&(r=Xt(c[0],xe(xe({url:a,matches:n=c[1]},n),{key:void 0,ref:void 0}))),a!==(d&&d.url)){xe(Dt,d=this.c={url:a,previous:d&&d.url,current:r,path:r?r.props.path:null,matches:n}),d.router=this,d.active=r?[r]:[];for(var g=ot.length;g--;)ot[g]({});typeof o=="function"&&o(d)}return he(pi.Provider,{value:d},r)}});const dt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mi=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,n,r)=>r?r.toUpperCase():n.toLowerCase()),ct=t=>{const i=mi(t);return i.charAt(0).toUpperCase()+i.slice(1)},fi=(...t)=>t.filter((i,n,r)=>!!i&&i.trim()!==""&&r.indexOf(i)===n).join(" ").trim();var xi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};const bi=({color:t="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:r,children:o,iconNode:a,class:d="",...c})=>he("svg",{...xi,width:String(i),height:i,stroke:t,"stroke-width":r?Number(n)*24/Number(i):n,class:["lucide",d].join(" "),...c},[...a.map(([g,h])=>he(g,h)),..._e(o)]);const z=(t,i)=>{const n=({class:r="",className:o="",children:a,...d})=>he(bi,{...d,iconNode:i,class:fi(`lucide-${dt(ct(t))}`,`lucide-${dt(t)}`,r,o)},a);return n.displayName=ct(t),n};const vi=z("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const ki=z("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const _i=z("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);const wi=z("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const me=z("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const jt=z("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const Tt=z("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const ze=z("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);const Me=z("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const zi=z("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const re=z("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Si=z("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]);const Ai=z("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);const Ci=z("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Mi=z("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Bi=z("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Ve=z("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Ei=z("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Ri=z("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);const Di=z("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Fi=z("clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]);const Ge=z("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const ae=z("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);const $e=z("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const se=z("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Lt=z("dice-5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);const Ii=z("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const Be=z("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Pt=z("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);const ji=z("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);const pt=z("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);const Ti=z("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const ie=z("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const Li=z("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);const Pi=z("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);const ge=z("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const ht=z("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);const He=z("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const Wi=z("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const $i=z("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);const Wt=z("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Je=z("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Hi=z("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Ni=z("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);const Oi=z("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const $t=z("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Ui=z("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);const Ki=z("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const qi=z("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);const Vi=z("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const Ht=z("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Se=z("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const Nt=z("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const ce=z("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);const Ae=z("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Gi=z("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);const Ji=z("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);const Yi=z("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Qi=z("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);const Xi=z("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);const V=z("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);const Zi=z("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ot({message:t,type:i="success",onClose:n}){J(()=>{const o=setTimeout(n,3e3);return()=>clearTimeout(o)},[n]);const r={success:e(Ve,{size:20}),error:e(Di,{size:20}),info:e(Ti,{size:20})};return e("div",{class:`toast toast-${i}`,children:[r[i],e("span",{children:t})]})}function Ut({title:t,message:i,onConfirm:n,onCancel:r,confirmText:o="Confirm",cancelText:a="Cancel",type:d="danger"}){return e("div",{class:"modal-overlay",onClick:r,children:e("div",{class:"confirm-dialog",onClick:c=>c.stopPropagation(),children:[e("div",{class:"confirm-icon",children:e(Ae,{size:48})}),e("h3",{children:t}),e("p",{children:i}),e("div",{class:"confirm-actions",children:[e("button",{class:"btn btn-secondary",onClick:r,children:a}),e("button",{class:`btn btn-${d}`,onClick:n,children:o})]})]})})}function Kt(){const[t,i]=E(null),[n,r]=E(null);return{toast:t,confirmDialog:n,showToast:(d,c="success")=>{i({message:d,type:c})},showConfirm:d=>new Promise(c=>{r({...d,onConfirm:()=>{r(null),c(!0)},onCancel:()=>{r(null),c(!1)}})}),clearToast:()=>i(null)}}const G=async(t,i={})=>{const n=await fetch(t,i);if(!n.ok){const r=await n.json().catch(()=>({error:"Request failed"}));throw new Error(r.error||"Request failed")}return n.json()},ve={getAll:()=>fetch("/api/users").then(t=>t.json()),verify:(t,i)=>G("/api/users/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:t,status:i})}),delete:t=>G(`/api/users/${t}`,{method:"DELETE"})},Z={getAll:()=>fetch("/api/majelis").then(t=>t.json()),create:t=>G("/api/majelis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),update:(t,i)=>G(`/api/majelis/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),delete:t=>G(`/api/majelis/${t}`,{method:"DELETE"}),addMember:(t,i)=>G(`/api/majelis/${t}/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:i})}),removeMember:(t,i)=>G(`/api/majelis/${t}/members/${i}`,{method:"DELETE"})},Ce={populateMockUsers:()=>G("/api/superadmin/populate-mock",{method:"POST"}),deleteAllMockUsers:()=>G("/api/superadmin/delete-all-mock",{method:"DELETE"}),populateMockMajelis:()=>G("/api/superadmin/populate-mock-majelis",{method:"POST"}),deleteAllMockMajelis:()=>G("/api/superadmin/delete-all-mock-majelis",{method:"DELETE"})};function en(){const[t,i]=E([]),[n,r]=E([]),[o,a]=E(!0),[d,c]=E(null),[g,h]=E({key:null,direction:"asc"}),[u,s]=E(!1),[p,l]=E(""),{toast:k,confirmDialog:S,showToast:_,showConfirm:b,clearToast:v}=Kt();J(()=>{C()},[]);const C=async()=>{a(!0);try{const[y,I]=await Promise.all([ve.getAll(),Z.getAll()]);i(y),r(I)}catch{_("Failed to fetch data","error")}a(!1)},R=y=>{let I="asc";g.key===y&&g.direction==="asc"&&(I="desc"),h({key:y,direction:I})},f=[...t].sort((y,I)=>{if(!g.key)return 0;let x,B;if(g.key==="majelis_name"){const T=y.majelis_id?n.find(K=>K.id===y.majelis_id):null,F=I.majelis_id?n.find(K=>K.id===I.majelis_id):null;x=T?.name||"",B=F?.name||""}else x=y[g.key]||"",B=I[g.key]||"";return x<B?g.direction==="asc"?-1:1:x>B?g.direction==="asc"?1:-1:0}),w=async(y,I)=>{c(y);try{await ve.verify(y,I),await C(),_("User verified successfully")}catch(x){_(x.message,"error")}finally{c(null)}},M=async(y,I)=>{if(await b({title:"Delete User",message:`Are you sure you want to delete ${I}? This action cannot be undone.`})){c(y);try{await ve.delete(y),await C(),_("User deleted successfully")}catch(B){_(B.message,"error")}finally{c(null)}}},D=async()=>{if(await b({title:"Populate Mock Data",message:"This will create 8 mock users in the database. Continue?",confirmText:"Populate",type:"primary"})){c("mock");try{await Ce.populateMockUsers(),await C(),_("Mock data populated successfully!")}catch(I){_(I.message,"error")}finally{c(null)}}},j=()=>{s(!0),l("")},m=async()=>{if(p!=="delete"){alert('Please type "delete" to confirm');return}c("delete-all"),s(!1);try{await Ce.deleteAllMockUsers(),await C(),_("All mock users deleted successfully!")}catch(y){_(y.message,"error")}finally{c(null),l("")}},A=y=>g.key!==y?"⇅":g.direction==="asc"?"↑":"↓";return e(L,{children:[!o&&t.length>0&&e("div",{class:"stats-grid",style:"margin-bottom: 20px;",children:[e("div",{class:"stat-card",children:[e("div",{class:"stat-value",children:t.length}),e("div",{class:"stat-label",children:"Total Users"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #10B981;",children:t.filter(y=>y.status==="active").length}),e("div",{class:"stat-label",children:"Verified"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #F59E0B;",children:t.filter(y=>y.status!=="active").length}),e("div",{class:"stat-label",children:"Pending"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #63297A;",children:t.filter(y=>y.majelis_id).length}),e("div",{class:"stat-label",children:"In Majelis"})]})]}),e("div",{class:"card",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;",children:[e("h2",{style:"margin: 0; display: flex; align-items: center; gap: 8px;",children:[e(V,{size:24})," User Management (",t.length,")"]}),e("div",{style:"display: flex; gap: 0.5rem;",children:(()=>{const y=t.filter(I=>I.is_mock).length;return e(L,{children:[!o&&e("button",{class:"btn btn-primary",onClick:D,disabled:d==="mock"||y>0,title:y>0?"Mock users already exist":"",children:[e(Lt,{size:16})," Populate Mock Data"]}),e("button",{class:"btn btn-danger",onClick:j,disabled:d==="delete-all"||y===0,children:[e(Nt,{size:16})," Delete All Mock ",y>0&&`(${y})`]})]})})()})]}),e("table",{children:[e("thead",{children:e("tr",{children:[e("th",{onClick:()=>R("name"),style:"cursor: pointer;",children:["Name ",A("name")]}),e("th",{onClick:()=>R("phone"),style:"cursor: pointer;",children:["Phone ",A("phone")]}),e("th",{onClick:()=>R("business_type"),style:"cursor: pointer;",children:["Business ",A("business_type")]}),e("th",{onClick:()=>R("location"),style:"cursor: pointer;",children:["Location ",A("location")]}),e("th",{onClick:()=>R("majelis_name"),style:"cursor: pointer;",children:["Majelis ",A("majelis_name")]}),e("th",{onClick:()=>R("status"),style:"cursor: pointer;",children:["Status ",A("status")]}),e("th",{children:"Actions"})]})}),e("tbody",{children:f.map(y=>{const I=y.majelis_id?n.find(x=>x.id===y.majelis_id):null;return e("tr",{children:[e("td",{children:[e("strong",{children:e("a",{href:`/user-profile/${y.phone}`,class:"user-link",children:y.name})}),y.is_demo&&e("span",{style:"margin-left: 6px; padding: 2px 6px; background: #ff9800; color: white; border-radius: 4px; font-size: 10px; font-weight: bold;",children:"DEMO"}),y.is_mock&&!y.is_demo&&e("span",{style:"margin-left: 6px; padding: 2px 6px; background: #9e9e9e; color: white; border-radius: 4px; font-size: 10px; font-weight: bold;",children:"MOCK"})]}),e("td",{children:y.phone}),e("td",{children:y.business?.category||y.business_type||"-"}),e("td",{children:y.business?.location||y.location||"-"}),e("td",{children:I?e("a",{href:`/majelis/${I.id}`,style:"color: #2196f3; text-decoration: none; display: flex; align-items: center; gap: 4px;",children:[e(V,{size:14}),I.name]}):e("span",{style:"color: #999;",children:"—"})}),e("td",{children:e("span",{class:`status ${y.status==="active"?"verified":"pending"}`,children:y.status==="active"?"Verified":"Pending"})}),e("td",{children:e("div",{class:"actions",children:[e("button",{class:"btn btn-icon btn-success",onClick:()=>w(y.phone,!0),disabled:d===y.phone||y.status==="active",title:"Verify user",children:e(Ci,{size:16})}),e("button",{class:"btn btn-icon btn-secondary",onClick:()=>M(y.phone,y.name),disabled:d===y.phone,title:"Delete user",children:e(Se,{size:16})})]})})]},y.phone)})})]})]}),u&&e("div",{class:"modal-overlay",onClick:()=>s(!1),children:e("div",{class:"modal-content",onClick:y=>y.stopPropagation(),children:[e("h3",{children:[e(Se,{size:18,style:{marginRight:"8px",color:"#dc3545"}}),"Delete All Mock Users"]}),e("p",{children:"This will permanently delete all mock users from the database."}),e("p",{children:e("strong",{children:'Type "delete" to confirm:'})}),e("input",{type:"text",value:p,onInput:y=>l(y.target.value),placeholder:"Type delete here",style:"width: 100%; padding: 0.5rem; margin: 1rem 0;"}),e("div",{style:"display: flex; gap: 0.5rem; justify-content: flex-end;",children:[e("button",{class:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),e("button",{class:"btn btn-danger",onClick:m,disabled:p!=="delete",children:"Delete All"})]})]})}),k&&e(Ot,{message:k.message,type:k.type,onClose:v}),S&&e(Ut,{...S})]})}function tn(){const[t,i]=E([]),[n,r]=E([]),[o,a]=E(!1),[d,c]=E(null),[g,h]=E({name:"",description:"",schedule_day:"",schedule_time:"10:00",location:""}),[u,s]=E(null),[p,l]=E(""),[k,S]=E([]),[_,b]=E(null),{toast:v,confirmDialog:C,showToast:R,showConfirm:f,clearToast:w}=Kt();J(()=>{M()},[]),J(()=>{if(!p.trim()||!u){S([]);return}const x=p.toLowerCase(),T=t.find(Y=>Y.id===u)?.members||[],K=n.filter(Y=>Y.status==="active"&&!T.includes(Y.phone)&&!Y.majelis_id).filter(Y=>Y.name?.toLowerCase().includes(x)||Y.phone?.includes(x)).slice(0,5);S(K)},[p,n,u,t]);const M=async()=>{try{const[x,B]=await Promise.all([Z.getAll(),ve.getAll()]);i(x),r(B)}catch{R("Failed to fetch data","error")}},D=async x=>{x.preventDefault();try{d?await Z.update(d,g):await Z.create(g),a(!1),c(null),h({name:"",description:"",schedule_day:"",schedule_time:"10:00",location:""}),M(),R(`Majelis ${d?"updated":"created"} successfully`)}catch(B){R(B.message,"error")}},j=async(x,B)=>{if(await f({title:"Delete Majelis",message:`Are you sure you want to delete "${B}"? All member associations will be cleared.`}))try{await Z.delete(x),M(),R("Majelis deleted successfully")}catch(F){R(F.message,"error")}},m=async(x,B)=>{try{await Z.addMember(x,B),s(null),l(""),M(),R("Member added successfully")}catch(T){R(T.message,"error")}},A=async(x,B)=>{const T=n.find(K=>K.phone===B);if(await f({title:"Remove Member",message:`Remove ${T?.name||B} from this majelis?`,confirmText:"Remove"}))try{await Z.removeMember(x,B),M(),R("Member removed successfully")}catch(K){R(K.message,"error")}},y=async()=>{if(await f({title:"Populate Mock Majelis",message:"This will create 3 mock majelis groups. Continue?",confirmText:"Populate",type:"primary"})){b("mock");try{await Ce.populateMockMajelis(),M(),R("Mock majelis populated!")}catch(B){R(B.message,"error")}finally{b(null)}}},I=async()=>{if(await f({title:"Delete All Mock Majelis",message:"This will permanently delete all mock majelis groups. Continue?",confirmText:"Delete All"})){b("delete-all");try{await Ce.deleteAllMockMajelis(),M(),R("All mock majelis deleted!")}catch(B){R(B.message,"error")}finally{b(null)}}};return e(L,{children:[e("div",{class:"card",children:[t.length>0&&e("div",{class:"stats-grid",style:"margin-bottom: 20px;",children:[e("div",{class:"stat-card",children:[e("div",{class:"stat-value",children:t.length}),e("div",{class:"stat-label",children:"Total Groups"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #63297A;",children:t.reduce((x,B)=>x+(B.members?.length||0),0)}),e("div",{class:"stat-label",children:"Total Members"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #10B981;",children:(t.reduce((x,B)=>x+(B.members?.length||0),0)/Math.max(t.length,1)).toFixed(1)}),e("div",{class:"stat-label",children:"Avg per Group"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #2563EB;",children:t.filter(x=>(x.members?.length||0)>=5).length}),e("div",{class:"stat-label",children:"Active (5+ members)"})]})]}),e("div",{class:"card-header-actions",children:[e("h2",{style:"display: flex; align-items: center; gap: 8px;",children:[e(V,{size:24})," Majelis Groups"]}),e("div",{style:"display: flex; gap: 8px;",children:[e("button",{class:"btn btn-primary",onClick:()=>a(!0),children:[e(Wt,{size:16})," Create Majelis"]}),e("button",{class:"btn btn-secondary",onClick:y,disabled:_==="mock",children:[e(Lt,{size:16})," Populate Mock"]}),e("button",{class:"btn btn-danger",onClick:I,disabled:_==="delete-all",children:[e(Nt,{size:16})," Delete All Mock"]})]})]}),e("div",{class:"majelis-grid",children:t.length===0?e("div",{class:"empty-state",children:e("p",{children:"No majelis yet. Create one!"})}):t.map(x=>{const B=x.members?.length||0;return e("div",{class:"majelis-card",children:[e("a",{href:`/majelis/${x.id}`,style:"text-decoration: none; color: inherit;",children:[e("h3",{style:"display: flex; align-items: center; gap: 8px;",children:[x.name,x.is_mock&&e("span",{style:"padding: 2px 6px; background: #9e9e9e; color: white; border-radius: 4px; font-size: 10px;",children:"MOCK"})]}),e("div",{class:"info-row",children:[e("span",{children:[e(Me,{size:14})," ",x.schedule_day," ",x.schedule_time]}),e("span",{children:[e(ge,{size:14})," ",x.location||"No location"]})]}),x.description&&e("p",{class:"majelis-description",children:x.description})]}),e("div",{class:"member-section",children:[e("div",{class:"member-header",children:[e("span",{class:"member-count",children:[e(V,{size:14})," ",B," member",B!==1?"s":""]}),e("button",{class:"btn btn-primary btn-icon",onClick:()=>s(x.id),title:"Add member",children:e(Yi,{size:14})})]}),B===0?e("div",{class:"no-members",children:"No members yet. Click + to add."}):e("div",{class:"member-list",children:x.members.map(T=>{const F=n.find(K=>K.phone===T);return e("div",{class:"member-item",children:[e("div",{class:"member-info",children:[e("div",{class:"member-name",children:F?.name||T}),F&&e("div",{class:"member-business",children:F.business_type})]}),e("button",{class:"btn-remove",onClick:()=>A(x.id,T),title:"Remove member",children:e(Zi,{size:14})})]},T)})})]}),e("div",{class:"actions",children:[e("button",{class:"btn btn-secondary",onClick:()=>{c(x.id),h(x),a(!0)},children:[e(Wi,{size:14})," ",e("span",{class:"btn-text",children:"Edit"})]}),e("button",{class:"btn btn-danger",onClick:()=>j(x.id,x.name),children:[e(Se,{size:14})," ",e("span",{class:"btn-text",children:"Delete"})]})]})]},x.id)})})]}),o&&e("div",{class:"modal active",children:e("div",{class:"modal-content",children:[e("h2",{children:[d?"Edit":"Create"," Majelis"]}),e("form",{onSubmit:D,children:[e("div",{class:"form-group",children:[e("label",{children:"Name *"}),e("input",{type:"text",value:g.name,onInput:x=>h({...g,name:x.target.value}),required:!0})]}),e("div",{class:"form-group",children:[e("label",{children:"Description"}),e("textarea",{value:g.description,onInput:x=>h({...g,description:x.target.value})})]}),e("div",{class:"form-group",children:[e("label",{children:"Schedule Day *"}),e("select",{value:g.schedule_day,onChange:x=>h({...g,schedule_day:x.target.value}),required:!0,children:[e("option",{value:"",children:"Select day"}),e("option",{value:"Senin",children:"Senin"}),e("option",{value:"Selasa",children:"Selasa"}),e("option",{value:"Rabu",children:"Rabu"}),e("option",{value:"Kamis",children:"Kamis"}),e("option",{value:"Jumat",children:"Jumat"}),e("option",{value:"Sabtu",children:"Sabtu"})]})]}),e("div",{class:"form-group",children:[e("label",{children:"Schedule Time"}),e("input",{type:"time",value:g.schedule_time,onInput:x=>h({...g,schedule_time:x.target.value})})]}),e("div",{class:"form-group",children:[e("label",{children:"Location"}),e("input",{type:"text",value:g.location,onInput:x=>h({...g,location:x.target.value})})]}),e("div",{class:"form-actions",children:[e("button",{type:"button",class:"btn btn-secondary",onClick:()=>{a(!1),c(null),h({name:"",description:"",schedule_day:"",schedule_time:"10:00",location:""})},children:"Cancel"}),e("button",{type:"submit",class:"btn btn-primary",children:"Save"})]})]})]})}),u&&e("div",{class:"modal active",onClick:x=>{x.target.className==="modal active"&&(s(null),l(""))},children:e("div",{class:"modal-content modal-sm",children:[e("h2",{children:"Add Member"}),e("div",{class:"form-group",children:[e("label",{children:"Search by name or phone"}),e("input",{type:"text",value:p,onInput:x=>l(x.target.value),placeholder:"Type to search...",autoFocus:!0}),k.length>0&&e("div",{class:"autocomplete-results",children:k.map(x=>e("div",{class:"autocomplete-item",onClick:()=>m(u,x.phone),children:[e("div",{class:"autocomplete-name",children:x.name}),e("div",{class:"autocomplete-details",children:[x.phone," • ",x.business?.category||x.business_type||"-"]})]},x.phone))}),p&&k.length===0&&e("div",{class:"autocomplete-empty",children:"No verified users found"})]}),!p&&(()=>{const B=t.find(F=>F.id===u)?.members||[],T=n.filter(F=>F.status==="active"&&!B.includes(F.phone)&&!F.majelis_id).slice(0,10);return T.length>0?e("div",{style:"margin-top: 16px;",children:[e("label",{style:"font-size: 12px; color: #666; margin-bottom: 8px; display: block;",children:["Eligible members (",T.length,n.filter(F=>F.status==="active"&&!B.includes(F.phone)&&!F.majelis_id).length>10?"+":"",")"]}),e("div",{class:"autocomplete-results",style:"position: static; max-height: 250px;",children:T.map(F=>e("div",{class:"autocomplete-item",onClick:()=>m(u,F.phone),children:[e("div",{class:"autocomplete-name",children:[F.name,F.is_demo&&e("span",{style:"margin-left: 4px; padding: 1px 4px; background: #ff9800; color: white; border-radius: 3px; font-size: 9px;",children:"DEMO"})]}),e("div",{class:"autocomplete-details",children:[F.phone," • ",F.business?.category||F.business_type||"-"]})]},F.phone))})]}):e("div",{style:"margin-top: 16px; color: #666; font-size: 13px; text-align: center;",children:["No eligible members available.",e("br",{}),e("span",{style:"font-size: 11px;",children:"(Must be verified & not in another majelis)"})]})})(),e("div",{class:"form-actions",children:e("button",{type:"button",class:"btn btn-secondary",onClick:()=>{s(null),l("")},children:"Cancel"})})]})}),v&&e(Ot,{message:v.message,type:v.type,onClose:w}),C&&e(Ut,{...C})]})}const gt="/api",ut=(t,i=!0)=>{const n={lat:-6.2088,lng:106.8456},r=t.split("").reduce((a,d)=>a+d.charCodeAt(0),0),o=i?.01:.02;return{lat:n.lat+(r%100-50)*o/50,lng:n.lng+(r*7%100-50)*o/50}},nn=(t,i,n)=>{const o=(n?.id||"default").split("").reduce((g,h)=>g+h.charCodeAt(0),0),a=i.length>0?i.reduce((g,h)=>g+h.attendees.length/h.total,0)/i.length*100:75,d=t.map(g=>600+(g.phone||"").split("").reduce((u,s)=>u+s.charCodeAt(0),0)%200),c=d.length>0?Math.round(d.reduce((g,h)=>g+h,0)/d.length):680;return{groupScore:Math.round(c*.4+a*3+o%50),avgMemberScore:c,attendanceRate:Math.round(a),paymentRate:85+o%12,fieldAgentScore:70+o%25,riskLevel:c>=700&&a>=80?"Low":c>=600?"Medium":"High",factors:[{name:"Payment Compliance",score:85+o%12,weight:30},{name:"Attendance Rate",score:Math.round(a),weight:25},{name:"Member Credit Avg",score:Math.round((c-300)/5.5),weight:20},{name:"Field Agent Rating",score:70+o%25,weight:15},{name:"Group Tenure",score:60+o%35,weight:10}],fieldAgent:{name:"Budi Santoso",rating:(3.5+o%15/10).toFixed(1),groupsManaged:5+o%8,avgCollection:92+o%6}}};function rn({id:t}){const[i,n]=E(null),[r,o]=E([]),[a,d]=E([]),[c,g]=E(!0),[h,u]=E(!1),[s,p]=E({date:"",attendees:[],notes:""}),[l,k]=E(null);J(()=>{S()},[t]);const S=async()=>{g(!0);try{const w=await(await fetch(`${gt}/majelis/${t}`)).json();n(w);let M=[];if(w.members?.length>0){const m=await(await fetch(`${gt}/users`)).json();M=w.members.map(A=>{const y=m.find(B=>B.phone===A)||{phone:A,name:A},I=y.profile?.home_lat?{lat:y.profile.home_lat,lng:y.profile.home_lng}:ut(A,!0),x=y.business?.business_lat?{lat:y.business.business_lat,lng:y.business.business_lng}:ut(A,!1);return{...y,homeCoords:I,bizCoords:x}}),o(M)}const D=w.attendance||_(w.members||[]);d(D),k(nn(M,D,w))}catch(f){console.error(f)}g(!1)},_=f=>{const w=[],M=new Date;for(let D=4;D>=0;D--){const j=new Date(M);j.setDate(j.getDate()-D*7);const m=f.filter(()=>Math.random()>.2);w.push({id:`week_${D}`,date:j.toISOString().split("T")[0],attendees:m,total:f.length,notes:D===0?"Pertemuan terakhir berjalan lancar":""})}return w},b=f=>{p(w=>({...w,attendees:w.attendees.includes(f)?w.attendees.filter(M=>M!==f):[...w.attendees,f]}))},v=async()=>{if(!s.date)return alert("Pilih tanggal");const f={id:`week_${Date.now()}`,date:s.date,attendees:s.attendees,total:r.length,notes:s.notes};d(w=>[...w,f]),u(!1),p({date:"",attendees:[],notes:""})};if(c)return e("div",{style:"padding: 20px;",children:"Loading..."});if(!i)return e("div",{style:"padding: 20px;",children:"Majelis not found"});const C=f=>f==="Low"?"#10B981":f==="Medium"?"#F59E0B":"#EF4444",R=f=>{const w=a.filter(M=>M.attendees.includes(f)).length;return{attended:w,total:a.length,rate:a.length>0?Math.round(w/a.length*100):0}};return e("div",{style:"padding: 20px; max-width: 1400px; margin: 0 auto;",children:[e("a",{href:"/majelis",style:"display: inline-flex; align-items: center; gap: 4px; color: #666; text-decoration: none; margin-bottom: 16px;",children:[e(Mi,{size:20})," Kembali ke Daftar Majelis"]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: flex-start;",children:[e("div",{children:[e("h1",{style:"margin: 0 0 8px 0; display: flex; align-items: center; gap: 8px;",children:[e(V,{size:28})," ",i.name]}),e("p",{style:"color: #666; margin: 0;",children:i.description||"Tidak ada deskripsi"})]}),e("div",{style:"display: flex; gap: 8px; align-items: center;",children:[l&&e("span",{style:`padding: 6px 12px; background: ${C(l.riskLevel)}15; color: ${C(l.riskLevel)}; border-radius: 6px; font-size: 13px; font-weight: 600;`,children:[l.riskLevel," Risk"]}),i.is_mock&&e("span",{style:"padding: 4px 8px; background: #9e9e9e; color: white; border-radius: 4px; font-size: 12px;",children:"MOCK"})]})]}),e("div",{style:"display: flex; gap: 24px; margin-top: 16px; flex-wrap: wrap;",children:[e("div",{style:"display: flex; align-items: center; gap: 8px; color: #666;",children:[e(Me,{size:18})," ",i.schedule_day||"-"]}),e("div",{style:"display: flex; align-items: center; gap: 8px; color: #666;",children:[e(Ge,{size:18})," ",i.schedule_time||"-"]}),e("div",{style:"display: flex; align-items: center; gap: 8px; color: #666;",children:[e(ge,{size:18})," ",i.location||"-"]}),e("div",{style:"display: flex; align-items: center; gap: 8px; color: #666;",children:[e(V,{size:18})," ",r.length," anggota"]})]})]}),l&&e("div",{style:"margin-bottom: 24px;",children:[e("div",{style:"display: flex; align-items: center; gap: 12px; margin-bottom: 16px;",children:[e("div",{style:"width: 4px; height: 32px; background: linear-gradient(180deg, #63297A 0%, #F9CF79 100%); border-radius: 2px;"}),e("h2",{style:"margin: 0; font-size: 20px; color: #1F2937;",children:"Group Risk Assessment"}),e("span",{style:"background: #FEF3C7; color: #92400E; padding: 3px 10px; border-radius: 4px; font-size: 11px; font-weight: 600;",children:"MOCK DATA"})]}),e("div",{style:"display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 20px;",children:[e("div",{class:"card",style:"text-align: center; padding: 20px;",children:[e("div",{style:`font-size: 36px; font-weight: 800; color: ${C(l.riskLevel)};`,children:l.groupScore}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Group Score"})]}),e("div",{class:"card",style:"text-align: center; padding: 20px;",children:[e("div",{style:"font-size: 36px; font-weight: 800; color: #63297A;",children:l.avgMemberScore}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Avg Credit Score"})]}),e("div",{class:"card",style:"text-align: center; padding: 20px;",children:[e("div",{style:"font-size: 36px; font-weight: 800; color: #2563EB;",children:[l.attendanceRate,"%"]}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Attendance Rate"})]}),e("div",{class:"card",style:"text-align: center; padding: 20px;",children:[e("div",{style:"font-size: 36px; font-weight: 800; color: #10B981;",children:[l.paymentRate,"%"]}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Payment Rate"})]})]}),e("div",{class:"so-what-box",style:"margin-bottom: 20px;",children:[e("div",{class:"so-what-title",children:"💡 Group Assessment"}),e("div",{class:"so-what-text",children:l.riskLevel==="Low"?e(L,{children:["This majelis demonstrates ",e("strong",{children:"strong group cohesion"})," with high attendance and payment compliance. The peer accountability model is working effectively — members support each other's financial success."]}):l.riskLevel==="Medium"?e(L,{children:["Moderate group performance with ",e("strong",{children:"room for improvement"}),". Focus on increasing attendance rates and addressing any members with payment delays. Consider additional field agent engagement."]}):e(L,{children:[e("strong",{children:"Attention required."})," This group shows elevated risk indicators. Recommend closer monitoring, individual member assessments, and potential restructuring of meeting schedules."]})})]}),e("div",{style:"display: grid; grid-template-columns: 1fr 1fr; gap: 20px;",children:[e("div",{class:"card",style:"padding: 20px;",children:[e("h3",{style:"margin: 0 0 16px; font-size: 15px; display: flex; align-items: center; gap: 8px;",children:[e($t,{size:18})," Risk Factors"]}),e("div",{style:"display: grid; gap: 12px;",children:l.factors.map((f,w)=>{const M=f.score>=80?"#10B981":f.score>=60?"#F59E0B":"#EF4444";return e("div",{children:[e("div",{style:"display: flex; justify-content: space-between; margin-bottom: 4px;",children:[e("span",{style:"font-size: 13px; color: #374151;",children:f.name}),e("span",{style:"font-size: 13px; font-weight: 600;",children:[f.score,"%"]})]}),e("div",{style:"height: 6px; background: #E5E7EB; border-radius: 3px; overflow: hidden;",children:e("div",{style:`height: 100%; width: ${f.score}%; background: ${M}; border-radius: 3px;`})})]},w)})})]}),e("div",{class:"card",style:"padding: 20px;",children:[e("h3",{style:"margin: 0 0 16px; font-size: 15px; display: flex; align-items: center; gap: 8px;",children:[e(_i,{size:18})," Field Agent"]}),e("div",{style:"display: flex; gap: 16px; align-items: center; margin-bottom: 16px;",children:[e("div",{style:"width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #63297A 0%, #7E3D99 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: 700;",children:l.fieldAgent.name.charAt(0)}),e("div",{children:[e("div",{style:"font-size: 15px; font-weight: 600; color: #1F2937;",children:l.fieldAgent.name}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Field Agent"})]})]}),e("div",{style:"display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;",children:[e("div",{style:"text-align: center; padding: 10px; background: #F9FAFB; border-radius: 6px;",children:[e("div",{style:"font-size: 18px; font-weight: 700; color: #F59E0B;",children:["⭐ ",l.fieldAgent.rating]}),e("div",{style:"font-size: 10px; color: #6B7280;",children:"Rating"})]}),e("div",{style:"text-align: center; padding: 10px; background: #F9FAFB; border-radius: 6px;",children:[e("div",{style:"font-size: 18px; font-weight: 700; color: #63297A;",children:l.fieldAgent.groupsManaged}),e("div",{style:"font-size: 10px; color: #6B7280;",children:"Groups"})]}),e("div",{style:"text-align: center; padding: 10px; background: #F9FAFB; border-radius: 6px;",children:[e("div",{style:"font-size: 18px; font-weight: 700; color: #10B981;",children:[l.fieldAgent.avgCollection,"%"]}),e("div",{style:"font-size: 10px; color: #6B7280;",children:"Collection"})]})]})]})]})]}),e("div",{class:"card",style:"margin-bottom: 24px; padding: 20px;",children:[e("div",{style:"display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;",children:[e("h3",{style:"margin: 0; font-size: 15px; display: flex; align-items: center; gap: 8px;",children:[e(ge,{size:18})," Member Locations"]}),e("div",{style:"display: flex; gap: 12px; font-size: 11px;",children:[e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e(pt,{size:12,style:"color: #2563EB;"})," Home"]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e(ze,{size:12,style:"color: #10B981;"})," Business"]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e(V,{size:12,style:"color: #63297A;"})," Meeting"]})]})]}),e("div",{style:"position: relative; background: linear-gradient(135deg, #E0E7FF 0%, #DBEAFE 50%, #D1FAE5 100%); border-radius: 12px; height: 280px; overflow: hidden;",children:[e("div",{style:"position: absolute; inset: 0; background-image: linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.05) 1px, transparent 1px); background-size: 40px 40px;"}),r.map((f,w)=>{const M=15+(f.homeCoords.lng+107)*300%65+w*6,D=15+(f.homeCoords.lat+7)*300%55+w*5,j=M+8+w%3*5,m=D+8+w%2*8;return e("div",{children:[e("div",{style:`position: absolute; left: ${M}%; top: ${D}%; transform: translate(-50%, -50%);`,title:`${f.name} - Home`,children:e("div",{style:"width: 24px; height: 24px; background: #2563EB; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; box-shadow: 0 2px 6px rgba(37,99,235,0.4); border: 2px solid white;",children:e(pt,{size:10})})}),e("div",{style:`position: absolute; left: ${j}%; top: ${m}%; transform: translate(-50%, -50%);`,title:`${f.name} - Business`,children:e("div",{style:"width: 20px; height: 20px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; box-shadow: 0 2px 6px rgba(16,185,129,0.4); border: 2px solid white;",children:e(ze,{size:8})})})]},f.phone)}),e("div",{style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);",children:e("div",{style:"width: 36px; height: 36px; background: #63297A; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; box-shadow: 0 4px 12px rgba(99,41,122,0.4); border: 3px solid white;",children:e(V,{size:16})})})]})]}),e("div",{class:"card",style:"margin-bottom: 20px; padding: 20px;",children:[e("div",{style:"display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;",children:[e("h3",{style:"margin: 0; font-size: 15px; display: flex; align-items: center; gap: 8px;",children:[e(V,{size:18})," Members & Attendance"]}),e("button",{onClick:()=>u(!0),style:"padding: 6px 12px; background: #63297A; color: white; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; font-size: 12px;",children:[e(Wt,{size:14})," Add Week"]})]}),r.length===0?e("p",{style:"color: #666;",children:"Belum ada anggota"}):e("div",{style:"overflow-x: auto;",children:e("table",{style:"width: 100%; border-collapse: collapse; font-size: 13px;",children:[e("thead",{children:e("tr",{style:"border-bottom: 2px solid #E5E7EB;",children:[e("th",{style:"text-align: left; padding: 8px 12px; font-weight: 600; color: #374151;",children:"Member"}),e("th",{style:"text-align: center; padding: 8px 6px; font-weight: 600; color: #374151; width: 70px;",children:"Rate"}),a.slice(-5).map((f,w)=>e("th",{style:"text-align: center; padding: 8px 4px; font-weight: 500; color: #6B7280; font-size: 11px; width: 50px;",children:new Date(f.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})},w))]})}),e("tbody",{children:r.map(f=>{const w=R(f.phone),M=w.rate>=80?"#10B981":w.rate>=60?"#F59E0B":"#EF4444";return e("tr",{style:"border-bottom: 1px solid #F3F4F6;",children:[e("td",{style:"padding: 10px 12px;",children:e("div",{style:"display: flex; align-items: center; gap: 10px;",children:[e("div",{style:"width: 32px; height: 32px; background: #63297A; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 12px; flex-shrink: 0;",children:f.name?.[0]||"?"}),e("div",{style:"min-width: 0;",children:[e("div",{style:"font-weight: 500; color: #1F2937; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;",children:f.name||"Unknown"}),e("div",{style:"font-size: 11px; color: #9CA3AF;",children:f.phone})]})]})}),e("td",{style:"text-align: center; padding: 8px 6px;",children:e("span",{style:`padding: 3px 8px; border-radius: 4px; font-size: 12px; font-weight: 600; background: ${M}15; color: ${M};`,children:[w.rate,"%"]})}),a.slice(-5).map((D,j)=>{const m=D.attendees.includes(f.phone);return e("td",{style:"text-align: center; padding: 8px 4px;",children:m?e(Ji,{size:16,style:"color: #10B981;"}):e(Qi,{size:16,style:"color: #EF4444;"})},j)})]},f.phone)})}),e("tfoot",{children:e("tr",{style:"background: #F9FAFB;",children:[e("td",{style:"padding: 10px 12px; font-weight: 600; color: #374151;",children:"Weekly Total"}),e("td",{style:"text-align: center; padding: 8px 6px; font-weight: 600; color: #63297A;",children:[l?.attendanceRate||0,"%"]}),a.slice(-5).map((f,w)=>{const M=f.total>0?Math.round(f.attendees.length/f.total*100):0,D=M>=80?"#10B981":M>=60?"#F59E0B":"#EF4444";return e("td",{style:"text-align: center; padding: 8px 4px;",children:e("span",{style:`font-size: 11px; font-weight: 600; color: ${D};`,children:[M,"%"]})},w)})]})})]})})]}),h&&e("div",{style:"position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;",children:e("div",{style:"background: white; padding: 24px; border-radius: 8px; width: 90%; max-width: 500px; max-height: 80vh; overflow-y: auto;",children:[e("h3",{style:"margin: 0 0 16px 0;",children:"Tambah Kehadiran Minggu Ini"}),e("div",{style:"margin-bottom: 16px;",children:[e("label",{style:"display: block; margin-bottom: 4px; font-weight: 500;",children:"Tanggal"}),e("input",{type:"date",value:s.date,onChange:f=>p(w=>({...w,date:f.target.value})),style:"width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"})]}),e("div",{style:"margin-bottom: 16px;",children:[e("label",{style:"display: block; margin-bottom: 8px; font-weight: 500;",children:["Kehadiran (",s.attendees.length,"/",r.length,")"]}),e("div",{style:"display: flex; flex-direction: column; gap: 8px;",children:r.map(f=>e("label",{style:"display: flex; align-items: center; gap: 8px; padding: 8px; background: newWeek.attendees.includes(m.phone) ? '#e8f5e9' : '#f5f5f5'; border-radius: 4px; cursor: pointer;",children:[e("input",{type:"checkbox",checked:s.attendees.includes(f.phone),onChange:()=>b(f.phone)}),e("span",{children:f.name||f.phone})]},f.phone))})]}),e("div",{style:"margin-bottom: 16px;",children:[e("label",{style:"display: block; margin-bottom: 4px; font-weight: 500;",children:"Catatan"}),e("textarea",{value:s.notes,onChange:f=>p(w=>({...w,notes:f.target.value})),placeholder:"Catatan pertemuan minggu ini...",style:"width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; min-height: 80px;"})]}),e("div",{style:"display: flex; gap: 8px; justify-content: flex-end;",children:[e("button",{onClick:()=>u(!1),style:"padding: 8px 16px; background: #f5f5f5; border: none; border-radius: 4px; cursor: pointer;",children:"Batal"}),e("button",{onClick:v,style:"padding: 8px 16px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 4px;",children:[e(Oi,{size:16})," Simpan"]})]})]})})]})}const an={"warung sembako":"🏪",kelontong:"🏪","warung makan":"🍽️",coffee:"☕",jajanan:"🍪",camilan:"🍪",minuman:"🧋",fashion:"👗",hijab:"👗",elektronik:"📱",gadget:"📱","pet shop":"🐾","bahan bangunan":"🧱",mainan:"🎮",hobi:"🎮",laundry:"👕","bengkel motor":"🏍️",kecantikan:"💇",salon:"💇",penjahit:"✂️",permak:"✂️","kos-kosan":"🏠",penginapan:"🏠",logistik:"📦",ekspedisi:"📦","sewa kendaraan":"🚗","cuci steam":"🚿",detailing:"🚿",apotek:"💊",obat:"💊",event:"🎉",wedding:"🎉","bengkel las":"🔧",bubut:"🔧",kontraktor:"🏗️",renovasi:"🏗️",kriya:"🎨",kerajinan:"🎨",petani:"🌱",holtikultura:"🌱",nelayan:"🐟",ikan:"🐟"};function yt(t){const i=t.toLowerCase();for(const[n,r]of Object.entries(an))if(i.includes(n))return r;return"🏢"}function sn(){const[t,i]=E([]),[n,r]=E(null),[o,a]=E(!0),[d,c]=E(!1);J(()=>{g()},[]);const g=async(u=!1)=>{const s="businessTypes";try{if(!u){const _=localStorage.getItem(s);if(_){const{data:b,timestamp:v}=JSON.parse(_);if(Date.now()-v<864e5){i(b),b.length>0&&r(b[0]),a(!1);return}}}const S=(await(await fetch("/api/knowledge/business-classifications")).json()).sort((_,b)=>(_.category_number||999)-(b.category_number||999));localStorage.setItem(s,JSON.stringify({data:S,timestamp:Date.now()})),i(S),S.length>0&&r(S[0])}catch(l){console.error("Failed to fetch business types",l)}finally{a(!1),c(!1)}},h=()=>{c(!0),g(!0)};return o?e("div",{class:"loading",children:"Loading business types..."}):e("div",{style:{display:"flex",gap:"16px",height:"calc(100vh - 140px)",minHeight:"500px"},children:[e("div",{style:{width:"280px",background:"#fff",borderRadius:"8px",display:"flex",flexDirection:"column",border:"1px solid #dee2e6",flexShrink:0},children:[e("div",{style:{padding:"12px 16px",borderBottom:"1px solid #dee2e6",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("h3",{style:{margin:0,fontSize:"14px",display:"flex",alignItems:"center",gap:"6px"},children:[e(Tt,{size:16})," 25 Kategori UMKM"]}),e("button",{onClick:h,disabled:d,style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:e(Je,{size:14,class:d?"spin":""})})]}),e("div",{style:{flex:1,overflowY:"auto"},children:t.map(u=>{const s=n?.category_id===u.category_id;return e("div",{onClick:()=>r(u),style:{padding:"10px 16px",cursor:"pointer",borderLeft:s?"3px solid #0d6efd":"3px solid transparent",background:s?"#e7f1ff":"transparent",display:"flex",alignItems:"center",gap:"10px"},children:[e("span",{style:{fontSize:"20px"},children:yt(u.business_type)}),e("div",{style:{flex:1,minWidth:0},children:[e("div",{style:{fontSize:"10px",color:"#6c757d"},children:["Kategori ",u.category_number]}),e("div",{style:{fontSize:"12px",fontWeight:500,color:s?"#0d6efd":"#212529",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:u.business_type})]}),s&&e(Bi,{size:14,color:"#0d6efd"})]},u.category_id)})})]}),e("div",{style:{flex:1,background:"#fff",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",border:"1px solid #dee2e6"},children:n?e(L,{children:[e("div",{style:{padding:"16px",borderBottom:"1px solid #dee2e6",background:"#f8f9fa"},children:e("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("span",{style:{fontSize:"32px"},children:yt(n.business_type)}),e("div",{children:[e("div",{style:{fontSize:"11px",color:"#6c757d"},children:["Kategori ",n.category_number]}),e("h2",{style:{margin:0,fontSize:"18px"},children:n.business_type}),n.business_character&&e("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:n.business_character})]})]})}),e("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:(n.maturity_levels||[]).sort((u,s)=>u.level-s.level).map((u,s)=>e("div",{style:{marginBottom:"20px",border:"1px solid #dee2e6",borderRadius:"8px",overflow:"hidden"},children:[e("div",{style:{padding:"12px 16px",background:"#f8f9fa",borderBottom:"1px solid #dee2e6",display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"#0d6efd",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"14px"},children:u.level}),e("div",{children:[e("div",{style:{fontWeight:600,fontSize:"14px",color:"#212529"},children:["Level ",u.level]}),u.goal&&e("div",{style:{fontSize:"11px",color:"#6c757d"},children:u.goal})]})]}),e("div",{style:{padding:"12px 16px"},children:[u.character?.length>0&&e("div",{style:{marginBottom:"12px"},children:[e("div",{style:{fontSize:"11px",fontWeight:600,color:"#6c757d",marginBottom:"6px",textTransform:"uppercase"},children:"Karakteristik"}),u.character.map((p,l)=>e("div",{style:{fontSize:"12px",color:"#495057",padding:"2px 0"},children:["• ",p]},l))]}),(u.swot?.strengths?.length>0||u.swot?.weaknesses?.length>0)&&e("div",{style:{marginBottom:"12px"},children:[e("div",{style:{fontSize:"11px",fontWeight:600,color:"#6c757d",marginBottom:"6px",textTransform:"uppercase"},children:"SWOT"}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px"},children:[u.swot?.strengths?.length>0&&e("div",{style:{background:"#d1e7dd",padding:"8px",borderRadius:"4px",fontSize:"11px"},children:[e("strong",{style:{color:"#0f5132"},children:"S:"})," ",u.swot.strengths[0]]}),u.swot?.weaknesses?.length>0&&e("div",{style:{background:"#f8d7da",padding:"8px",borderRadius:"4px",fontSize:"11px"},children:[e("strong",{style:{color:"#842029"},children:"W:"})," ",u.swot.weaknesses[0]]}),u.swot?.opportunities?.length>0&&e("div",{style:{background:"#cff4fc",padding:"8px",borderRadius:"4px",fontSize:"11px"},children:[e("strong",{style:{color:"#055160"},children:"O:"})," ",u.swot.opportunities[0]]}),u.swot?.threats?.length>0&&e("div",{style:{background:"#fff3cd",padding:"8px",borderRadius:"4px",fontSize:"11px"},children:[e("strong",{style:{color:"#664d03"},children:"T:"})," ",u.swot.threats[0]]})]})]}),u.roadmap?.kpis?.length>0&&u.level<5&&e("div",{style:{background:"#e7f1ff",borderRadius:"6px",padding:"10px",border:"1px solid #b6d4fe"},children:[e("div",{style:{fontSize:"11px",fontWeight:600,color:"#084298",marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e(ce,{size:12})," KPI Naik ke Level ",u.level+1]}),u.roadmap.description&&e("div",{style:{fontSize:"11px",color:"#084298",marginBottom:"6px",fontStyle:"italic"},children:["Tujuan: ",u.roadmap.description]}),u.roadmap.kpis.map((p,l)=>e("div",{style:{fontSize:"11px",color:"#0a58ca",padding:"3px 0",display:"flex"},children:[e("span",{style:{minWidth:"18px",fontWeight:600},children:[l+1,"."]}),e("span",{children:p})]},l))]}),u.level===5&&e("div",{style:{background:"#d1e7dd",borderRadius:"6px",padding:"10px",textAlign:"center"},children:[e("span",{style:{fontSize:"16px"},children:"🏆"}),e("span",{style:{fontSize:"12px",fontWeight:600,color:"#0f5132",marginLeft:"6px"},children:"Level Maksimal - Korporasi"})]})]})]},u.level))})]}):e("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#6c757d"},children:"Select a business category"})})]})}function on(){const[t,i]=E(null),[n,r]=E([]),[o,a]=E(!0);J(()=>{d()},[]);const d=async(s=!1)=>{const p="financialLiteracy";try{if(!s){const b=localStorage.getItem(p);if(b){const{data:v,timestamp:C}=JSON.parse(b);if(Date.now()-C<864e5){r(v),v.length>0&&i(v[0]),a(!1);return}}}const _=(await(await fetch("/api/knowledge/financial-literacy")).json()).filter(b=>b.week_number&&b.bank_soal&&b.bank_soal.length>0).sort((b,v)=>b.week_number-v.week_number);localStorage.setItem(p,JSON.stringify({data:_,timestamp:Date.now()})),r(_),_.length>0&&i(_[0])}catch(k){console.error("Failed to fetch course:",k)}finally{a(!1)}},c=async()=>{localStorage.removeItem("financialLiteracy"),a(!0),await d(!0)},g=s=>!s||typeof s!="string"?s:s.replace(/\[Sapaan\]/gi,"Anda"),h=s=>({1:"Fondasi Keuangan",2:"Arus Kas",3:"Perencanaan",4:"Digital & Keamanan"})[s]||`Module ${s}`;if(o)return e("div",{class:"loading",children:"Loading..."});const u=n.reduce((s,p)=>{const l=p.module_number||0;return s[l]||(s[l]=[]),s[l].push(p),s},{});return e("div",{style:{display:"flex",gap:"20px",height:"calc(100vh - 100px)"},children:[e("div",{style:{width:"280px",flexShrink:0,background:"#fff",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",border:"1px solid #dee2e6"},children:[e("div",{style:{padding:"16px",borderBottom:"1px solid #dee2e6",background:"#f8f9fa",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("h2",{style:{margin:0,fontSize:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e(me,{size:18})," 15 Weeks"]}),e("button",{onClick:c,title:"Refresh from database",style:{padding:"6px 10px",background:"#fff",border:"1px solid #dee2e6",borderRadius:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[e(Je,{size:14})," Refresh"]})]}),e("div",{style:{flex:1,overflowY:"auto"},children:Object.keys(u).sort((s,p)=>s-p).map(s=>e("div",{children:[e("div",{style:{padding:"8px 16px",background:"#e9ecef",fontSize:"11px",fontWeight:600,color:"#6c757d",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Modul ",s,": ",h(parseInt(s))]}),u[s].map(p=>{const l=t?.week_number===p.week_number,k=(p.module_name||`Week ${p.week_number}`).replace(/^Modul\s+\d+\s*-\s*/i,"").replace(/^Minggu\s+\d+:\s*/i,"");return e("div",{onClick:()=>i(p),style:{padding:"12px 16px",cursor:"pointer",borderLeft:l?"3px solid #0d6efd":"3px solid transparent",background:l?"#e7f1ff":"transparent",transition:"background 0.15s"},children:[e("div",{style:{fontSize:"10px",color:"#6c757d",marginBottom:"2px"},children:["Week ",p.week_number]}),e("div",{style:{fontSize:"13px",fontWeight:500,color:l?"#0d6efd":"#212529"},children:k}),e("div",{style:{fontSize:"11px",color:"#6c757d",marginTop:"2px"},children:[p.bank_soal?.length||0," questions"]})]},p.week_number)})]},s))})]}),e("div",{style:{flex:1,background:"#fff",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",border:"1px solid #dee2e6"},children:t?e(L,{children:[e("div",{style:{padding:"16px",borderBottom:"1px solid #dee2e6",background:"#f8f9fa"},children:[e("div",{style:{fontSize:"11px",color:"#6c757d",marginBottom:"4px"},children:["Week ",t.week_number," • Module ",t.module_number]}),e("h2",{style:{margin:0,fontSize:"18px"},children:(t.module_name||"").replace(/^Modul\s+\d+\s*-\s*/i,"").replace(/^Minggu\s+\d+:\s*/i,"")})]}),e("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:[e("h3",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px",color:"#212529"},children:[e(Be,{size:16})," Bank Soal (",t.bank_soal?.length||0,")"]}),e("div",{style:{border:"1px solid #dee2e6",borderRadius:"6px",overflow:"hidden"},children:(t.bank_soal||[]).map((s,p)=>e("div",{style:{borderBottom:p<t.bank_soal.length-1?"1px solid #e9ecef":"none",background:p%2===0?"#fff":"#f8f9fa"},children:e("div",{style:{padding:"12px 14px"},children:[e("div",{style:{fontWeight:600,fontSize:"13px",color:"#212529",marginBottom:"8px"},children:[e("span",{style:{color:"#6c757d",marginRight:"8px"},children:[p+1,"."]}),g(s.question)]}),e("div",{style:{paddingLeft:"20px"},children:[(s.options||[]).map((l,k)=>{const S=k===s.correct;return e("div",{style:{padding:"6px 10px",marginBottom:"4px",background:S?"#d1e7dd":"#fff",border:`1px solid ${S?"#198754":"#dee2e6"}`,borderRadius:"4px",fontSize:"12px",color:S?"#0f5132":"#495057",display:"flex",alignItems:"center"},children:[e("strong",{style:{minWidth:"20px"},children:[String.fromCharCode(97+k),"."]}),e("span",{style:{flex:1},children:g(l)}),S&&e("span",{style:{color:"#198754"},children:"✓"})]},k)}),s.explanation&&e("div",{style:{marginTop:"8px",padding:"8px 10px",background:"#fff3cd",borderLeft:"3px solid #ffc107",fontSize:"12px",color:"#664d03",display:"flex",gap:"6px"},children:[e(ie,{size:14,style:{flexShrink:0,marginTop:"1px"}}),e("span",{children:g(s.explanation)})]})]})]})},p))}),t.indikator_kelulusan?.length>0&&e("div",{style:{marginTop:"20px"},children:[e("h3",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px",color:"#212529"},children:[e(Ve,{size:16})," Indikator Kelulusan"]}),e("div",{style:{border:"1px solid #dee2e6",borderRadius:"6px",padding:"12px 14px",background:"#f8f9fa"},children:t.indikator_kelulusan.map((s,p)=>e("div",{style:{padding:"4px 0",fontSize:"13px",color:"#495057",display:"flex"},children:[e("span",{style:{minWidth:"20px",color:"#198754",fontWeight:600},children:[p+1,"."]}),e("span",{children:s})]},p))})]}),t.source_doc_id&&e("div",{style:{marginTop:"20px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #dee2e6"},children:e("a",{href:`https://docs.google.com/document/d/${t.source_doc_id}`,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"6px",color:"#0d6efd",fontSize:"13px",textDecoration:"none"},children:[e(Ii,{size:14})," View source document in Google Drive"]})})]})]}):e("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"#6c757d"},children:"Select a week to view questions"})})]})}const ln=t=>{const i=t.phone?.slice(-4)||"1234",n=parseInt(i,10)||1234,r=(N,X)=>N+n%X-X/2,o={slik_status:n%10<8?"COL1":"COL2",slik_last_col2_months:6+n%18,monthly_installment:r(5e5,2e5),net_profit:r(3e6,1e6),total_monthly_debt:r(8e5,4e5),claimed_monthly_revenue:r(5e6,2e6)},a=t.literacy||{},c=Object.keys(a).filter(N=>N.startsWith("week_")&&a[N]?.score>=100).length/15*100,g=Object.values(a).filter(N=>N?.score).map(N=>N.score),h=g.length>0?g.reduce((N,X)=>N+X,0)/g.length:0,u=t.majelis?r(88,20):0,s=t.majelis?n%3:3,p=t.business_intelligence||[],l=p.filter(N=>N.type==="inventory").sort((N,X)=>new Date(X.analyzed_at)-new Date(N.analyzed_at))[0],k=p.filter(N=>N.type==="building").sort((N,X)=>new Date(X.analyzed_at)-new Date(N.analyzed_at))[0],S=l?.data?.stock_level==="High"?85:l?.data?.stock_level==="Medium"?60:l?.data?.stock_level==="Low"?30:r(50,40),_=k?.data?.estimated_value||r(15e6,1e7),b={slik:["COL3","COL4","COL5"].includes(o.slik_status),goldenRule:o.monthly_installment/o.net_profit>.3},v=b.slik||b.goldenRule;let C=0;o.slik_status==="COL1"?C=8:o.slik_status==="COL2"&&(o.slik_last_col2_months>12?C=6.4:o.slik_last_col2_months>=6?C=4:C=2);const R=o.monthly_installment/o.net_profit*100;let f=R<=15?7:R<=20?5:R<=25?3:R<=30?1:0;const w=.2+n%50/100;let M=w<=.3?3:w<=.5?2:w<=.7?1:0;const D=o.total_monthly_debt/o.net_profit*100;let j=D<=35?2:D<=40?1.5:D<=45?1:D<=50?.5:0;const m=_/(o.claimed_monthly_revenue*3);let A=m>=.8&&m<=1.2?5:m>=.6&&m<.8||m>1.2&&m<=1.4?3:m>=.4&&m<.6||m>1.4&&m<=1.6?1:0,y=S>=75?5:S>=50?3:S>=25?1:0;const I=c>=100?2.5:c>=80?1.5:0,x=h>=90?2.5:h>=75?1.5:0,B=I+x;let T=0;t.majelis&&(u>=95&&s===0?T=5:u>=85||s<=1?T=3:(u>=75||s<=2)&&(T=1));const F=C+f+M+j+A+y+B+T,K=40,Y=Math.round(F/K*550+300);return{rawScore:Math.round(F*10)/10,maxScore:K,normalizedScore:v?300:Y,isRejected:v,autoReject:b,factors:[{name:"SLIK OJK Status",score:C,max:8,weight:20,icon:$t,category:"A"},{name:"Repayment Capacity",score:f,max:7,weight:17.5,icon:$e,category:"A",detail:`${R.toFixed(1)}%`},{name:"Cashflow Volatility",score:M,max:3,weight:7.5,icon:vi,category:"A",detail:`CV ${w.toFixed(2)}`},{name:"Debt Burden Ratio",score:j,max:2,weight:5,icon:Ai,category:"A",detail:`${D.toFixed(1)}%`},{name:"Capacity Match",score:A,max:5,weight:12.5,icon:re,category:"B",detail:`Ratio ${m.toFixed(2)}`},{name:"Inventory Level",score:y,max:5,weight:12.5,icon:He,category:"B",detail:`${S}%`},{name:"Financial Literacy",score:B,max:5,weight:12.5,icon:me,category:"C",detail:`${c.toFixed(0)}% done`},{name:"Majelis Cohesion",score:T,max:5,weight:12.5,icon:V,category:"C",detail:t.majelis?`${u}% att.`:"No group"}],sections:{A:{name:"Financial Capacity",score:C+f+M+j,max:20,weight:60},B:{name:"Business Validation",score:A+y,max:10,weight:20},C:{name:"Literacy & Quality",score:B+T,max:10,weight:20}},riskLevel:v?"Rejected":F>=32?"Low":F>=24?"Medium":F>=16?"High":"Very High",loanEligibility:v?0:Math.round(F*25e4),interestRate:v?null:F>=32?12:F>=24?15:F>=16?18:24,insights:{A:C+f+M+j>=14?"Strong financial foundation with healthy repayment capacity":C+f+M+j>=10?"Moderate financial health — monitor debt levels":"Financial stress indicators present — requires attention",B:A+y>=7?"Business assets align well with claimed revenue":A+y>=4?"Some gaps between assets and revenue claims":"Significant validation concerns — verify business data",C:B+T>=7?"High engagement in literacy program and group activities":B+T>=4?"Moderate program participation":"Low engagement — encourage participation",overall:v?"Application fails mandatory compliance checks":F>=32?"Borrower demonstrates strong creditworthiness across all dimensions":F>=24?"Acceptable risk profile with room for improvement in specific areas":"Elevated risk — consider smaller loan amount or additional guarantees"}}},dn=(t,i,n)=>{const r=i/n*100;return{"SLIK OJK Status":r>=80?"Clean credit history — no delinquencies":r>=50?"Minor past issues, now resolved":"Credit history concerns detected","Repayment Capacity":r>=80?"Comfortable margin for loan payments":r>=50?"Adequate but tight repayment buffer":"High payment burden relative to income","Cashflow Volatility":r>=80?"Stable, predictable income stream":r>=50?"Some income fluctuation — typical for UMKM":"Highly variable income — higher risk","Debt Burden Ratio":r>=80?"Low existing debt obligations":r>=50?"Moderate debt load":"Heavy debt burden","Capacity Match":r>=80?"Business assets support revenue claims":r>=50?"Partial asset-revenue alignment":"Revenue claims exceed visible capacity","Inventory Level":r>=80?"Well-stocked, active business":r>=50?"Adequate inventory levels":"Low stock — potential cash flow issues","Financial Literacy":r>=80?"Highly engaged in learning program":r>=50?"Progressing through curriculum":"Early stage — encourage completion","Majelis Cohesion":r>=80?"Strong group participation & peer support":r>=50?"Regular group attendance":"Limited group engagement"}[t]||""},cn=({userData:t})=>{const i=ln(t),{rawScore:n,maxScore:r,isRejected:o,autoReject:a,factors:d,sections:c,riskLevel:g,loanEligibility:h,interestRate:u,insights:s}=i,p=_=>o?"#EF4444":_>=32?"#10B981":_>=24?"#F59E0B":"#EF4444",l=_=>_==="Low"?"#10B981":_==="Medium"?"#F59E0B":"#EF4444",k=n/r*100,S={A:"Financial Capacity & History",B:"Business Validation",C:"Financial Literacy & Quality"};return e("div",{style:"margin-top: 32px;",children:[e("div",{style:"display: flex; align-items: center; gap: 12px; margin-bottom: 8px;",children:[e("div",{style:"width: 4px; height: 32px; background: linear-gradient(180deg, #63297A 0%, #F9CF79 100%); border-radius: 2px;"}),e("h2",{style:"margin: 0; font-size: 22px; color: #1F2937;",children:"Credit Risk Assessment"})]}),e("p",{style:"margin: 0 0 24px; font-size: 13px; color: #6B7280; padding-left: 16px;",children:"Powered by Amartha Scoring Model v1.0 — Multi-factor risk analysis based on OJK guidelines"}),o&&e("div",{style:"margin-bottom: 24px; padding: 20px; background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%); border-radius: 12px; border-left: 4px solid #DC2626;",children:e("div",{style:"display: flex; align-items: flex-start; gap: 16px;",children:[e("div",{style:"width: 48px; height: 48px; background: #DC2626; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;",children:e(wi,{size:24,style:"color: white;"})}),e("div",{children:[e("div",{style:"font-size: 16px; font-weight: 700; color: #DC2626; margin-bottom: 4px;",children:"Application Auto-Rejected"}),e("div",{style:"font-size: 13px; color: #991B1B; margin-bottom: 8px;",children:[a.slik&&"• SLIK OJK violation: Collectibility status 3/4/5 detected within 12 months",a.slik&&a.goldenRule&&e("br",{}),a.goldenRule&&"• Golden Rule violation: Installment exceeds 30% of net profit threshold"]}),e("div",{style:"font-size: 11px; color: #B91C1C;",children:"Ref: OJK Regulation No. 77/POJK.01/2016 on Information Technology-Based Lending Services"})]})]})}),e("div",{class:"card",style:"margin-bottom: 24px; padding: 0; overflow: hidden;",children:[e("div",{style:"background: linear-gradient(135deg, #1F2937 0%, #374151 100%); padding: 24px; color: white;",children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.7; margin-bottom: 4px;",children:"Executive Summary"}),e("div",{style:"font-size: 18px; font-weight: 600;",children:"Borrower Risk Profile Analysis"})]}),e("div",{style:"padding: 24px;",children:[e("div",{style:"display: grid; grid-template-columns: 200px 1fr 1fr; gap: 32px; align-items: center;",children:[e("div",{style:"text-align: center;",children:[e("div",{style:"position: relative; width: 140px; height: 140px; margin: 0 auto;",children:[e("svg",{viewBox:"0 0 140 140",style:"transform: rotate(-90deg);",children:[e("circle",{cx:"70",cy:"70",r:"58",fill:"none",stroke:"#E5E7EB","stroke-width":"10"}),e("circle",{cx:"70",cy:"70",r:"58",fill:"none",stroke:p(n),"stroke-width":"10","stroke-dasharray":`${k*3.64} 364`,"stroke-linecap":"round"})]}),e("div",{style:"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;",children:[e("div",{style:`font-size: 32px; font-weight: 800; color: ${p(n)}; line-height: 1;`,children:n}),e("div",{style:"font-size: 11px; color: #9CA3AF;",children:["of ",r," pts"]})]})]}),e("div",{style:`margin-top: 12px; padding: 6px 16px; border-radius: 6px; display: inline-block; background: ${l(g)}; color: white; font-weight: 700; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;`,children:[g," Risk"]})]}),e("div",{children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: #6B7280; margin-bottom: 12px;",children:"Key Metrics"}),e("div",{style:"display: grid; gap: 8px;",children:Object.entries(c).map(([_,b])=>{const v=Math.round(b.score/b.max*100);return e("div",{style:"display: flex; align-items: center; gap: 12px;",children:[e("div",{style:`width: 24px; height: 24px; border-radius: 4px; background: ${v>=70?"#D1FAE5":v>=40?"#FEF3C7":"#FEE2E2"}; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700; color: ${v>=70?"#065F46":v>=40?"#92400E":"#991B1B"};`,children:_}),e("div",{style:"flex: 1;",children:e("div",{style:"height: 6px; background: #E5E7EB; border-radius: 3px; overflow: hidden;",children:e("div",{style:`height: 100%; width: ${v}%; background: ${v>=70?"#10B981":v>=40?"#F59E0B":"#EF4444"}; border-radius: 3px;`})})}),e("div",{style:"font-size: 12px; font-weight: 600; color: #374151; width: 60px; text-align: right;",children:[b.score,"/",b.max]})]},_)})})]}),e("div",{style:`padding: 20px; border-radius: 12px; text-align: center; ${o?"background: #FEE2E2; border: 2px solid #FECACA;":"background: linear-gradient(135deg, #63297A 0%, #7E3D99 100%); color: white;"}`,children:[e("div",{style:`font-size: 11px; text-transform: uppercase; letter-spacing: 1px; ${o?"color: #991B1B;":"opacity: 0.85;"} margin-bottom: 8px;`,children:o?"Application Status":"Loan Eligibility"}),o?e("div",{style:"font-size: 20px; font-weight: 800; color: #DC2626;",children:"REJECTED"}):e(L,{children:[e("div",{style:"font-size: 24px; font-weight: 800;",children:["Rp ",(h/1e6).toFixed(1),"M"]}),e("div",{style:"font-size: 12px; opacity: 0.85; margin-top: 4px;",children:["@ ",u,"% p.a."]})]})]})]}),e("div",{class:"so-what-box",style:"margin-top: 20px;",children:[e("div",{class:"so-what-title",children:"💡 Key Insight"}),e("div",{class:"so-what-text",children:s.overall})]})]})]}),e("div",{class:"card",style:"margin-bottom: 24px; padding: 0; overflow: hidden;",children:[e("div",{style:"padding: 20px 24px; border-bottom: 1px solid #E5E7EB; display: flex; justify-content: space-between; align-items: center;",children:[e("div",{children:[e("div",{style:"font-size: 15px; font-weight: 600; color: #1F2937;",children:"Scoring Factor Analysis"}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"8 factors across 3 categories weighted by risk impact"})]}),e("div",{style:"display: flex; gap: 12px; font-size: 11px;",children:[e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 8px; height: 8px; border-radius: 50%; background: #10B981;"})," Optimal"]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 8px; height: 8px; border-radius: 50%; background: #F59E0B;"})," Moderate"]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 8px; height: 8px; border-radius: 50%; background: #EF4444;"})," At Risk"]})]})]}),["A","B","C"].map(_=>{const b=d.filter(C=>C.category===_),v=c[_];return e("div",{style:"border-bottom: 1px solid #E5E7EB;",children:[e("div",{style:"padding: 16px 24px; background: #F9FAFB; display: flex; justify-content: space-between; align-items: center;",children:[e("div",{style:"display: flex; align-items: center; gap: 12px;",children:[e("div",{style:"width: 28px; height: 28px; border-radius: 6px; background: #63297A; color: white; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 700;",children:_}),e("div",{children:[e("div",{style:"font-size: 13px; font-weight: 600; color: #1F2937;",children:S[_]}),e("div",{style:"font-size: 11px; color: #6B7280;",children:["Weight: ",v.weight,"% of total score"]})]})]}),e("div",{style:"text-align: right;",children:[e("div",{style:"font-size: 18px; font-weight: 700; color: #1F2937;",children:[v.score,e("span",{style:"font-size: 13px; color: #6B7280;",children:["/",v.max]})]}),e("div",{style:`font-size: 11px; font-weight: 600; color: ${v.score/v.max>=.7?"#059669":v.score/v.max>=.4?"#D97706":"#DC2626"};`,children:[Math.round(v.score/v.max*100),"% achieved"]})]})]}),e("div",{style:"padding: 12px 24px; background: linear-gradient(90deg, rgba(99, 41, 122, 0.03) 0%, transparent 100%); border-left: 3px solid #63297A;",children:e("div",{style:"font-size: 12px; color: #4B5563; display: flex; align-items: center; gap: 6px;",children:[e("span",{style:"font-size: 14px;",children:"💡"})," ",s[_]]})}),e("div",{style:"padding: 0 24px;",children:b.map((C,R)=>{const f=C.icon,w=C.score/C.max*100,M=w>=70?"#10B981":w>=40?"#F59E0B":"#EF4444",D=w>=70?"Optimal":w>=40?"Moderate":"At Risk",j=dn(C.name,C.score,C.max);return e("div",{style:`padding: 14px 0; ${R<b.length-1?"border-bottom: 1px solid #F3F4F6;":""}`,children:[e("div",{style:"display: grid; grid-template-columns: 32px 1fr 100px 80px 90px; align-items: center; gap: 16px;",children:[e("div",{style:`width: 32px; height: 32px; border-radius: 8px; background: ${M}15; display: flex; align-items: center; justify-content: center;`,children:e(f,{size:16,style:`color: ${M};`})}),e("div",{children:[e("div",{style:"font-size: 13px; font-weight: 500; color: #1F2937;",children:C.name}),e("div",{style:"font-size: 11px; color: #6B7280;",children:C.detail||`Weight: ${C.weight}%`})]}),e("div",{style:"height: 6px; background: #E5E7EB; border-radius: 3px; overflow: hidden;",children:e("div",{class:"progress-bar-fill",style:`height: 100%; width: ${w}%; background: ${M}; border-radius: 3px;`})}),e("div",{style:"text-align: right; font-size: 14px; font-weight: 700; color: #1F2937;",children:[C.score,e("span",{style:"font-size: 11px; color: #9CA3AF; font-weight: 400;",children:["/",C.max]})]}),e("div",{style:`text-align: center; font-size: 10px; padding: 4px 8px; border-radius: 4px; background: ${M}15; color: ${M}; font-weight: 600; text-transform: uppercase;`,children:D})]}),e("div",{style:"margin-left: 48px; margin-top: 6px; font-size: 11px; color: #6B7280; font-style: italic;",children:j})]},R)})})]},_)})]}),e("div",{style:"padding: 16px 20px; background: #F8FAFC; border-radius: 12px; border: 1px solid #E2E8F0;",children:e("div",{style:"display: flex; gap: 16px;",children:[e("div",{style:"width: 40px; height: 40px; background: #63297A15; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;",children:e(Be,{size:20,style:"color: #63297A;"})}),e("div",{children:[e("div",{style:"font-size: 13px; font-weight: 600; color: #1F2937; margin-bottom: 4px;",children:"Scoring Methodology"}),e("div",{style:"font-size: 12px; color: #64748B; line-height: 1.5;",children:["This assessment uses Amartha's proprietary credit scoring model combining ",e("strong",{children:"SLIK OJK data"})," (payment history),",e("strong",{children:"financial ratios"})," (RPC, DBR, cashflow volatility), ",e("strong",{children:"AI-powered business validation"})," (inventory & asset analysis), and ",e("strong",{children:"behavioral indicators"})," (literacy completion, group cohesion). Auto-reject rules comply with OJK microfinance guidelines."]}),e("div",{style:"margin-top: 8px; display: flex; gap: 16px; font-size: 11px; color: #94A3B8;",children:[e("span",{children:"📊 Real data: Literacy, Majelis, Business Intelligence"}),e("span",{children:"🔄 Simulated: SLIK, Income/Debt figures"})]})]})]})})]})};function pn({phone:t}){const[i,n]=E(null),[r,o]=E(!0),[a,d]=E(null),[c,g]=E("all"),[h,u]=E(new Set),[s,p]=E(null),l=async()=>{try{const m=await fetch(`/api/users/${t}/complete`);if(!m.ok)throw new Error("User not found");const A=await m.json();n(A),A.business?.category_id&&k(A.business.category_id,A.business.maturity_level||1)}catch(m){d(m.message)}finally{o(!1)}},k=async(m,A)=>{if(m)try{const x=(await(await fetch("/api/knowledge/business-classifications")).json()).find(B=>B.category_id===m);if(x){const B=x.maturity_levels?.find(T=>T.level===A);B?.roadmap&&p({goal:B.roadmap.description,kpis:B.roadmap.kpis||[]})}}catch(y){console.error("Failed to fetch KPIs:",y)}};J(()=>{l();const m=new EventSource(`/api/events/${t}`);return m.onmessage=A=>{const y=JSON.parse(A.data);y.type==="bi_added"&&(u(I=>new Set([...I,y.data.id])),l(),setTimeout(()=>{u(I=>{const x=new Set(I);return x.delete(y.data.id),x})},5e3))},()=>m.close()},[t]);const S=m=>m?new Date(m).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-",_=m=>m?new Date(m).toLocaleString("id-ID",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-",b=m=>`Rp ${(m||0).toLocaleString("id-ID")}`;if(r)return e("div",{class:"card",style:"text-align: center; padding: 60px;",children:"Loading..."});if(a)return e("div",{class:"card",style:"text-align: center; padding: 60px; color: #EF4444;",children:a});if(!i)return null;const v=()=>{if(!i.literacy)return{completed:0,total:15,percentage:0};const A=Object.keys(i.literacy).filter(y=>y.startsWith("week_")).filter(y=>i.literacy[y]?.score>=100).length;return{completed:A,total:15,percentage:Math.round(A/15*100)}},C=i.loan?.history?.length>0?i.loan.history[i.loan.history.length-1].balance_after:0,R=c==="all"?i.business_intelligence:i.business_intelligence?.filter(m=>m.type===c),f=v(),w=i.business_intelligence||[],M=w.filter(m=>m.type==="building").sort((m,A)=>new Date(A.analyzed_at)-new Date(m.analyzed_at))[0],D=w.filter(m=>m.type==="inventory").sort((m,A)=>new Date(A.analyzed_at)-new Date(m.analyzed_at))[0],j=w.filter(m=>m.type==="ledger").sort((m,A)=>new Date(A.analyzed_at)-new Date(m.analyzed_at))[0];return e("div",{children:[e("button",{onClick:()=>window.history.back(),class:"btn btn-secondary",style:"margin-bottom: 20px;",children:[e(ki,{size:18})," Back to Users"]}),e("div",{class:"card",style:"margin-bottom: 24px; padding: 0; overflow: hidden;",children:[e("div",{style:"background: linear-gradient(135deg, #1F2937 0%, #374151 100%); padding: 24px; color: white;",children:e("div",{style:"display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 20px;",children:[e("div",{style:"display: flex; gap: 20px; align-items: center;",children:[e("div",{style:"width: 72px; height: 72px; border-radius: 16px; background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: center; color: white; font-size: 28px; font-weight: 700; border: 2px solid rgba(255,255,255,0.2);",children:i.name?.charAt(0)?.toUpperCase()}),e("div",{children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.7; margin-bottom: 4px;",children:"Borrower Profile"}),e("h1",{style:"margin: 0 0 4px 0; font-size: 26px; font-weight: 700;",children:i.name}),e("div",{style:"display: flex; gap: 16px; font-size: 13px; opacity: 0.85;",children:[e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e($i,{size:14})," ",i.phone]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e(Me,{size:14})," Member since ",S(i.created_at)]})]})]})]}),e("div",{style:`padding: 8px 20px; border-radius: 8px; font-size: 13px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; ${i.status==="active"?"background: #10B981; color: white;":"background: #F59E0B; color: white;"}`,children:i.status})]})}),e("div",{style:"padding: 20px 24px; display: grid; grid-template-columns: repeat(5, 1fr); gap: 24px; border-bottom: 1px solid #E5E7EB;",children:[e("div",{style:"text-align: center;",children:[e("div",{style:"font-size: 24px; font-weight: 800; color: #63297A;",children:b(i.loan?.limit||0).replace("Rp ","")}),e("div",{style:"font-size: 11px; color: #6B7280; text-transform: uppercase; letter-spacing: 0.5px;",children:"Loan Limit"})]}),e("div",{style:"text-align: center;",children:[e("div",{style:`font-size: 24px; font-weight: 800; ${C>0?"color: #DC2626;":"color: #10B981;"}`,children:b(C).replace("Rp ","")}),e("div",{style:"font-size: 11px; color: #6B7280; text-transform: uppercase; letter-spacing: 0.5px;",children:"Outstanding"})]}),e("div",{style:"text-align: center;",children:[e("div",{style:`font-size: 24px; font-weight: 800; ${f.percentage>=70?"color: #10B981;":f.percentage>=40?"color: #F59E0B;":"color: #EF4444;"}`,children:[f.percentage,"%"]}),e("div",{style:"font-size: 11px; color: #6B7280; text-transform: uppercase; letter-spacing: 0.5px;",children:"Literacy"})]}),e("div",{style:"text-align: center;",children:[e("div",{style:"font-size: 24px; font-weight: 800; color: #2563EB;",children:[i.business?.maturity_level||0,e("span",{style:"font-size: 14px; color: #9CA3AF;",children:"/5"})]}),e("div",{style:"font-size: 11px; color: #6B7280; text-transform: uppercase; letter-spacing: 0.5px;",children:"Biz Level"})]}),e("div",{style:"text-align: center;",children:[e("div",{style:"font-size: 24px; font-weight: 800; color: #7C3AED;",children:w.length}),e("div",{style:"font-size: 11px; color: #6B7280; text-transform: uppercase; letter-spacing: 0.5px;",children:"BI Records"})]})]}),e("div",{style:"padding: 20px 24px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px;",children:[e("div",{children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: #6B7280; margin-bottom: 8px;",children:"Personal"}),e("div",{style:"font-size: 13px; color: #374151;",children:[e("div",{style:"margin-bottom: 4px;",children:[e("span",{style:"color: #9CA3AF;",children:"Gender:"})," ",i.profile?.gender||"-"]}),e("div",{style:"margin-bottom: 4px;",children:[e("span",{style:"color: #9CA3AF;",children:"DOB:"})," ",i.profile?.dob?S(i.profile.dob):"-"]}),e("div",{children:[e("span",{style:"color: #9CA3AF;",children:"Address:"})," ",i.profile?.address||"-"]})]})]}),e("div",{children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: #6B7280; margin-bottom: 8px;",children:"Business"}),e("div",{style:"font-size: 13px; color: #374151;",children:[e("div",{style:"margin-bottom: 4px;",children:[e("span",{style:"color: #9CA3AF;",children:"Name:"})," ",i.business?.name||"-"]}),e("div",{style:"margin-bottom: 4px;",children:[e("span",{style:"color: #9CA3AF;",children:"Category:"})," ",i.business?.category||"-"]}),e("div",{children:[e("span",{style:"color: #9CA3AF;",children:"Location:"})," ",i.business?.location||"-"]})]})]}),e("div",{children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: #6B7280; margin-bottom: 8px;",children:"Majelis"}),i.majelis?e("div",{style:"font-size: 13px; color: #374151;",children:[e("div",{style:"margin-bottom: 4px;",children:[e("span",{style:"color: #9CA3AF;",children:"Group:"})," ",i.majelis.name]}),e("div",{style:"margin-bottom: 4px;",children:[e("span",{style:"color: #9CA3AF;",children:"Schedule:"})," ",i.majelis.schedule_day,", ",i.majelis.schedule_time]}),e("div",{children:[e("span",{style:"color: #9CA3AF;",children:"Members:"})," ",i.majelis.member_count]})]}):e("div",{style:"font-size: 13px; color: #9CA3AF;",children:"Not assigned"})]})]})]}),e("div",{class:"card",style:"margin-bottom: 24px; padding: 0; overflow: hidden;",children:[e("div",{style:"padding: 16px 24px; border-bottom: 1px solid #E5E7EB; display: flex; align-items: center; gap: 12px;",children:[e("div",{style:"width: 32px; height: 32px; background: #63297A; border-radius: 8px; display: flex; align-items: center; justify-content: center;",children:e($e,{size:16,style:"color: white;"})}),e("div",{children:[e("div",{style:"font-size: 15px; font-weight: 600; color: #1F2937;",children:"Loan & Payment Status"}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"Current loan position and transaction history"})]})]}),i.loan&&i.loan.limit>0?e(L,{children:[e("div",{style:"padding: 20px 24px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; background: #F9FAFB;",children:[e("div",{children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #6B7280; margin-bottom: 4px;",children:"Credit Limit"}),e("div",{style:"font-size: 20px; font-weight: 700; color: #1F2937;",children:b(i.loan.limit)})]}),e("div",{children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #6B7280; margin-bottom: 4px;",children:"Outstanding Balance"}),e("div",{style:`font-size: 20px; font-weight: 700; ${C>0?"color: #DC2626;":"color: #10B981;"}`,children:b(C)})]}),e("div",{children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #6B7280; margin-bottom: 4px;",children:"Available Credit"}),e("div",{style:"font-size: 20px; font-weight: 700; color: #10B981;",children:b(i.loan.remaining||i.loan.limit-C)})]}),e("div",{children:[e("div",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #6B7280; margin-bottom: 4px;",children:"Utilization"}),e("div",{style:"font-size: 20px; font-weight: 700; color: #63297A;",children:[i.loan.limit>0?Math.round(C/i.loan.limit*100):0,"%"]})]})]}),i.loan.next_payment_date&&e("div",{style:"padding: 16px 24px; background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%); display: flex; justify-content: space-between; align-items: center;",children:[e("div",{style:"display: flex; align-items: center; gap: 12px;",children:[e(Ge,{size:20,style:"color: #92400E;"}),e("div",{children:[e("div",{style:"font-size: 13px; font-weight: 600; color: #92400E;",children:"Next Payment Due"}),e("div",{style:"font-size: 12px; color: #A16207;",children:S(i.loan.next_payment_date)})]})]}),e("div",{style:"font-size: 20px; font-weight: 800; color: #92400E;",children:b(i.loan.next_payment_amount)})]}),i.loan.history?.length>0&&e("div",{style:"padding: 20px 24px;",children:[e("div",{style:"font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; color: #6B7280; margin-bottom: 12px;",children:"Transaction History"}),e("table",{style:"width: 100%; border-collapse: collapse; font-size: 13px;",children:[e("thead",{children:e("tr",{style:"border-bottom: 2px solid #E5E7EB;",children:[e("th",{style:"text-align: left; padding: 10px 0; font-weight: 600; color: #374151;",children:"Date"}),e("th",{style:"text-align: left; padding: 10px 0; font-weight: 600; color: #374151;",children:"Type"}),e("th",{style:"text-align: left; padding: 10px 0; font-weight: 600; color: #374151;",children:"Description"}),e("th",{style:"text-align: right; padding: 10px 0; font-weight: 600; color: #374151;",children:"Amount"}),e("th",{style:"text-align: right; padding: 10px 0; font-weight: 600; color: #374151;",children:"Balance"})]})}),e("tbody",{children:i.loan.history.map((m,A)=>e("tr",{style:`border-bottom: 1px solid #F3F4F6; ${A===i.loan.history.length-1?"background: #F0FDF4;":""}`,children:[e("td",{style:"padding: 12px 0; color: #6B7280;",children:S(m.date)}),e("td",{style:"padding: 12px 0;",children:e("span",{style:`padding: 4px 10px; border-radius: 4px; font-size: 11px; font-weight: 600; ${m.type==="disbursement"?"background: #DBEAFE; color: #1E40AF;":"background: #D1FAE5; color: #065F46;"}`,children:m.type.toUpperCase()})}),e("td",{style:"padding: 12px 0; color: #374151;",children:m.description||"-"}),e("td",{style:`padding: 12px 0; text-align: right; font-weight: 600; ${m.type==="disbursement"?"color: #DC2626;":"color: #10B981;"}`,children:[m.type==="disbursement"?"-":"+",b(m.amount)]}),e("td",{style:"padding: 12px 0; text-align: right; font-weight: 700; color: #1F2937;",children:b(m.balance_after)})]},m.id))})]})]})]}):e("div",{style:"padding: 40px; text-align: center; color: #6B7280;",children:[e($e,{size:32,style:"color: #D1D5DB; margin-bottom: 12px;"}),e("div",{children:"No active loan"})]})]}),e("div",{class:"card",style:"margin-bottom: 24px; padding: 0; overflow: hidden;",children:[e("div",{style:"padding: 16px 24px; border-bottom: 1px solid #E5E7EB; display: flex; justify-content: space-between; align-items: center;",children:[e("div",{style:"display: flex; align-items: center; gap: 12px;",children:[e("div",{style:"width: 32px; height: 32px; background: #2563EB; border-radius: 8px; display: flex; align-items: center; justify-content: center;",children:e(re,{size:16,style:"color: white;"})}),e("div",{children:[e("div",{style:"font-size: 15px; font-weight: 600; color: #1F2937;",children:"Business Intelligence"}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"AI-analyzed business assets, inventory, and financials"})]})]}),e("div",{style:"display: flex; gap: 6px;",children:["all","building","inventory","ledger"].map(m=>e("button",{onClick:()=>g(m),style:`padding: 6px 12px; border-radius: 6px; font-size: 11px; font-weight: 600; border: none; cursor: pointer; ${c===m?"background: #2563EB; color: white;":"background: #F3F4F6; color: #6B7280;"}`,children:m==="all"?"All":m.charAt(0).toUpperCase()+m.slice(1)},m))})]}),w.length>0?e(L,{children:[e("div",{style:"padding: 20px 24px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; background: #F9FAFB;",children:[e("div",{style:"padding: 16px; background: white; border-radius: 10px; border: 1px solid #E5E7EB;",children:[e("div",{style:"display: flex; align-items: center; gap: 8px; margin-bottom: 8px;",children:[e(ze,{size:16,style:"color: #7C3AED;"}),e("span",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #6B7280;",children:"Asset Valuation"})]}),e("div",{style:"font-size: 22px; font-weight: 700; color: #1F2937;",children:M?.data?.estimated_value?b(M.data.estimated_value):"-"}),M?.data?.condition&&e("div",{style:"font-size: 11px; color: #6B7280; margin-top: 4px;",children:[M.data.building_type," • ",M.data.condition]})]}),e("div",{style:"padding: 16px; background: white; border-radius: 10px; border: 1px solid #E5E7EB;",children:[e("div",{style:"display: flex; align-items: center; gap: 8px; margin-bottom: 8px;",children:[e(He,{size:16,style:"color: #2563EB;"}),e("span",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #6B7280;",children:"Inventory Value"})]}),e("div",{style:"font-size: 22px; font-weight: 700; color: #1F2937;",children:D?.data?.inventory_value_estimate?b(D.data.inventory_value_estimate):"-"}),D?.data?.total_items_count&&e("div",{style:"font-size: 11px; color: #6B7280; margin-top: 4px;",children:[D.data.total_items_count," items • ",D.data.stock_level," stock"]})]}),e("div",{style:"padding: 16px; background: white; border-radius: 10px; border: 1px solid #E5E7EB;",children:[e("div",{style:"display: flex; align-items: center; gap: 8px; margin-bottom: 8px;",children:[e(ce,{size:16,style:"color: #059669;"}),e("span",{style:"font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #6B7280;",children:"Monthly Cashflow"})]}),e("div",{style:"font-size: 22px; font-weight: 700; color: #1F2937;",children:j?.data?.monthly_cashflow_estimate?b(j.data.monthly_cashflow_estimate):"-"}),j?.data?.daily_income_estimate&&e("div",{style:"font-size: 11px; color: #6B7280; margin-top: 4px;",children:[b(j.data.daily_income_estimate),"/day income"]})]})]}),e("div",{class:"key-takeaway",style:"margin: 0 24px 16px;",children:[e("div",{class:"key-takeaway-title",children:"📊 Business Health Indicator"}),e("div",{class:"key-takeaway-text",children:M&&D?D.data?.stock_level==="High"?"Strong business indicators: Well-maintained premises with healthy inventory levels suggest active operations and good cash management.":D.data?.stock_level==="Medium"?"Moderate business health: Adequate inventory with room for growth. Consider seasonal patterns when evaluating.":"Attention needed: Low inventory may indicate cash flow constraints or declining sales. Verify with recent transaction data.":"Awaiting business verification data. Encourage borrower to submit photos of premises and inventory."})]}),e("div",{style:"padding: 20px 24px;",children:[e("div",{style:"font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; color: #6B7280; margin-bottom: 12px;",children:["Analysis Records (",R?.length||0,")"]}),R?.length>0?e("div",{style:"display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 12px;",children:R.map(m=>{const A={building:{icon:ze,color:"#7C3AED"},inventory:{icon:He,color:"#2563EB"},ledger:{icon:Be,color:"#059669"}},y=A[m.type]||A.building,I=y.icon;return e("div",{style:`background: #FAFAFA; border: 1px solid ${h.has(m.id)?"#10B981":"#E5E7EB"}; border-radius: 8px; overflow: hidden;`,children:[m.source?.image_url&&e("img",{src:m.source.image_url,alt:"",style:"width: 100%; height: 100px; object-fit: cover;"}),e("div",{style:"padding: 12px;",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;",children:[e("div",{style:`display: flex; align-items: center; gap: 4px; padding: 3px 8px; border-radius: 4px; background: ${y.color}15; font-size: 10px; font-weight: 600; color: ${y.color}; text-transform: uppercase;`,children:[e(I,{size:10})," ",m.type]}),e("span",{style:"font-size: 10px; color: #9CA3AF;",children:_(m.analyzed_at)})]}),m.data&&e("div",{style:"font-size: 12px; color: #374151;",children:[m.type==="building"&&e(L,{children:[e("strong",{children:b(m.data.estimated_value)})," • ",m.data.condition]}),m.type==="inventory"&&e(L,{children:[e("strong",{children:b(m.data.inventory_value_estimate)})," • ",m.data.total_items_count," items"]}),m.type==="ledger"&&e(L,{children:[e("strong",{children:b(m.data.monthly_cashflow_estimate)}),"/mo"]})]})]})]},m.id)})}):e("div",{style:"text-align: center; padding: 20px; color: #9CA3AF;",children:"No records in this category"})]})]}):e("div",{style:"padding: 40px; text-align: center; color: #6B7280;",children:[e(re,{size:32,style:"color: #D1D5DB; margin-bottom: 12px;"}),e("div",{children:"No business intelligence data yet"}),e("div",{style:"font-size: 12px; color: #9CA3AF; margin-top: 4px;",children:"User can upload photos via WhatsApp for AI analysis"})]})]}),e("div",{class:"card",style:"margin-bottom: 24px; padding: 0; overflow: hidden;",children:[e("div",{style:"padding: 16px 24px; border-bottom: 1px solid #E5E7EB; display: flex; align-items: center; gap: 12px;",children:[e("div",{style:"width: 32px; height: 32px; background: #10B981; border-radius: 8px; display: flex; align-items: center; justify-content: center;",children:e(me,{size:16,style:"color: white;"})}),e("div",{children:[e("div",{style:"font-size: 15px; font-weight: 600; color: #1F2937;",children:"Financial Literacy Program"}),e("div",{style:"font-size: 12px; color: #6B7280;",children:"15-week educational curriculum progress"})]})]}),e("div",{style:"padding: 20px 24px;",children:e("div",{style:"display: grid; grid-template-columns: 200px 1fr; gap: 32px; align-items: center; margin-bottom: 24px;",children:[e("div",{style:"text-align: center;",children:[e("div",{style:"position: relative; width: 120px; height: 120px; margin: 0 auto;",children:[e("svg",{viewBox:"0 0 120 120",style:"transform: rotate(-90deg);",children:[e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#E5E7EB","stroke-width":"10"}),e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:f.percentage>=70?"#10B981":f.percentage>=40?"#F59E0B":"#EF4444","stroke-width":"10","stroke-dasharray":`${f.percentage*3.14} 314`,"stroke-linecap":"round"})]}),e("div",{style:"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;",children:e("div",{style:`font-size: 28px; font-weight: 800; color: ${f.percentage>=70?"#10B981":f.percentage>=40?"#F59E0B":"#EF4444"};`,children:[f.percentage,"%"]})})]}),e("div",{style:"margin-top: 8px; font-size: 13px; color: #6B7280;",children:[f.completed," of ",f.total," completed"]})]}),e("div",{children:[e("div",{style:"font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; color: #6B7280; margin-bottom: 12px;",children:"Weekly Modules"}),e("div",{style:"display: grid; grid-template-columns: repeat(15, 1fr); gap: 4px;",children:Array.from({length:15},(m,A)=>{const y=`week_${String(A+1).padStart(2,"0")}`,x=i.literacy?.[y]?.score||0,B=x>=100?"#10B981":x>0?"#F59E0B":"#E5E7EB";return e("div",{style:`aspect-ratio: 1; border-radius: 4px; background: ${B}; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 600; color: ${x>0?"white":"#9CA3AF"};`,title:`Week ${A+1}: ${x}%`,children:A+1},y)})}),e("div",{style:"display: flex; gap: 16px; margin-top: 12px; font-size: 11px; color: #6B7280;",children:[e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 10px; height: 10px; border-radius: 2px; background: #10B981;"})," Completed"]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 10px; height: 10px; border-radius: 2px; background: #F59E0B;"})," In Progress"]}),e("span",{style:"display: flex; align-items: center; gap: 4px;",children:[e("span",{style:"width: 10px; height: 10px; border-radius: 2px; background: #E5E7EB;"})," Not Started"]})]}),e("div",{class:"insight-box",style:"margin-top: 16px;",children:[e("div",{class:"insight-box-title",children:"📚 Learning Progress Insight"}),e("div",{class:"insight-box-text",children:f.percentage>=80?e(L,{children:[e("strong",{children:"Excellent engagement!"})," Borrowers who complete 80%+ of the literacy program show 40% lower default rates. This member demonstrates strong commitment to financial education."]}):f.percentage>=50?e(L,{children:[e("strong",{children:"Good progress."})," Halfway through the curriculum. Encourage completion of remaining modules to unlock better loan terms and build stronger financial habits."]}):f.percentage>=20?e(L,{children:[e("strong",{children:"Early stage learner."})," Just getting started with financial literacy. Regular engagement reminders can help improve completion rates and credit scores."]}):e(L,{children:[e("strong",{children:"Not yet started."})," Financial literacy completion is a key factor in credit scoring. Encourage the borrower to begin the 15-week program via WhatsApp."]})})]})]})]})})]}),e(cn,{userData:i})]})}const W=({children:t,type:i="default",style:n={}})=>{const r={default:{bg:"#f8f9fa",border:"#dee2e6"},start:{bg:"#e3f2fd",border:"#2196f3"},action:{bg:"#fff3e0",border:"#ff9800"},decision:{bg:"#fce4ec",border:"#e91e63"},success:{bg:"#e8f5e9",border:"#4caf50"},end:{bg:"#f3e5f5",border:"#9c27b0"},user:{bg:"#e0f7fa",border:"#00bcd4"},bot:{bg:"#fff8e1",border:"#ffc107"}},o=r[i]||r.default;return e("div",{style:{padding:"12px 16px",background:o.bg,border:`2px solid ${o.border}`,borderRadius:"8px",textAlign:"center",fontSize:"13px",lineHeight:"1.4",...n},children:t})},O=({direction:t="down"})=>e("div",{style:{textAlign:"center",padding:"4px 0",color:"#666",fontSize:"20px"},children:t==="down"?"↓":t==="right"?"→":"↓"}),Re=({children:t})=>e("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"16px 0"},children:t}),De=({left:t,right:i})=>e("div",{style:{display:"flex",gap:"24px",justifyContent:"center",alignItems:"flex-start"},children:[e("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:t}),e("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:i})]});function hn(){const t=(i,n)=>({padding:"12px",background:i,borderRadius:"8px",borderLeft:`4px solid ${n}`});return e("div",{style:"padding: 20px;",children:[e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h1",{style:"margin: 0 0 8px 0; display: flex; align-items: center; gap: 8px;",children:[e(jt,{size:28})," Cara Kerja Chatbot Amartha"]}),e("p",{style:"color: #666; margin: 0;",children:"Panduan lengkap alur percakapan untuk Petugas Lapangan (BP)"})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{style:"display: flex; align-items: center; gap: 8px;",children:[e(ht,{size:18})," Kata Kunci Perintah"]}),e("p",{style:"color: #666; margin-bottom: 16px;",children:"Kata-kata yang bisa diketik anggota (case-insensitive)"}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px;",children:[e("div",{style:t("#e3f2fd","#2196f3"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(ht,{size:14})," MENU"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"menu, bantuan, help, halo, hi, hai, hello, test, ping"}),e("p",{style:"margin: 4px 0 0 0; font-size: 11px; color: #666;",children:["User baru: welcome + cara daftar",e("br",{}),"User lama: menu dengan nama"]})]}),e("div",{style:t("#e8f5e9","#4caf50"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(me,{size:14})," KUIS"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"kuis, quiz, belajar, tes, ujian, soal"})]}),e("div",{style:t("#fff3e0","#ff9800"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(re,{size:14})," NILAI"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"nilai, hasil, skor, progress"})]}),e("div",{style:t("#f3e5f5","#9c27b0"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(Ri,{size:14})," PROFIL"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"cek data, data saya, profil, info saya"})]}),e("div",{style:t("#e0f7fa","#00bcd4"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(Me,{size:14})," JADWAL"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"jadwal, majelis, pertemuan, kumpul"})]}),e("div",{style:t("#fce4ec","#e91e63"),children:[e("strong",{style:"display: flex; align-items: center; gap: 4px;",children:[e(zi,{size:14})," FOTO"]}),e("p",{style:"margin: 4px 0 0 0; font-size: 12px; font-family: monospace;",children:"Kirim gambar langsung"})]})]})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{children:"1. Pendaftaran Anggota Baru"}),e("p",{style:"color: #666; margin-bottom: 8px;",children:"Ketika nomor baru menghubungi chatbot"}),e(Re,{children:[e(W,{type:"user",style:{minWidth:"200px"},children:[e("strong",{children:"Ibu kirim pesan"}),e("br",{}),"(nomor belum terdaftar)"]}),e(O,{}),e(W,{type:"bot",style:{minWidth:"240px"},children:[e("strong",{children:"Bot tanya:"}),e("br",{}),'"Siapa nama Ibu, usaha apa, dimana?"']}),e(O,{}),e(W,{type:"user",style:{minWidth:"240px"},children:[e("strong",{children:"Ibu jawab:"}),e("br",{}),'"Saya Bu Siti, warung sembako di Bogor"']}),e(O,{}),e(W,{type:"action",style:{minWidth:"200px"},children:[e("strong",{children:"Proses: AI ekstrak data:"}),e("br",{}),"name, business, location"]}),e(O,{}),e(W,{type:"success",style:{minWidth:"200px"},children:[e("strong",{children:"✓ Terdaftar"}),e("br",{}),"Status: ",e("span",{style:"color: #ff9800; fontWeight: 'bold'",children:"PENDING"})]}),e(O,{}),e(W,{type:"end",style:{minWidth:"220px"},children:[e("strong",{children:"👨‍💼 BP verifikasi di Dashboard"}),e("br",{}),"Status → ",e("span",{style:"color: #4caf50; fontWeight: 'bold'",children:"ACTIVE"})]})]})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{children:"2. Kuis Literasi Keuangan"}),e("p",{style:"color: #666; margin-bottom: 8px;",children:["15 minggu pembelajaran • Lulus: ",e("strong",{children:"100% (4/4 benar)"})]}),e(Re,{children:[e(W,{type:"user",style:{minWidth:"180px"},children:[e("strong",{children:"Ibu ketik:"}),e("br",{}),'"kuis" / "belajar"']}),e(O,{}),e(W,{type:"action",style:{minWidth:"220px"},children:[e("strong",{children:"Proses: Sistem cek:"}),e("br",{}),"Minggu mana yang belum lulus?"]}),e(O,{}),e(W,{type:"bot",style:{minWidth:"240px"},children:[e("strong",{children:"Bot: Kirim intro:"}),e("br",{}),'"Quiz Minggu X dimulai! Topik: ..."']}),e(O,{}),e(W,{type:"bot",style:{minWidth:"260px"},children:[e("strong",{children:"Bot: Kirim soal 1/4"}),e("br",{}),"(WhatsApp List Message)",e("br",{}),e("span",{style:"font-size: 11px",children:"A. ... | B. ... | C. ... | D. ..."})]}),e(O,{}),e(W,{type:"decision",style:{minWidth:"180px"},children:e("strong",{children:"Jawaban benar?"})}),e(De,{left:e(L,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✓ Ya"}),e(W,{type:"success",style:{minWidth:"100px"},children:"+25%"})]}),right:e(L,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✗ Tidak"}),e(W,{type:"default",style:{minWidth:"120px"},children:["+0%",e("br",{}),e("span",{style:"fontSize: '11px'",children:"+ penjelasan"})]})]})}),e(O,{}),e(W,{type:"action",style:{minWidth:"180px"},children:[e("strong",{children:"Ulangi 4x"}),e("br",{}),"(4 soal acak)"]}),e(O,{}),e(W,{type:"decision",style:{minWidth:"180px"},children:e("strong",{children:"Nilai = 100%?"})}),e(De,{left:e(L,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✓ Ya"}),e(W,{type:"success",style:{minWidth:"100px"},children:[e("strong",{children:"LULUS"}),e("br",{}),"Minggu ini"]})]}),right:e(L,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✗ Tidak"}),e(W,{type:"default",style:{minWidth:"100px"},children:[e("strong",{children:"ULANG"}),e("br",{}),"Minggu ini"]})]})})]})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{children:"3. Analisis Foto Bisnis"}),e("p",{style:"color: #666; margin-bottom: 8px;",children:"AI menganalisis foto • Dashboard update real-time"}),e(Re,{children:[e(W,{type:"user",style:{minWidth:"180px"},children:[e("strong",{children:"Ibu kirim foto"}),e("br",{})]}),e(O,{}),e(W,{type:"decision",style:{minWidth:"180px"},children:e("strong",{children:"Ada caption?"})}),e(De,{left:e(L,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✓ Ya"}),e(W,{type:"success",style:{minWidth:"100px"},children:"Lanjut ↓"})]}),right:e(L,{children:[e("div",{style:{color:"#666",fontSize:"12px"},children:"✗ Tidak"}),e(W,{type:"bot",style:{minWidth:"140px"},children:'"Jelaskan foto ini"'}),e(O,{}),e(W,{type:"user",style:{minWidth:"140px"},children:["Ibu balas",e("br",{}),"(5 menit)"]})]})}),e(O,{}),e(W,{type:"action",style:{minWidth:"220px"},children:[e("strong",{children:"Proses: Gemini Vision analisis"}),e("br",{}),"Klasifikasi + ekstrak data"]}),e(O,{}),e("div",{style:{display:"flex",gap:"16px"},children:[e(W,{type:"success",style:{minWidth:"140px"},children:[e("strong",{children:"Mobile: Kirim hasil"}),e("br",{}),"ke Ibu"]}),e(W,{type:"end",style:{minWidth:"140px"},children:[e("strong",{children:"Web: Dashboard"}),e("br",{}),"update + blink"]})]})]}),e("div",{style:"margin-top: 16px; display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 8px;",children:[e("div",{style:{padding:"8px",background:"#e3f2fd",borderRadius:"6px",textAlign:"center"},children:[e("strong",{children:"Ledger: Ledger"}),e("br",{}),e("span",{style:"fontSize: '11px'",children:"Buku kas, nota"})]}),e("div",{style:{padding:"8px",background:"#e8f5e9",borderRadius:"6px",textAlign:"center"},children:[e("strong",{children:"Inventory: Inventory"}),e("br",{}),e("span",{style:"fontSize: '11px'",children:"Stok barang"})]}),e("div",{style:{padding:"8px",background:"#fff3e0",borderRadius:"6px",textAlign:"center"},children:[e("strong",{children:"Building: Building"}),e("br",{}),e("span",{style:"fontSize: '11px'",children:"Tempat usaha"})]}),e("div",{style:{padding:"8px",background:"#f3e5f5",borderRadius:"6px",textAlign:"center"},children:[e("strong",{children:"Transaction: Transaction"}),e("br",{}),e("span",{style:"fontSize: '11px'",children:"Bukti transaksi"})]})]})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{children:"4. Perintah Lainnya"}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-top: 16px;",children:[e("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[e("strong",{children:"Menu Utama"}),e("p",{style:"color: #666; fontSize: '12px'; margin: '4px 0'",children:"Ketik: halo, menu, bantuan"}),e("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px",fontSize:"13px",marginTop:"8px",border:"1px solid #e0e0e0"},children:[e("strong",{children:"Menu Utama"}),e("br",{}),e("br",{}),"1. KUIS - Mulai kuis",e("br",{}),"2. NILAI - Hasil belajar",e("br",{}),"3. DATA SAYA - Profil",e("br",{}),"4. FOTO - Kirim foto",e("br",{}),"5. JADWAL - Majelis"]})]}),e("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[e("strong",{children:"Cek Data Profil"}),e("p",{style:"color: #666; fontSize: '12px'; margin: '4px 0'",children:"Ketik: cek data, profil, data saya"}),e("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px",fontSize:"13px",marginTop:"8px",border:"1px solid #e0e0e0"},children:["✓ ",e("strong",{children:"PROFIL ANDA"}),e("br",{}),e("br",{}),"Nama: Bu Siti",e("br",{}),"Building: Usaha: Warung",e("br",{}),"Lokasi: Bogor",e("br",{}),"Limit: Rp 5.000.000",e("br",{}),"Progress: 5/15"]})]}),e("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[e("strong",{children:"Jadwal Majelis"}),e("p",{style:"color: #666; fontSize: '12px'; margin: '4px 0'",children:"Ketik: jadwal, majelis, pertemuan"}),e("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px",fontSize:"13px",marginTop:"8px",border:"1px solid #e0e0e0"},children:[e("strong",{children:"Jadwal Majelis"}),e("br",{}),e("br",{}),"Majelis: Sejahtera",e("br",{}),"📆 Hari: Senin",e("br",{}),"Jam: 09:00",e("br",{}),"Lokasi: Balai Desa"]})]}),e("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[e("strong",{children:"📊 Lihat Progress"}),e("p",{style:"color: #666; fontSize: '12px'; margin: '4px 0'",children:"Ketik: nilai, progress, hasil"}),e("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px",fontSize:"13px",marginTop:"8px",border:"1px solid #e0e0e0"},children:["📊 ",e("strong",{children:"Progress Literasi"}),e("br",{}),e("br",{}),"✓ Selesai: 5/15 (33%)",e("br",{}),e("br",{}),"🎯 Minggu 1: 100%",e("br",{}),"🎯 Minggu 2: 100%",e("br",{}),"🎯 Minggu 3: 100%"]})]})]})]}),e("div",{class:"card",style:"margin-bottom: 20px;",children:[e("h2",{children:"Status User"}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-top: 16px;",children:[e("div",{style:{padding:"12px",background:"#fff3cd",borderRadius:"8px",textAlign:"center"},children:[e("strong",{style:"fontSize: '18px'",children:"🟡"}),e("br",{}),e("strong",{children:"PENDING"}),e("p",{style:"margin: 4px 0 0 0; fontSize: '12px'",children:"Menunggu verifikasi BP"})]}),e("div",{style:{padding:"12px",background:"#d4edda",borderRadius:"8px",textAlign:"center"},children:[e("strong",{style:"fontSize: '18px'",children:"🟢"}),e("br",{}),e("strong",{children:"ACTIVE"}),e("p",{style:"margin: 4px 0 0 0; fontSize: '12px'",children:"Akses penuh"})]}),e("div",{style:{padding:"12px",background:"#f8d7da",borderRadius:"8px",textAlign:"center"},children:[e("strong",{style:"fontSize: '18px'",children:"🔴"}),e("br",{}),e("strong",{children:"SUSPENDED"}),e("p",{style:"margin: 4px 0 0 0; fontSize: '12px'",children:"Dinonaktifkan"})]}),e("div",{style:{padding:"12px",background:"#e2e3e5",borderRadius:"8px",textAlign:"center"},children:[e("strong",{style:"fontSize: '18px'",children:"⚫"}),e("br",{}),e("strong",{children:"INACTIVE"}),e("p",{style:"margin: 4px 0 0 0; fontSize: '12px'",children:"Keluar program"})]})]})]}),e("div",{class:"card",children:[e("h2",{children:"🔧 Tech Stack"}),e("div",{style:"display: flex; flexWrap: 'wrap'; gap: '8px'; marginTop: '12px'",children:["Gemini 2.5 Flash","Gemini Vision","Firestore","Cloud Run","WhatsApp API","Preact","SSE"].map(i=>e("span",{style:{padding:"6px 12px",background:"#e3f2fd",borderRadius:"16px",fontSize:"12px"},children:i}))})]})]})}const mt="/api",gn="6281991262988",un=`https://wa.me/${gn}`,yn=[{key:"warung",name:"Warung Sembako",icon:"🏪",desc:"Maturity 3, 40% quiz"},{key:"toko",name:"Toko Kelontong",icon:"🛒",desc:"Maturity 2, 20% quiz"},{key:"makanan",name:"Usaha Makanan",icon:"🍜",desc:"Maturity 4, 60% quiz"},{key:"jahit",name:"Jasa Jahit",icon:"🧵",desc:"Maturity 2, 13% quiz"},{key:"pertanian",name:"Pertanian",icon:"🌾",desc:"Maturity 3, 53% quiz"},{key:"salon",name:"Salon Kecantikan",icon:"💇",desc:"Maturity 3, 33% quiz"},{key:"laundry",name:"Jasa Laundry",icon:"🧺",desc:"Maturity 2, 27% quiz"},{key:"random",name:"Random",icon:"🎲",desc:"Random persona"}],mn=[{key:"sukses",name:"Sukses",icon:"🌟",desc:"Rp 10jt, 80% quiz"},{key:"baru",name:"Baru",icon:"🆕",desc:"No loan, 0% quiz"},{key:"krisis",name:"Krisis",icon:"📉",desc:"Missed payments"},{key:"lulus",name:"Lulus",icon:"🎓",desc:"100% quiz, paid"},{key:"fraud",name:"Fraud",icon:"⚠️",desc:"Suspicious flags"}],fn=[{title:"New User Registration",steps:["Send /demo:reset to clear data",'Send "Halo" → Bot asks for info','Reply: "Saya Dewi, jualan kue di Bandung"','Dashboard → User appears "Pending"','Click Verify → Status "Active"']},{title:"Quiz Flow (Full)",steps:["Send /demo:warung (40% progress)",'Send "kuis" → Get next incomplete week',"Answer 4 questions via list","Score 100% to pass week",'Send "nilai" → See progress']},{title:"Quiz Flow (Single Week)",steps:["Send /demo:baru (0% progress)",'Send "kuis" → Start Week 1',"Answer all 4 correctly → Pass",'Send "kuis" again → Week 2 starts',"Repeat until Week 15 = Graduate"]},{title:"Image Analysis (BI)",steps:["Send /demo:makanan","Send photo with caption","Bot extracts data (type, value)","Dashboard → User Profile → BI",'New card with "NEW" badge']},{title:"Profile & Loan Info",steps:["Send /demo:sukses",'Send "cek data" → Full profile',"See loan limit, balance, payments",'Send "jadwal" → Majelis schedule',"Dashboard shows same data"]},{title:"Majelis & Attendance",steps:["Send /demo:sukses (has majelis)","Dashboard → Majelis page","Click majelis card → Detail","See member list + attendance","Add attendance record"]}];function xn(){const[t,i]=E([]),[n,r]=E(!0),[o,a]=E(null),[d,c]=E(new Set),g=async()=>{try{const l=await(await fetch(`${mt}/users`)).json();i(l.filter(k=>k.is_demo===!0))}catch(p){console.error(p)}r(!1)};J(()=>{g();const p=new EventSource("/api/events/demo");return p.onmessage=l=>{const k=JSON.parse(l.data);k.type==="user_created"&&k.data?.is_demo&&(c(S=>new Set([...S,k.data.phone])),g(),setTimeout(()=>{c(S=>{const _=new Set(S);return _.delete(k.data.phone),_})},5e3))},()=>p.close()},[]);const h=p=>{navigator.clipboard.writeText(p),a(p),setTimeout(()=>a(null),2e3)},u=async p=>{confirm(`Delete demo user ${p}?`)&&(await fetch(`${mt}/users/${p}`,{method:"DELETE"}),g())},s=({item:p,prefix:l})=>{const k=`${l}${p.key}`,S=o===k;return e("div",{onClick:()=>h(k),style:{padding:"14px",background:S?"#e3f2fd":"#fff",border:`1px solid ${S?"#2196f3":"#e0e0e0"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.15s"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[e("span",{style:{fontSize:"28px"},children:p.icon}),e("div",{children:[e("div",{style:{fontWeight:600,fontSize:"14px"},children:p.name}),e("div",{style:{fontSize:"11px",color:"#666"},children:p.desc})]})]}),e("div",{style:{fontSize:"12px",color:"#2196f3",fontFamily:"monospace",background:"#f5f5f5",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:[k," ",S&&"✓"]})]})};return e("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[e("div",{style:{marginBottom:"24px",borderBottom:"2px solid #e0e0e0",paddingBottom:"16px"},children:[e("h1",{style:{margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:"10px",fontSize:"24px"},children:[e(Pt,{size:28})," Demo Mode"]}),e("a",{href:un,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"#25D366",color:"#fff",borderRadius:"8px",textDecoration:"none",fontWeight:600,fontSize:"14px",marginBottom:"12px"},children:[e(jt,{size:18})," Chatbot: +62 819-9126-2988"]}),e("p",{style:{color:"#666",margin:0,fontSize:"14px"},children:"Copy commands below and send to the chatbot via WhatsApp."})]}),e("div",{style:{background:"#fff3e0",padding:"16px 20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #ffcc80"},children:[e("h3",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px",fontSize:"15px"},children:[e(Ki,{size:18})," Quick Start"]}),e("div",{style:{display:"flex",gap:"24px",flexWrap:"wrap",fontSize:"13px",color:"#5d4037"},children:[e("span",{children:"1. Copy command below"}),e("span",{children:"2. Send to WhatsApp bot"}),e("span",{children:'3. Try features: "menu", "kuis", "cek data"'}),e("span",{children:["4. Reset: ",e("code",{style:{background:"#fff",padding:"2px 6px",borderRadius:"3px"},children:"/demo:reset"})]})]})]}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[e("div",{style:{background:"#fff",padding:"20px",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e("h3",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",fontSize:"15px",color:"#333"},children:[e(V,{size:18})," Personas"]}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:yn.map(p=>e(s,{item:p,prefix:"/demo:"},p.key))})]}),e("div",{style:{background:"#fff",padding:"20px",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e("h3",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",fontSize:"15px",color:"#333"},children:[e(Fi,{size:18})," Scenarios"]}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:mn.map(p=>e(s,{item:p,prefix:"/demo:"},p.key))}),e("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e0e0e0"},children:[e("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e(Ui,{size:14})," Kombinasi (persona+scenario)"]}),e("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:["/demo:warung+krisis","/demo:random+lulus","/demo:makanan+fraud"].map(p=>e("button",{onClick:()=>h(p),style:{padding:"6px 12px",background:o===p?"#4caf50":"#f5f5f5",color:o===p?"#fff":"#333",border:"none",borderRadius:"4px",cursor:"pointer",fontFamily:"monospace",fontSize:"11px"},children:[p," ",o===p&&"✓"]},p))})]})]})]}),e("div",{style:{background:"#e8f5e9",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #a5d6a7"},children:[e("h3",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",fontSize:"15px",color:"#2e7d32"},children:[e(Ni,{size:18})," Test Journeys"]}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"12px"},children:fn.map((p,l)=>e("div",{style:{background:"#fff",padding:"14px",borderRadius:"6px",border:"1px solid #c8e6c9"},children:[e("div",{style:{fontWeight:600,fontSize:"13px",color:"#2e7d32",marginBottom:"10px"},children:[l+1,". ",p.title]}),e("div",{style:{fontSize:"12px",color:"#555",lineHeight:"1.7"},children:p.steps.map((k,S)=>e("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:[e("span",{style:{color:"#81c784",fontWeight:600,minWidth:"16px"},children:[S+1,"."]}),e("span",{children:k})]},S))})]},l))})]}),e("div",{style:{display:"grid",gridTemplateColumns:"200px 1fr",gap:"20px"},children:[e("div",{style:{background:"#ffebee",padding:"16px",borderRadius:"8px",border:"1px solid #ef9a9a",textAlign:"center"},children:[e(Hi,{size:24,style:{color:"#c62828",marginBottom:"8px"}}),e("div",{style:{fontSize:"13px",color:"#666",marginBottom:"12px"},children:"Clear demo data"}),e("button",{onClick:()=>h("/demo:reset"),style:{padding:"10px 16px",background:o==="/demo:reset"?"#4caf50":"#f44336",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontFamily:"monospace",fontSize:"13px",width:"100%"},children:["/demo:reset ",o==="/demo:reset"&&"✓"]})]}),e("div",{style:{background:"#fff",padding:"16px",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e(Li,{size:16})," Demo Users (",t.length,")"]}),e("button",{onClick:g,style:{padding:"4px 10px",cursor:"pointer",border:"1px solid #ddd",borderRadius:"4px",background:"#fff",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[e(Je,{size:12})," Refresh"]})]}),n?e("div",{style:{color:"#666",fontSize:"13px"},children:"Loading..."}):t.length===0?e("div",{style:{color:"#999",fontSize:"13px",fontStyle:"italic"},children:"No demo users yet. Send a command via WhatsApp."}):e("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:t.map(p=>{const l=d.has(p.phone),k=p.phone.replace(/^62/,"+62 ").replace(/(\d{3})(\d{4})(\d+)/,"$1-$2-$3");return e("div",{style:{padding:"8px 12px",background:l?"#e8f5e9":"#f5f5f5",borderRadius:"6px",fontSize:"12px",display:"flex",alignItems:"center",gap:"8px",border:l?"2px solid #4caf50":"1px solid #e0e0e0",animation:l?"blink 0.5s ease-in-out 3":"none"},children:[l&&e("span",{style:{background:"#4caf50",color:"#fff",padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:600},children:"NEW"}),e("span",{style:{fontWeight:500},children:p.name}),e("span",{style:{color:"#666",fontFamily:"monospace",fontSize:"11px"},children:k}),e(Se,{size:14,style:{color:"#999",cursor:"pointer",marginLeft:"4px"},onClick:()=>u(p.phone)})]},p.phone)})})]})]})]})}const bn=[{name:"Andi Taufan Garuda Putra",role:"Founder & CEO @ Amartha",tip:"Focus on IMPACT - how many lives can this change? He built Amartha to fight poverty."},{name:"William Notowidagdo",role:"SVP of Engineering @ Amartha",tip:"Technical depth matters. Show clean architecture, scalability, security considerations."},{name:"Riza Fahmi",role:"Co-Founder @ HACKTIV8, GDE Web",tip:"Code quality & developer experience. He teaches coding - show you know best practices."}],vn=[{name:"Alexander Li",role:"Head of Engineering @ Amartha",focus:"Architecture, scalability"},{name:"Muhammad Rofi Hidayat",role:"Sr. Lead Data Scientist @ Amartha",focus:"AI/ML implementation"},{name:"Ruben Elkana",role:"Sr. Product Manager @ Amartha",focus:"Product-market fit, user stories"},{name:"Angga Agia Wardhana",role:"GDE Workspace, GDG Cloud",focus:"Google Cloud services"}],kn=[{q:"How does this scale to Amartha's 1M+ users?",a:"Firestore auto-scales horizontally. Cloud Run scales 0-1000 instances. Quiz sessions can move to Redis for high concurrency. WhatsApp API handles rate limiting natively.",judge:"William"},{q:"What's the business impact / ROI?",a:"Higher engagement → better financial literacy → lower default rates → reduced NPL. Also enables upselling: users who complete 15 weeks are prime candidates for larger loans.",judge:"Taufan"},{q:"How do you ensure AI doesn't give bad financial advice?",a:"RAG retrieval grounds responses in Amartha's approved curriculum. System prompt restricts topics. No investment recommendations - purely educational.",judge:"Riza"},{q:"What about offline/low connectivity in rural areas?",a:"WhatsApp handles message queuing natively. No app download needed. Works on basic phones. Users get responses when back online.",judge:"Taufan"},{q:"How do you measure success?",a:"Quiz completion rates, loan repayment correlation, user engagement frequency, BI submission rates, majelis attendance tracking.",judge:"William"},{q:"What's unique vs other chatbots?",a:"Integrated with loan system, image analysis for BI, gamified 15-week curriculum, majelis group management, real-time dashboard sync via SSE.",judge:"Riza"},{q:"Cost per user?",a:"Gemini ~$0.001/msg, Cloud Run ~$0.00001/req, Firestore ~$0.0001/read. Total <$0.01/user/month. At 1M users = ~$10K/month.",judge:"William"},{q:"Data privacy / compliance?",a:"Data in GCP Indonesia region. Users consent via WhatsApp. No PII in logs. Can implement GDPR deletion on request.",judge:"William"},{q:"Why WhatsApp vs custom app?",a:"95% smartphone penetration in Indonesia uses WhatsApp. Zero friction - no download, no learning curve. Meets users where they already are.",judge:"Taufan"},{q:"How do you prevent gaming/fraud?",a:"Demo has fraud flags. Production would track: rapid quiz completion, suspicious BI patterns, location mismatches, anomaly detection.",judge:"William"}],_n=[{time:"10:00",event:"Registration & Lunch",action:"Arrive EARLY. Set up workspace. Test WiFi."},{time:"13:15",event:"Opening",action:"Listen for any rule changes or hints from CEO/CTO speech."},{time:"13:30",event:"Hackathon Start",action:"Already have code ready. Focus on polish & demo prep."},{time:"18:00",event:"Dinner + Mentoring 1",action:"⭐ CRITICAL: Get feedback from Alexander Li or Rofi on AI implementation."},{time:"22:00",event:"Late Night Hack",action:"Fix bugs, prepare demo script, practice pitch."},{time:"08:00",event:"Day 2 Breakfast",action:"Rest well. Fresh mind for final push."},{time:"10:00",event:"Mentoring 2",action:"⭐ LAST CHANCE: Get final feedback, fix critical issues."},{time:"13:00",event:"Hackathon End",action:"STOP CODING. Focus 100% on presentation."},{time:"13:30",event:"Demo & Judging",action:"10 mins per team. Be READY when called."},{time:"16:30",event:"Winner Announcement",action:"🏆 VICTORY!"}],wn=[{icon:"🎯",title:"Lead with Taufan's Mission",tip:"Open with: 'We help Amartha's 1M+ micro-entrepreneurs escape poverty through AI-powered financial literacy.' This is HIS life's work."},{icon:"📊",title:"Show Real Numbers",tip:"15-week curriculum, 25 business categories, 5 maturity levels, 225 quiz questions, real-time BI analysis. Concrete > Abstract."},{icon:"🔥",title:"Live Demo is KING",tip:"Registration → Quiz → Image Analysis → Dashboard SSE update. Show the MAGIC of real-time sync!"},{icon:"💡",title:"Technical Depth for William",tip:"Mention: Gemini 2.5 Flash tool calling, RAG retrieval, SSE real-time, SOLID architecture, rate limiting, input validation."},{icon:"🎭",title:"Emotional Story Arc",tip:"Start with /demo:baru (struggling new user) → Show journey → End with /demo:lulus (graduated success). Make judges FEEL the impact."},{icon:"⚡",title:"Speed = Confidence",tip:"Pre-load everything. Demo commands ready to paste. Every second of smooth demo = trust in your competence."},{icon:"🏆",title:"Close with Vision",tip:"End: 'This isn't just a chatbot - it's a pathway out of poverty. With Amartha's reach, we can transform millions of lives.'"}],zn=[{step:1,action:"Open Dashboard + WhatsApp side by side",speak:'"Let me show you Akademi-AI in action."'},{step:2,action:"Send /demo:baru",speak:'"Meet Siti, a new micro-entrepreneur with zero financial literacy."'},{step:3,action:"Show dashboard - user appears",speak:'"Real-time sync - field agents see new registrations instantly."'},{step:4,action:'Send "kuis"',speak:'"Siti starts her financial literacy journey with interactive quizzes."'},{step:5,action:"Answer 2 questions",speak:'"Gamified learning - she needs 100% to pass each week."'},{step:6,action:"Send photo with caption",speak:'"She can also send business photos for AI analysis."'},{step:7,action:"Show BI card with NEW badge",speak:'"Dashboard updates in real-time with extracted business intelligence."'},{step:8,action:'Send "cek data"',speak:'"Siti can check her profile, loan status, and progress anytime."'},{step:9,action:"Show /demo:lulus user",speak:'"After 15 weeks, she graduates - financially literate and loan-ready."'},{step:10,action:"Close",speak:'"This is how we transform 1 million Sitis into empowered entrepreneurs."'}],Sn=[{question:"How did you choose which data to analyze from the dataset?",context:"Judges want to see your data discovery and prioritization process.",best:"I started by profiling all 5 CSV files to understand their structure. I identified that loan_snapshots.csv has DPD (Days Past Due) which is the key delinquency indicator. bills.csv with 599K records gives payment behavior history. I prioritized these because payment history is the #1 predictor of default in credit risk literature. The GPS data in tasks.csv was a bonus for operational insights.",okay:"I looked at the files and picked the ones with the most useful columns like DPD and payment dates.",bad:"I just loaded all the data and ran some calculations on it."},{question:"Why did you choose these specific metrics for risk prediction?",context:"Tests your understanding of credit risk fundamentals.",best:"I selected 4 factors based on credit scoring best practices: (1) Payment ratio - historical discipline, (2) Late ratio - behavioral pattern, (3) DPD - current status, (4) Business type - income stability proxy. These map to the 5 C's of credit: Character (payment history), Capacity (business type), and Conditions (current DPD). I weighted them based on predictive power - payment history gets 30 points because it's the strongest predictor.",okay:"I picked metrics that seemed related to whether someone would pay back their loan.",bad:"I just used all the numbers available in the dataset."},{question:"How accurate is your risk prediction model?",context:"Tests your understanding of model validation.",best:"This is a rule-based scoring model, not ML, so accuracy isn't measured traditionally. However, I validated it by checking that high-risk customers (score 80+) have avg DPD of 90+ days and payment ratio under 30%, while low-risk (score <30) have 0 DPD and 90%+ payment ratio. The model correctly separates these populations. For production, I'd train a logistic regression on historical defaults and measure AUC-ROC.",okay:"I checked that customers with high scores have bad payment history.",bad:"I didn't test it, but the formula makes sense."},{question:"What insights did you find that surprised you?",context:"Shows depth of analysis and curiosity.",best:"Three surprises: (1) 18% late payment rate is higher than I expected for microfinance - indicates cash flow timing issues. (2) Farming businesses have 15% higher risk scores than retail, likely due to seasonal income. (3) Some branches have 5+ hour delays between scheduled and actual visits - huge operational inefficiency. These insights directly inform interventions: flexible payment dates for farmers, route optimization for field agents.",okay:"I found that some customers pay late more often than others.",bad:"Nothing really surprised me, the data was pretty straightforward."},{question:"How would you improve this analysis with more time?",context:"Shows you understand limitations and have vision.",best:"Three improvements: (1) Train actual ML model (XGBoost/LightGBM) on historical defaults for better accuracy. (2) Add time-series analysis - predict WHEN a customer will default, not just IF. (3) Incorporate the 200 images - use Gemini Vision to extract business health indicators and correlate with default rates. (4) Build a recommendation engine that suggests specific interventions per customer segment.",okay:"I would add more features and maybe use machine learning.",bad:"I think it's pretty complete already."},{question:"How does your segmentation help field agents?",context:"Tests practical business application.",best:"Each segment has specific, actionable recommendations. Star Performers (8,900 customers) - don't waste time visiting, offer loan increases remotely. High Risk (1,400) - prioritize for immediate visits, bring restructuring options. Needs Attention (300) - send payment reminders 3 days before due date. This lets field agents focus their limited time on customers who need intervention most, potentially increasing collection efficiency by 30%.",okay:"Field agents can see which customers are risky and visit them first.",bad:"It shows different groups of customers."},{question:"What's the business value of your route analysis?",context:"Tests ROI thinking.",best:"Branches with 'Poor' efficiency have 5+ hour delays and high geographic spread. If a field agent does 10 visits/day and wastes 2 hours on travel, that's 20% productivity loss. With 160K tasks/year, optimizing routes could save 32K hours annually. At Rp 50K/hour, that's Rp 1.6B in savings. Plus faster collections improve cash flow and reduce defaults.",okay:"Field agents can plan better routes and save time.",bad:"It shows where the visits are on a map."},{question:"How did you handle data quality issues?",context:"Shows attention to detail and engineering rigor.",best:"I found several issues: (1) Some GPS coordinates were 0,0 or invalid - filtered these out before analysis. (2) Some bills had no paid_date but had paid_amount - treated as unpaid. (3) Customer IDs are hashed - joined tables using loan_id as intermediate key. (4) Business purpose field had inconsistent naming - used keyword matching (contains 'warung' OR 'dagang' → retail) for categorization.",okay:"I filtered out rows with missing data.",bad:"The data was clean, I didn't have any issues."},{question:"Why didn't you use machine learning for predictions?",context:"Tests pragmatism vs over-engineering.",best:"For a hackathon with limited time, a rule-based model was the right choice. It's interpretable - I can explain exactly why a customer is high risk. It's fast to implement and doesn't need training data split. For production, I'd use ML, but the rule-based model actually performs well for this use case because the features (payment ratio, DPD) have clear, monotonic relationships with default risk.",okay:"I didn't have enough time to train a machine learning model.",bad:"Machine learning is overkill for this problem."},{question:"How would this scale to Amartha's full dataset?",context:"Tests production thinking.",best:"Current implementation loads CSVs into memory - works for 12K customers but not 1M+. For production: (1) Move to BigQuery for analytics queries. (2) Pre-compute risk scores nightly and store in Firestore. (3) Use Cloud Functions for on-demand recalculation. (4) Add caching layer (Redis) for dashboard. The scoring logic itself is O(1) per customer, so computation scales linearly.",okay:"I would use a database instead of loading files into memory.",bad:"It should work fine, Node.js can handle a lot of data."},{question:"What ethical considerations did you think about?",context:"Shows maturity and responsibility.",best:"Three considerations: (1) Bias - business type scoring could disadvantage farmers unfairly; I'd validate this doesn't create discriminatory outcomes. (2) Transparency - borrowers should understand why they're flagged high-risk. (3) Privacy - customer IDs are hashed, but combined data could still identify individuals; need proper access controls. I'd recommend an ethics review before production deployment.",okay:"I made sure not to use any personal information directly.",bad:"I didn't think about ethics, it's just data analysis."},{question:"How do you validate that your insights are actionable?",context:"Tests practical impact thinking.",best:"I designed each insight with a specific action in mind. Risk prediction → field agent visit prioritization. Payment trends → seasonal payment flexibility. Segmentation → targeted literacy content. Route analysis → visit scheduling optimization. The test is: can a field agent or credit analyst DO something different tomorrow based on this insight? If yes, it's actionable.",okay:"The insights show useful information that people can use.",bad:"The data speaks for itself."}],An=["✅ Dashboard open: /demo page","✅ WhatsApp open on phone","✅ /demo:reset sent (clean slate)","✅ Demo commands copied","✅ Backup screenshots ready","✅ Phone charged > 80%","✅ Internet tested & stable","✅ Pitch script memorized","✅ Timer set for 9 minutes","✅ Water bottle ready"];function Cn(){return e("div",{style:{padding:"20px",maxWidth:"1100px",margin:"0 auto"},children:[e("div",{style:{textAlign:"center",marginBottom:"32px",padding:"24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",color:"#fff"},children:[e(Gi,{size:48,style:{marginBottom:"12px"}}),e("h1",{style:{margin:"0 0 8px 0",fontSize:"28px"},children:"🏆 War Room: Amartha x GDG Hackathon 🏆"}),e("p",{style:{margin:0,opacity:.9},children:"Nov 28-29, 2025 • Amartha Village • TOP 15 FINALIST"})]}),e("div",{style:{background:"linear-gradient(135deg, #ff9a56 0%, #ff6b6b 100%)",padding:"24px",borderRadius:"12px",marginBottom:"24px",color:"#fff"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e(ji,{size:28}),e("h2",{style:{margin:0},children:"You're Already in the TOP 15! 🔥"})]}),e("p",{style:{margin:0,lineHeight:1.8,fontSize:"15px"},children:["Out of ALL the teams that applied, YOU made it to the finals. Your idea is validated. Your code works. Now it's about ",e("strong",{children:"execution and presentation"}),". The judges want to be impressed - give them a reason to pick YOU.",e("br",{}),e("br",{}),"Remember: ",e("strong",{children:"Andi Taufan built Amartha to fight poverty"}),". Show him how YOUR solution amplifies that mission. Make him see the faces of the millions of Ibus whose lives will change. That's how you win. 💪"]})]}),e("div",{style:{background:"#fff",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #e0e0e0"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#1565c0"},children:[e(Vi,{size:22})," Know Your Judges"]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:bn.map((t,i)=>e("div",{style:{background:"#e3f2fd",padding:"14px",borderRadius:"8px",borderLeft:"4px solid #1976d2"},children:[e("div",{style:{fontWeight:700,color:"#1565c0",marginBottom:"4px"},children:t.name}),e("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:t.role}),e("div",{style:{fontSize:"13px",color:"#333",lineHeight:1.5},children:["💡 ",t.tip]})]},i))})]}),e("div",{style:{background:"#f3e5f5",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #ce93d8"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#7b1fa2"},children:[e(Ge,{size:22})," Critical Timeline"]}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"8px"},children:_n.map((t,i)=>e("div",{style:{background:"#fff",padding:"10px 14px",borderRadius:"6px",display:"flex",gap:"12px",alignItems:"flex-start"},children:[e("div",{style:{fontWeight:700,color:"#7b1fa2",minWidth:"50px",fontSize:"13px"},children:t.time}),e("div",{children:[e("div",{style:{fontWeight:600,fontSize:"13px",color:"#333"},children:t.event}),e("div",{style:{fontSize:"12px",color:"#666"},children:t.action})]})]},i))})]}),e("div",{style:{background:"#fff",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #e0e0e0"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#c62828"},children:[e(Ae,{size:22})," Hard Questions & Killer Answers"]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:kn.map((t,i)=>e("div",{style:{background:"#fafafa",padding:"12px 14px",borderRadius:"6px",borderLeft:"4px solid #f44336"},children:[e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"6px"},children:[e("div",{style:{fontWeight:600,color:"#c62828",fontSize:"13px",flex:1},children:["Q: ",t.q]}),e("span",{style:{background:"#e3f2fd",color:"#1565c0",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:600},children:t.judge})]}),e("div",{style:{color:"#333",fontSize:"12px",lineHeight:1.6},children:["A: ",t.a]})]},i))})]}),e("div",{style:{background:"#e8f5e9",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #a5d6a7"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#2e7d32"},children:[e(Ht,{size:22})," Winning Strategies"]}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"12px"},children:wn.map((t,i)=>e("div",{style:{background:"#fff",padding:"14px",borderRadius:"6px",border:"1px solid #c8e6c9"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e("span",{style:{fontSize:"22px"},children:t.icon}),e("strong",{style:{color:"#2e7d32",fontSize:"14px"},children:t.title})]}),e("div",{style:{color:"#555",fontSize:"13px",lineHeight:1.6},children:t.tip})]},i))})]}),e("div",{style:{background:"linear-gradient(135deg, #1a237e 0%, #283593 100%)",padding:"24px",borderRadius:"12px",marginBottom:"24px",color:"#fff"},children:[e("h2",{style:{margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[e(Si,{size:24})," 📊 Data Analytics Deep Dive Q&A"]}),e("p",{style:{margin:0,opacity:.9,fontSize:"14px"},children:"Judges will probe your data analysis methodology. Here are 12 likely questions with Best / Okay / Bad answer examples."})]}),Sn.map((t,i)=>e("div",{style:{background:"#fff",padding:"20px",borderRadius:"8px",marginBottom:"16px",border:"1px solid #e0e0e0"},children:[e("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e("div",{style:{background:"#1a237e",color:"#fff",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:700,flexShrink:0},children:i+1}),e("div",{children:[e("div",{style:{fontWeight:700,fontSize:"15px",color:"#1a237e",marginBottom:"4px"},children:['"',t.question,'"']}),e("div",{style:{fontSize:"12px",color:"#666",fontStyle:"italic"},children:t.context})]})]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginLeft:"40px"},children:[e("div",{style:{background:"#e8f5e9",padding:"12px 14px",borderRadius:"6px",borderLeft:"4px solid #4caf50"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:e("span",{style:{background:"#4caf50",color:"#fff",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:700},children:"✅ BEST ANSWER"})}),e("div",{style:{fontSize:"13px",color:"#2e7d32",lineHeight:1.7},children:t.best})]}),e("div",{style:{background:"#fff3e0",padding:"12px 14px",borderRadius:"6px",borderLeft:"4px solid #ff9800"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:e("span",{style:{background:"#ff9800",color:"#fff",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:700},children:"😐 OKAY ANSWER"})}),e("div",{style:{fontSize:"13px",color:"#e65100",lineHeight:1.7},children:t.okay})]}),e("div",{style:{background:"#ffebee",padding:"12px 14px",borderRadius:"6px",borderLeft:"4px solid #f44336"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:e("span",{style:{background:"#f44336",color:"#fff",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:700},children:"❌ BAD ANSWER"})}),e("div",{style:{fontSize:"13px",color:"#c62828",lineHeight:1.7},children:t.bad})]})]})]},i)),e("div",{style:{background:"#fff3e0",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #ffcc80"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#e65100"},children:[e(qi,{size:22})," 10-Minute Demo Script"]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:zn.map((t,i)=>e("div",{style:{background:"#fff",padding:"12px 14px",borderRadius:"6px",display:"flex",gap:"12px",alignItems:"flex-start"},children:[e("div",{style:{background:"#ff9800",color:"#fff",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:700,flexShrink:0},children:t.step}),e("div",{style:{flex:1},children:[e("div",{style:{fontWeight:600,fontSize:"13px",color:"#333",marginBottom:"4px"},children:t.action}),e("div",{style:{fontSize:"12px",color:"#e65100",fontStyle:"italic"},children:t.speak})]})]},i))})]}),e("div",{style:{background:"#e0f7fa",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #80deea"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#00838f"},children:[e(V,{size:22})," Key Mentors to Approach"]}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"10px"},children:vn.map((t,i)=>e("div",{style:{background:"#fff",padding:"12px",borderRadius:"6px"},children:[e("div",{style:{fontWeight:600,fontSize:"14px",color:"#00838f"},children:t.name}),e("div",{style:{fontSize:"11px",color:"#666",marginBottom:"6px"},children:t.role}),e("div",{style:{fontSize:"12px",color:"#333"},children:["Ask about: ",e("strong",{children:t.focus})]})]},i))})]}),e("div",{style:{background:"#fce4ec",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #f48fb1"},children:[e("h2",{style:{margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px",color:"#c2185b"},children:[e(Ve,{size:22})," Pre-Demo Checklist"]}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"13px"},children:An.map((t,i)=>e("div",{style:{padding:"8px 12px",background:"#fff",borderRadius:"4px"},children:t},i))})]}),e("div",{style:{textAlign:"center",padding:"32px",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",borderRadius:"12px",color:"#fff"},children:[e("h2",{style:{margin:"0 0 16px 0",fontSize:"24px"},children:"🌟 You've Got This! 🌟"}),e("p",{style:{margin:0,fontSize:"16px",lineHeight:1.8,maxWidth:"600px",marginLeft:"auto",marginRight:"auto"},children:["You built something ",e("strong",{children:"real"})," that can change ",e("strong",{children:"millions of lives"}),".",e("br",{}),e("br",{}),"Walk in there with confidence. You're not just presenting code - you're presenting a ",e("strong",{children:"solution to poverty"}),".",e("br",{}),e("br",{}),e("strong",{children:"Now go WIN this thing! 🏆"})]})]})]})}const oe=({title:t,children:i})=>e("div",{class:"card",style:"background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%); border: 1px solid #E2E8F0; margin-top: 24px;",children:[e("div",{style:"display: flex; align-items: center; gap: 8px; margin-bottom: 12px;",children:[e(Be,{size:18,style:"color: #63297A;"}),e("h3",{style:"margin: 0; font-size: 15px; color: #1F2937;",children:t})]}),i]}),U=({icon:t,title:i,children:n})=>e("div",{style:"display: flex; gap: 12px; margin-bottom: 16px;",children:[e("div",{style:"width: 32px; height: 32px; background: #63297A15; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;",children:e(t,{size:16,style:"color: #63297A;"})}),e("div",{children:[e("div",{style:"font-size: 13px; font-weight: 600; color: #374151; margin-bottom: 4px;",children:i}),e("div",{style:"font-size: 13px; color: #6B7280; line-height: 1.6;",children:n})]})]});function Mn(){const[t,i]=E(!0),[n,r]=E("overview"),[o,a]=E({});J(()=>{d()},[]);const d=async()=>{i(!0);try{const[l,k,S,_,b]=await Promise.all([fetch("/api/analytics/summary").then(v=>v.json()),fetch("/api/analytics/payments").then(v=>v.json()),fetch("/api/analytics/segments").then(v=>v.json()),fetch("/api/analytics/routes").then(v=>v.json()),fetch("/api/analytics/risk/all?limit=50").then(v=>v.json())]);a({summary:l,payments:k,segments:S,routes:_,risks:b})}catch(l){console.error("Failed to load analytics:",l)}i(!1)};if(t)return e("div",{class:"card",style:"text-align: center; padding: 80px;",children:[e(Pi,{size:48,class:"spin",style:"color: #63297A; margin-bottom: 16px;"}),e("div",{style:"font-size: 18px; color: #374151;",children:"Loading Analytics Data..."}),e("div",{style:"font-size: 14px; color: #6B7280; margin-top: 8px;",children:"Processing 12K customers, 600K bills..."})]});const{summary:c,payments:g,segments:h,routes:u,risks:s}=o;return e("div",{children:[e("div",{class:"exec-summary",children:[e("div",{class:"exec-summary-label",children:"Hackathon Dataset Analytics"}),e("div",{class:"exec-summary-title",children:"Credit Risk Intelligence Dashboard"}),e("div",{class:"exec-summary-subtitle",children:"ML-powered insights from 12K customers, 600K payment records"})]}),e("div",{style:"display: flex; gap: 8px; margin-bottom: 24px; flex-wrap: wrap;",children:[{id:"overview",label:"Overview",icon:re},{id:"risk",label:"Risk Predictions",icon:Ae},{id:"payments",label:"Payment Analytics",icon:ce},{id:"segments",label:"Customer Segments",icon:Ht},{id:"routes",label:"Field Agent Routes",icon:ge}].map(l=>{const k=l.icon;return e("button",{onClick:()=>r(l.id),class:`btn ${n===l.id?"btn-primary":"btn-secondary"}`,children:[e(k,{size:16})," ",l.label]},l.id)})}),n==="overview"&&c&&e("div",{children:[e("div",{class:"stats-grid",children:[e("div",{class:"stat-card",children:[e("div",{class:"stat-value",children:c.customerCount?.toLocaleString()}),e("div",{class:"stat-label",children:"Customers"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",children:c.billCount?.toLocaleString()}),e("div",{class:"stat-label",children:"Payment Records"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #10B981;",children:c.riskDistribution?.Low||0}),e("div",{class:"stat-label",children:"Low Risk"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #F59E0B;",children:c.riskDistribution?.Medium||0}),e("div",{class:"stat-label",children:"Medium Risk"})]}),e("div",{class:"stat-card",children:[e("div",{class:"stat-value",style:"color: #EF4444;",children:c.riskDistribution?.High||0}),e("div",{class:"stat-label",children:"High Risk"})]})]}),e("div",{class:"so-what-box",children:[e("div",{class:"so-what-title",children:"💡 Key Insight"}),e("div",{class:"so-what-text",children:[e("strong",{children:[Math.round(c.riskDistribution?.High/c.customerCount*100),"% of customers"]})," are flagged as high risk. These ",c.riskDistribution?.High," borrowers require immediate attention from field agents to prevent defaults."]})]}),g?.summary&&e("div",{class:"card",children:[e("h2",{style:"display: flex; align-items: center; gap: 8px;",children:[e(ce,{size:20})," Collection Performance"]}),e("div",{style:"display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 16px;",children:[e("div",{style:"text-align: center; padding: 20px; background: #F9FAFB; border-radius: 12px;",children:[e("div",{style:"font-size: 36px; font-weight: 800; color: #63297A;",children:["Rp ",g.summary.totalScheduledM,"M"]}),e("div",{style:"font-size: 13px; color: #6B7280;",children:"Total Scheduled"})]}),e("div",{style:"text-align: center; padding: 20px; background: #F9FAFB; border-radius: 12px;",children:[e("div",{style:"font-size: 36px; font-weight: 800; color: #10B981;",children:["Rp ",g.summary.totalPaidM,"M"]}),e("div",{style:"font-size: 13px; color: #6B7280;",children:"Total Collected"})]}),e("div",{style:"text-align: center; padding: 20px; background: #F9FAFB; border-radius: 12px;",children:[e("div",{style:`font-size: 36px; font-weight: 800; color: ${g.summary.overallCollectionRate>=80?"#10B981":"#F59E0B"};`,children:[g.summary.overallCollectionRate,"%"]}),e("div",{style:"font-size: 13px; color: #6B7280;",children:"Collection Rate"})]})]})]}),e(oe,{title:"Data Overview & Approach",children:[e(U,{icon:se,title:"1. Data Discovery",children:["Scanned the hackathon dataset folder and identified 5 CSV files: ",e("code",{children:"customers.csv"})," (12K rows), ",e("code",{children:"loan_snapshots.csv"})," (12K), ",e("code",{children:"bills.csv"})," (599K), ",e("code",{children:"tasks.csv"})," (160K), ",e("code",{children:"task_participants.csv"})," (1.3M). Also found 100 business + 100 house images."]}),e(U,{icon:ie,title:"2. Data Understanding",children:["Analyzed column headers and sample rows. Key findings: ",e("strong",{children:"DPD (Days Past Due)"})," in loan_snapshots indicates delinquency, ",e("strong",{children:"bill_paid_date vs bill_scheduled_date"})," shows late payments, ",e("strong",{children:"GPS coordinates"})," in tasks enable route analysis."]}),e(U,{icon:ae,title:"3. Engineering Approach",children:"Built a Node.js service that loads CSVs into memory on startup (~5 sec). Created indexes by customer_number and loan_id for O(1) lookups. Computed derived metrics (payment ratio, late ratio) per customer. All processing happens server-side for fast API responses."})]})]}),n==="risk"&&s&&e("div",{children:[e("div",{class:"key-takeaway",children:[e("div",{class:"key-takeaway-title",children:"🎯 ML Risk Model"}),e("div",{class:"key-takeaway-text",children:"Predictions based on payment ratio, late payment frequency, days past due (DPD), and business type. Higher scores = higher default probability."})]}),e("div",{class:"card",children:[e("h2",{children:[e(Ae,{size:20})," Top 50 High-Risk Customers"]}),e("table",{class:"data-table",children:[e("thead",{children:e("tr",{children:[e("th",{children:"Customer ID"}),e("th",{children:"Risk Score"}),e("th",{children:"Risk Level"}),e("th",{children:"Payment %"}),e("th",{children:"Late %"}),e("th",{children:"DPD"}),e("th",{children:"Business"})]})}),e("tbody",{children:s.slice(0,30).map((l,k)=>e("tr",{class:"stagger-item",children:[e("td",{style:"font-family: monospace;",children:[l.customerNumber?.substring(0,12),"..."]}),e("td",{children:e("span",{style:`font-weight: 700; color: ${l.riskScore>=60?"#EF4444":l.riskScore>=30?"#F59E0B":"#10B981"};`,children:l.riskScore})}),e("td",{children:e("span",{class:`risk-indicator ${l.riskLevel.toLowerCase()}`,style:"padding: 4px 8px; font-size: 11px;",children:l.riskLevel})}),e("td",{children:[l.factors?.paymentRatio,"%"]}),e("td",{children:[l.factors?.lateRatio,"%"]}),e("td",{style:l.factors?.dpd>30?"color: #EF4444; font-weight: 700;":"",children:l.factors?.dpd}),e("td",{style:"text-transform: capitalize;",children:l.factors?.businessType})]},k))})]})]}),e("div",{class:"insight-box",children:[e("div",{class:"insight-box-title",children:"📊 Why This Matters"}),e("div",{class:"insight-box-text",children:["Early identification of high-risk borrowers allows ",e("strong",{children:"proactive intervention"})," before defaults occur. Field agents can prioritize visits to these customers, offer payment restructuring, or escalate to collections."]})]}),e(oe,{title:"Risk Prediction Methodology",children:[e(U,{icon:se,title:"1. Data Selection Rationale",children:["Selected ",e("strong",{children:"4 key predictors"})," from available data: (1) Payment ratio from bills.csv — measures historical payment discipline, (2) Late ratio — frequency of delayed payments, (3) DPD from loan_snapshots — current delinquency status, (4) Business type from customers.csv — income stability proxy."]}),e(U,{icon:ie,title:"2. Insight Rationale",children:["Credit risk literature shows ",e("strong",{children:"past payment behavior is the strongest predictor"})," of future defaults. DPD is a lagging indicator (already late), while payment/late ratios are leading indicators. Business type adds context — farming has seasonal income volatility vs retail's steady cash flow."]}),e(U,{icon:ae,title:"3. Engineering Implementation",children:[e("div",{style:"background: #1F2937; color: #E5E7EB; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 12px; margin-top: 8px; overflow-x: auto;",children:["riskScore = 50 (base)",e("br",{}),"  - paymentRatio × 30   // good payers reduce risk",e("br",{}),"  + lateRatio × 25     // late payers increase risk",e("br",{}),"  + min(DPD/2, 30)    // overdue days capped at 30pts",e("br",{}),"  - (collectionRatio-0.5) × 20",e("br",{}),"  + businessTypeAdj    // farming +5, retail -5"]}),e("div",{style:"margin-top: 8px;",children:"Weights chosen based on industry credit scoring practices. Score clamped to 0-100 range."})]})]})]}),n==="payments"&&g&&e("div",{children:[e("div",{class:"card",children:[e("h2",{children:[e(ce,{size:20})," Monthly Collection Trend"]}),e("div",{style:"overflow-x: auto;",children:e("table",{class:"data-table",children:[e("thead",{children:e("tr",{children:[e("th",{children:"Month"}),e("th",{children:"Scheduled (M)"}),e("th",{children:"Collected (M)"}),e("th",{children:"Collection Rate"}),e("th",{children:"Late Rate"})]})}),e("tbody",{children:g.monthlyTrend?.slice(-12).map((l,k)=>e("tr",{class:"stagger-item",children:[e("td",{style:"font-weight: 600;",children:l.month}),e("td",{children:["Rp ",l.scheduled,"M"]}),e("td",{children:["Rp ",l.paid,"M"]}),e("td",{children:e("div",{style:"display: flex; align-items: center; gap: 8px;",children:[e("div",{style:"flex: 1; height: 8px; background: #E5E7EB; border-radius: 4px; overflow: hidden;",children:e("div",{style:`height: 100%; width: ${l.collectionRate}%; background: ${l.collectionRate>=80?"#10B981":"#F59E0B"};`})}),e("span",{style:"width: 40px; font-weight: 600;",children:[l.collectionRate,"%"]})]})}),e("td",{style:l.lateRate>20?"color: #EF4444;":"",children:[l.lateRate,"%"]})]},k))})]})})]}),e("div",{class:"card",children:[e("h2",{children:"Business Type Performance"}),e("div",{style:"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;",children:g.businessTypeStats?.map((l,k)=>e("div",{class:"metric-card",children:[e("div",{class:"metric-label",style:"text-transform: capitalize;",children:l.type}),e("div",{class:"metric-value",children:l.count}),e("div",{style:"display: flex; justify-content: space-between; margin-top: 8px; font-size: 13px;",children:[e("span",{children:["Avg Risk: ",e("strong",{style:l.avgRiskScore>=50?"color: #EF4444;":"color: #10B981;",children:l.avgRiskScore})]}),e("span",{children:["Payment: ",e("strong",{children:[l.avgPaymentRatio,"%"]})]})]})]},k))})]}),e("div",{class:"so-what-box",children:[e("div",{class:"so-what-title",children:"💡 Business Insight"}),e("div",{class:"so-what-text",children:[e("strong",{children:"Farming businesses"})," show higher risk scores due to seasonal income volatility. Consider offering flexible payment schedules aligned with harvest cycles.",e("strong",{children:"Retail (warung)"})," businesses have more stable cash flows and lower default rates."]})]}),e(oe,{title:"Payment Analytics Methodology",children:[e(U,{icon:se,title:"1. Data Selection Rationale",children:["Used ",e("strong",{children:"bills.csv"})," (599K records) as primary source. Key columns: ",e("code",{children:"bill_scheduled_date"}),", ",e("code",{children:"bill_paid_date"}),", ",e("code",{children:"amount"}),", ",e("code",{children:"paid_amount"}),". Joined with customers.csv via loan_id → customer_number to get business type."]}),e(U,{icon:ie,title:"2. Insight Rationale",children:[e("strong",{children:"Collection rate"})," (paid/scheduled) measures portfolio health — industry benchmark is 95%+. ",e("strong",{children:"Late rate"})," is an early warning — customers paying late today may default tomorrow. ",e("strong",{children:"Monthly trend"})," reveals seasonality (harvest seasons, holidays). ",e("strong",{children:"Business type breakdown"})," identifies which segments need different treatment."]}),e(U,{icon:ae,title:"3. Engineering Implementation",children:["Aggregated bills by month using ",e("code",{children:"bill_scheduled_date"}),". For each bill, compared ",e("code",{children:["bill_paid_date ",">"," bill_scheduled_date"]}),' to flag late payments. Business type categorized by keyword matching on customer purpose field: "warung/dagang" → retail, "ternak" → livestock, "tani" → farming.']})]})]}),n==="segments"&&h&&e("div",{children:[e("div",{class:"key-takeaway",children:[e("div",{class:"key-takeaway-title",children:"🎯 Segmentation Strategy"}),e("div",{class:"key-takeaway-text",children:"Customers grouped by risk profile and behavior for targeted interventions. Each segment has specific recommendations for field agents and literacy content."})]}),e("div",{style:"display: grid; gap: 20px;",children:Object.entries(h).map(([l,k])=>e("div",{class:"card",style:"padding: 0; overflow: hidden;",children:[e("div",{style:`padding: 16px 20px; background: ${l==="star_performers"?"#D1FAE5":l==="high_risk"?"#FEE2E2":l==="needs_attention"?"#FEF3C7":"#F3F4F6"};`,children:e("div",{style:"display: flex; justify-content: space-between; align-items: center;",children:[e("div",{children:[e("div",{style:"font-size: 16px; font-weight: 700; text-transform: capitalize; color: #1F2937;",children:l.replace(/_/g," ")}),e("div",{style:"font-size: 13px; color: #6B7280;",children:k.criteria})]}),e("div",{style:"font-size: 28px; font-weight: 800; color: #63297A;",children:k.count})]})}),e("div",{style:"padding: 16px 20px;",children:[e("div",{style:"font-size: 12px; font-weight: 600; color: #6B7280; margin-bottom: 8px;",children:"RECOMMENDATIONS"}),e("ul",{style:"margin: 0; padding-left: 20px; font-size: 14px; color: #374151;",children:k.recommendations?.map((S,_)=>e("li",{style:"margin-bottom: 4px;",children:S},_))})]})]},l))}),e(oe,{title:"Segmentation Methodology",children:[e(U,{icon:se,title:"1. Data Selection Rationale",children:["Combined ",e("strong",{children:"risk score"})," (computed metric), ",e("strong",{children:"payment ratio"}),", ",e("strong",{children:"DPD"}),", ",e("strong",{children:"business type"}),", and ",e("strong",{children:"bill count"}),". These dimensions capture both current status and behavioral patterns needed for actionable segmentation."]}),e(U,{icon:ie,title:"2. Segment Design Rationale",children:[e("strong",{children:"Star Performers"}),": Low risk + high payment = reward and retain. ",e("strong",{children:"Growth Potential"}),": Medium risk retail = stable income, can improve. ",e("strong",{children:"Needs Attention"}),": Paying but late = intervention before it worsens. ",e("strong",{children:"High Risk"}),": Immediate action needed. ",e("strong",{children:"New Borrowers"}),": Insufficient data, need monitoring."]}),e(U,{icon:ae,title:"3. Engineering Implementation",children:e("div",{style:"background: #1F2937; color: #E5E7EB; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 12px; margin-top: 8px;",children:["if (billCount ","<"," 3) → new_borrowers",e("br",{}),"else if (riskLevel='Low' AND paymentRatio",">","0.9) → star_performers",e("br",{}),"else if (riskLevel='Medium' AND businessType='retail') → growth_potential",e("br",{}),"else if (lateRatio",">","0.3 AND paymentRatio",">","0.5) → needs_attention",e("br",{}),"else if (riskLevel='High' OR dpd",">","30) → high_risk"]})})]})]}),n==="routes"&&u&&e("div",{children:[e("div",{class:"card",children:[e("h2",{children:[e(ge,{size:20})," Branch Route Analysis"]}),e("p",{style:"color: #6B7280; margin-bottom: 16px;",children:["GPS data from ",c?.taskCount?.toLocaleString()," field visits analyzed for route efficiency."]}),e("table",{class:"data-table",children:[e("thead",{children:e("tr",{children:[e("th",{children:"Branch ID"}),e("th",{children:"Tasks"}),e("th",{children:"Center"}),e("th",{children:"Avg Spread"}),e("th",{children:"Max Spread"}),e("th",{children:"Avg Delay"}),e("th",{children:"Efficiency"})]})}),e("tbody",{children:u.slice(0,15).map((l,k)=>e("tr",{class:"stagger-item",children:[e("td",{style:"font-family: monospace;",children:l.branchId}),e("td",{children:l.taskCount}),e("td",{children:[l.centerLat,", ",l.centerLng]}),e("td",{children:[l.avgSpreadKm," km"]}),e("td",{children:[l.maxSpreadKm," km"]}),e("td",{style:l.avgDelayHours>5?"color: #EF4444;":"",children:[l.avgDelayHours,"h"]}),e("td",{children:e("span",{class:`risk-indicator ${l.efficiency==="Good"?"low":l.efficiency==="Moderate"?"medium":"high"}`,style:"padding: 4px 8px; font-size: 11px;",children:l.efficiency})})]},k))})]})]}),e("div",{class:"insight-box",children:[e("div",{class:"insight-box-title",children:"📊 Route Optimization Insight"}),e("div",{class:"insight-box-text",children:["Branches with ",e("strong",{children:"high spread (>10km)"})," and ",e("strong",{children:"poor efficiency"})," indicate suboptimal route planning. Field agents in these areas spend more time traveling than collecting. Recommend clustering visits by geographic proximity to reduce travel time by up to 30%."]})]}),e(oe,{title:"Route Analysis Methodology",children:[e(U,{icon:se,title:"1. Data Selection Rationale",children:["Used ",e("strong",{children:"tasks.csv"})," (160K records) with columns: ",e("code",{children:"latitude"}),", ",e("code",{children:"longitude"}),", ",e("code",{children:"branch_id"}),", ",e("code",{children:"start_datetime"})," (scheduled), ",e("code",{children:"actual_datetime"}),". GPS coordinates enable geographic analysis; timestamps enable efficiency measurement."]}),e(U,{icon:ie,title:"2. Insight Rationale",children:[e("strong",{children:"Geographic spread"})," indicates how dispersed a field agent's visits are — high spread = more travel time. ",e("strong",{children:"Avg delay"})," (actual - scheduled) shows operational efficiency. Branches with high spread AND high delay are candidates for route optimization. Industry research shows optimized routes can reduce travel by 20-30%."]}),e(U,{icon:ae,title:"3. Engineering Implementation",children:[e("div",{style:"margin-top: 8px;",children:[e("strong",{children:"Center point:"})," Average of all lat/lng coordinates per branch.",e("br",{}),e("strong",{children:"Spread:"})," Haversine distance from each point to center, then averaged.",e("br",{}),e("strong",{children:"Delay:"})," (actual_datetime - start_datetime) in hours.",e("br",{}),e("strong",{children:"Efficiency:"})," Good (","<","2h delay), Moderate (2-5h), Poor (",">","5h)."]}),e("div",{style:"background: #1F2937; color: #E5E7EB; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 11px; margin-top: 8px;",children:"haversine(lat1, lon1, lat2, lon2) = 2 × R × arcsin(√(sin²(Δlat/2) + cos(lat1)×cos(lat2)×sin²(Δlon/2)))"})]})]})]})]})}function Bn(){const[t,i]=E("");J(()=>{const r=()=>{i(window.location.pathname)};r(),window.addEventListener("popstate",r);const o=new MutationObserver(r);return o.observe(document.body,{childList:!0,subtree:!0}),()=>{window.removeEventListener("popstate",r),o.disconnect()}},[]);const n=(r,o)=>{r.preventDefault(),window.history.pushState({},"",o),window.dispatchEvent(new PopStateEvent("popstate")),i(o)};return e("div",{class:"header",children:e("div",{class:"header-content",children:[e("div",{children:[e("h1",{style:"display: flex; align-items: center; gap: 12px;",children:[e("img",{src:"/assets/logo.png",alt:"Amartha",style:"height: 36px; width: auto;"}),"Admin Dashboard"]}),e("div",{class:"nav",children:[e("a",{href:"/",class:t==="/"?"active":"",onClick:r=>n(r,"/"),children:[e(V,{size:16})," Users"]}),e("a",{href:"/majelis",class:t==="/majelis"?"active":"",onClick:r=>n(r,"/majelis"),children:[e(Xi,{size:16})," Majelis"]}),e("a",{href:"/analytics",class:t==="/analytics"?"active":"",onClick:r=>n(r,"/analytics"),style:"background: linear-gradient(135deg, rgba(249, 207, 121, 0.2) 0%, rgba(249, 207, 121, 0.1) 100%); border: 1px solid rgba(249, 207, 121, 0.3);",children:[e(re,{size:16})," Analytics ✨"]}),e("a",{href:"/business-types",class:t==="/business-types"?"active":"",onClick:r=>n(r,"/business-types"),children:[e(Tt,{size:16})," Business Types"]}),e("a",{href:"/financial-literacy",class:t==="/financial-literacy"?"active":"",onClick:r=>n(r,"/financial-literacy"),children:[e(me,{size:16})," Financial Literacy"]}),e("a",{href:"/how-it-works",class:t==="/how-it-works"?"active":"",onClick:r=>n(r,"/how-it-works"),children:[e(Ei,{size:16})," Cara Kerja"]}),e("a",{href:"/demo",class:t==="/demo"?"active":"",onClick:r=>n(r,"/demo"),children:[e(Pt,{size:16})," Demo"]})]})]}),e("div",{class:"admin-badge",children:[e("span",{children:"👤"})," Admin: ",e("strong",{children:"Petugas Lapangan"})]})]})})}function En(){return e("div",{class:"container",children:[e(Bn,{}),e(It,{children:[e(en,{path:"/"}),e(tn,{path:"/majelis"}),e(rn,{path:"/majelis/:id"}),e(sn,{path:"/business-types"}),e(on,{path:"/financial-literacy"}),e(hn,{path:"/how-it-works"}),e(xn,{path:"/demo"}),e(Cn,{path:"/secret"}),e(pn,{path:"/user-profile/:phone"}),e(Mn,{path:"/analytics"})]})]})}Qt(e(En,{}),document.getElementById("app"));
